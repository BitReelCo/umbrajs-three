{"version":3,"file":"umbrajs-three.esm.min.js","sources":["../../umbra4/bindings/js/umbrajs/dist/umbra.esm.js","../src/ThreeFormats.ts","../src/ShaderPatcher.ts","../src/ObjectPool.ts","../src/Scene.ts","../src/Loader.ts","../src/index.ts"],"sourcesContent":["function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar UmbraNativeAPI = function () {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n\n  return function (UmbraNativeAPI) {\n    UmbraNativeAPI = UmbraNativeAPI || {};\n    var c;\n    c || (c = typeof UmbraNativeAPI !== 'undefined' ? UmbraNativeAPI : {});\n    var n = {},\n        r;\n\n    for (r in c) {\n      c.hasOwnProperty(r) && (n[r] = c[r]);\n    }\n\n    var aa = \"./this.program\";\n\n    function ba(a, b) {\n      throw b;\n    }\n\n    var v = \"\";\n    document.currentScript && (v = document.currentScript.src);\n    _scriptDir && (v = _scriptDir);\n    0 !== v.indexOf(\"blob:\") ? v = v.substr(0, v.lastIndexOf(\"/\") + 1) : v = \"\";\n    var ca = c.print || console.log.bind(console),\n        w = c.printErr || console.warn.bind(console);\n\n    for (r in n) {\n      n.hasOwnProperty(r) && (c[r] = n[r]);\n    }\n\n    n = null;\n    c.thisProgram && (aa = c.thisProgram);\n    c.quit && (ba = c.quit);\n\n    function da(a, b) {\n      b || (b = 16);\n      return Math.ceil(a / b) * b;\n    }\n\n    function ea(a) {\n      fa || (fa = {});\n      fa[a] || (fa[a] = 1, w(a));\n    }\n\n    var fa, y;\n    c.wasmBinary && (y = c.wasmBinary);\n    var ha;\n    c.noExitRuntime && (ha = c.noExitRuntime);\n    \"object\" !== (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) && w(\"no native wasm support detected\");\n    var z,\n        ia = new WebAssembly.Table({\n      initial: 271,\n      maximum: 271,\n      element: \"anyfunc\"\n    }),\n        A = !1;\n\n    function ja(a, b) {\n      a || B(\"Assertion failed: \" + b);\n    }\n\n    function ka(a) {\n      var b = c[\"_\" + a];\n      ja(b, \"Cannot call unknown function \" + a + \", make sure it is exported\");\n      return b;\n    }\n\n    function la(a, b, d, e) {\n      var f = {\n        string: function string(a) {\n          var b = 0;\n\n          if (null !== a && void 0 !== a && 0 !== a) {\n            var d = (a.length << 2) + 1;\n            b = ma(d);\n            na(a, b, d);\n          }\n\n          return b;\n        },\n        array: function array(a) {\n          var b = ma(a.length);\n          C.set(a, b);\n          return b;\n        }\n      },\n          g = ka(a),\n          k = [];\n      a = 0;\n      if (e) for (var h = 0; h < e.length; h++) {\n        var l = f[d[h]];\n        l ? (0 === a && (a = oa()), k[h] = l(e[h])) : k[h] = e[h];\n      }\n      d = g.apply(null, k);\n\n      d = function (a) {\n        return \"string\" === b ? D(a) : \"boolean\" === b ? !!a : a;\n      }(d);\n\n      0 !== a && pa(a);\n      return d;\n    }\n\n    var qa = \"undefined\" !== typeof TextDecoder ? new TextDecoder(\"utf8\") : void 0;\n\n    function ra(a, b, d) {\n      var e = b + d;\n\n      for (d = b; a[d] && !(d >= e);) {\n        ++d;\n      }\n\n      if (16 < d - b && a.subarray && qa) return qa.decode(a.subarray(b, d));\n\n      for (e = \"\"; b < d;) {\n        var f = a[b++];\n\n        if (f & 128) {\n          var g = a[b++] & 63;\n          if (192 == (f & 224)) e += String.fromCharCode((f & 31) << 6 | g);else {\n            var k = a[b++] & 63;\n            f = 224 == (f & 240) ? (f & 15) << 12 | g << 6 | k : (f & 7) << 18 | g << 12 | k << 6 | a[b++] & 63;\n            65536 > f ? e += String.fromCharCode(f) : (f -= 65536, e += String.fromCharCode(55296 | f >> 10, 56320 | f & 1023));\n          }\n        } else e += String.fromCharCode(f);\n      }\n\n      return e;\n    }\n\n    function D(a) {\n      return a ? ra(_E, a, void 0) : \"\";\n    }\n\n    function na(a, b, d) {\n      var e = _E;\n\n      if (0 < d) {\n        d = b + d - 1;\n\n        for (var f = 0; f < a.length; ++f) {\n          var g = a.charCodeAt(f);\n\n          if (55296 <= g && 57343 >= g) {\n            var k = a.charCodeAt(++f);\n            g = 65536 + ((g & 1023) << 10) | k & 1023;\n          }\n\n          if (127 >= g) {\n            if (b >= d) break;\n            e[b++] = g;\n          } else {\n            if (2047 >= g) {\n              if (b + 1 >= d) break;\n              e[b++] = 192 | g >> 6;\n            } else {\n              if (65535 >= g) {\n                if (b + 2 >= d) break;\n                e[b++] = 224 | g >> 12;\n              } else {\n                if (b + 3 >= d) break;\n                e[b++] = 240 | g >> 18;\n                e[b++] = 128 | g >> 12 & 63;\n              }\n\n              e[b++] = 128 | g >> 6 & 63;\n            }\n\n            e[b++] = 128 | g & 63;\n          }\n        }\n\n        e[b] = 0;\n      }\n    }\n\n    \"undefined\" !== typeof TextDecoder && new TextDecoder(\"utf-16le\");\n\n    function sa(a) {\n      0 < a % 65536 && (a += 65536 - a % 65536);\n      return a;\n    }\n\n    var ta, C, _E, ua, va, F, G, wa, xa;\n\n    function ya(a) {\n      ta = a;\n      c.HEAP8 = C = new Int8Array(a);\n      c.HEAP16 = ua = new Int16Array(a);\n      c.HEAP32 = F = new Int32Array(a);\n      c.HEAPU8 = _E = new Uint8Array(a);\n      c.HEAPU16 = va = new Uint16Array(a);\n      c.HEAPU32 = G = new Uint32Array(a);\n      c.HEAPF32 = wa = new Float32Array(a);\n      c.HEAPF64 = xa = new Float64Array(a);\n    }\n\n    var Aa = c.TOTAL_MEMORY || 134217728;\n    c.wasmMemory ? z = c.wasmMemory : z = new WebAssembly.Memory({\n      initial: Aa / 65536\n    });\n    z && (ta = z.buffer);\n    Aa = ta.byteLength;\n    ya(ta);\n    F[6668] = 5269712;\n\n    function Ba(a) {\n      for (; 0 < a.length;) {\n        var b = a.shift();\n        if (\"function\" == typeof b) b();else {\n          var d = b.Ob;\n          \"number\" === typeof d ? void 0 === b.Lb ? c.dynCall_v(d) : c.dynCall_vi(d, b.Lb) : d(void 0 === b.Lb ? null : b.Lb);\n        }\n      }\n    }\n\n    var Ca = [],\n        Da = [],\n        Ea = [],\n        Fa = [],\n        Ga = [];\n\n    function Ha() {\n      var a = c.preRun.shift();\n      Ca.unshift(a);\n    }\n\n    var H = 0,\n        Ja = null;\n    c.preloadedImages = {};\n    c.preloadedAudios = {};\n\n    function B(a) {\n      if (c.onAbort) c.onAbort(a);\n      ca(a);\n      w(a);\n      A = !0;\n      throw new WebAssembly.RuntimeError(\"abort(\" + a + \"). Build with -s ASSERTIONS=1 for more info.\");\n    }\n\n    function Ka() {\n      var a = I;\n      return String.prototype.startsWith ? a.startsWith(\"data:application/octet-stream;base64,\") : 0 === a.indexOf(\"data:application/octet-stream;base64,\");\n    }\n\n    var I = \"umbra.wasm\";\n\n    if (!Ka()) {\n      var La = I;\n      I = c.locateFile ? c.locateFile(La, v) : v + La;\n    }\n\n    function Ma() {\n      try {\n        if (y) return new Uint8Array(y);\n        throw \"both async and sync fetching of the wasm failed\";\n      } catch (a) {\n        B(a);\n      }\n    }\n\n    function Na() {\n      return y || \"function\" !== typeof fetch ? new Promise(function (a) {\n        a(Ma());\n      }) : fetch(I, {\n        credentials: \"same-origin\"\n      }).then(function (a) {\n        if (!a.ok) throw \"failed to load wasm binary file at '\" + I + \"'\";\n        return a.arrayBuffer();\n      })[\"catch\"](function () {\n        return Ma();\n      });\n    }\n\n    var Pa = {\n      5793: function _() {\n        alert(\"Uploads are not supported.\");\n      },\n      7093: function _() {\n        alert(\"Invalid http method.\");\n      },\n      7313: function _(a, b, d, e, f, g, k, h, l, p, u) {\n        return Oa(a, b, d, e, f, g, k, h, l, p, u);\n      }\n    },\n        Qa = [];\n    Da.push({\n      Ob: function Ob() {\n        Ra();\n      }\n    });\n\n    function Sa(a, b) {\n      Fa.unshift({\n        Ob: a,\n        Lb: b\n      });\n    }\n\n    var Ta = [null, [], []];\n\n    function Ua(a, b) {\n      var d = Ta[a];\n      0 === b || 10 === b ? ((1 === a ? ca : w)(ra(d, 0)), d.length = 0) : d.push(b);\n    }\n\n    var J = 0;\n\n    function Va() {\n      J += 4;\n      return F[J - 4 >> 2];\n    }\n\n    var Wa = {},\n        Xa = {};\n\n    function Ya(a) {\n      for (; a.length;) {\n        var b = a.pop();\n        a.pop()(b);\n      }\n    }\n\n    function Za(a) {\n      return this.fromWireType(G[a >> 2]);\n    }\n\n    var K = {},\n        L = {},\n        $a = {};\n\n    function ab(a) {\n      if (void 0 === a) return \"_unknown\";\n      a = a.replace(/[^a-zA-Z0-9_]/g, \"$\");\n      var b = a.charCodeAt(0);\n      return 48 <= b && 57 >= b ? \"_\" + a : a;\n    }\n\n    function bb(a, b) {\n      a = ab(a);\n      return new Function(\"body\", \"return function \" + a + '() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n')(b);\n    }\n\n    function cb(a) {\n      var b = Error,\n          d = bb(a, function (b) {\n        this.name = a;\n        this.message = b;\n        b = Error(b).stack;\n        void 0 !== b && (this.stack = this.toString() + \"\\n\" + b.replace(/^Error(:[^\\n]*)?\\n/, \"\"));\n      });\n      d.prototype = Object.create(b.prototype);\n      d.prototype.constructor = d;\n\n      d.prototype.toString = function () {\n        return void 0 === this.message ? this.name : this.name + \": \" + this.message;\n      };\n\n      return d;\n    }\n\n    var db = void 0;\n\n    function eb(a, b, d) {\n      function e(b) {\n        b = d(b);\n        if (b.length !== a.length) throw new db(\"Mismatched type converter count\");\n\n        for (var e = 0; e < a.length; ++e) {\n          M(a[e], b[e]);\n        }\n      }\n\n      a.forEach(function (a) {\n        $a[a] = b;\n      });\n      var f = Array(b.length),\n          g = [],\n          k = 0;\n      b.forEach(function (a, b) {\n        L.hasOwnProperty(a) ? f[b] = L[a] : (g.push(a), K.hasOwnProperty(a) || (K[a] = []), K[a].push(function () {\n          f[b] = L[a];\n          ++k;\n          k === g.length && e(f);\n        }));\n      });\n      0 === g.length && e(f);\n    }\n\n    function fb(a) {\n      switch (a) {\n        case 1:\n          return 0;\n\n        case 2:\n          return 1;\n\n        case 4:\n          return 2;\n\n        case 8:\n          return 3;\n\n        default:\n          throw new TypeError(\"Unknown type size: \" + a);\n      }\n    }\n\n    var gb = void 0;\n\n    function N(a) {\n      for (var b = \"\"; _E[a];) {\n        b += gb[_E[a++]];\n      }\n\n      return b;\n    }\n\n    var hb = void 0;\n\n    function P(a) {\n      throw new hb(a);\n    }\n\n    function M(a, b, d) {\n      d = d || {};\n      if (!(\"argPackAdvance\" in b)) throw new TypeError(\"registerType registeredInstance requires argPackAdvance\");\n      var e = b.name;\n      a || P('type \"' + e + '\" must have a positive integer typeid pointer');\n\n      if (L.hasOwnProperty(a)) {\n        if (d.Yb) return;\n        P(\"Cannot register type '\" + e + \"' twice\");\n      }\n\n      L[a] = b;\n      delete $a[a];\n      K.hasOwnProperty(a) && (b = K[a], delete K[a], b.forEach(function (a) {\n        a();\n      }));\n    }\n\n    var ib = [],\n        Q = [{}, {\n      value: void 0\n    }, {\n      value: null\n    }, {\n      value: !0\n    }, {\n      value: !1\n    }];\n\n    function jb(a) {\n      4 < a && 0 === --Q[a].Pb && (Q[a] = void 0, ib.push(a));\n    }\n\n    function R(a) {\n      switch (a) {\n        case void 0:\n          return 1;\n\n        case null:\n          return 2;\n\n        case !0:\n          return 3;\n\n        case !1:\n          return 4;\n\n        default:\n          var b = ib.length ? ib.pop() : Q.length;\n          Q[b] = {\n            Pb: 1,\n            value: a\n          };\n          return b;\n      }\n    }\n\n    function kb(a) {\n      if (null === a) return \"null\";\n\n      var b = _typeof(a);\n\n      return \"object\" === b || \"array\" === b || \"function\" === b ? a.toString() : \"\" + a;\n    }\n\n    function lb(a, b) {\n      switch (b) {\n        case 2:\n          return function (a) {\n            return this.fromWireType(wa[a >> 2]);\n          };\n\n        case 3:\n          return function (a) {\n            return this.fromWireType(xa[a >> 3]);\n          };\n\n        default:\n          throw new TypeError(\"Unknown float type: \" + a);\n      }\n    }\n\n    function mb(a) {\n      var b = Function;\n      if (!(b instanceof Function)) throw new TypeError(\"new_ called with constructor type \" + _typeof(b) + \" which is not a function\");\n      var d = bb(b.name || \"unknownFunctionName\", function () {});\n      d.prototype = b.prototype;\n      d = new d();\n      a = b.apply(d, a);\n      return a instanceof Object ? a : d;\n    }\n\n    function nb(a, b) {\n      var d = c;\n\n      if (void 0 === d[a].Jb) {\n        var e = d[a];\n\n        d[a] = function () {\n          d[a].Jb.hasOwnProperty(arguments.length) || P(\"Function '\" + b + \"' called with an invalid number of arguments (\" + arguments.length + \") - expects one of (\" + d[a].Jb + \")!\");\n          return d[a].Jb[arguments.length].apply(this, arguments);\n        };\n\n        d[a].Jb = [];\n        d[a].Jb[e.Sb] = e;\n      }\n    }\n\n    function ob(a, b, d) {\n      c.hasOwnProperty(a) ? ((void 0 === d || void 0 !== c[a].Jb && void 0 !== c[a].Jb[d]) && P(\"Cannot register public name '\" + a + \"' twice\"), nb(a, a), c.hasOwnProperty(d) && P(\"Cannot register multiple overloads of a function with the same number of arguments (\" + d + \")!\"), c[a].Jb[d] = b) : (c[a] = b, void 0 !== d && (c[a].rc = d));\n    }\n\n    function pb(a, b) {\n      for (var d = [], e = 0; e < a; e++) {\n        d.push(F[(b >> 2) + e]);\n      }\n\n      return d;\n    }\n\n    function qb(a, b) {\n      a = N(a);\n      if (void 0 !== c[\"FUNCTION_TABLE_\" + a]) var d = c[\"FUNCTION_TABLE_\" + a][b];else if (\"undefined\" !== typeof FUNCTION_TABLE) d = FUNCTION_TABLE[b];else {\n        d = c[\"dynCall_\" + a];\n        void 0 === d && (d = c[\"dynCall_\" + a.replace(/f/g, \"d\")], void 0 === d && P(\"No dynCall invoker for signature: \" + a));\n\n        for (var e = [], f = 1; f < a.length; ++f) {\n          e.push(\"a\" + f);\n        }\n\n        f = \"return function \" + (\"dynCall_\" + a + \"_\" + b) + \"(\" + e.join(\", \") + \") {\\n\";\n        f += \"    return dynCall(rawFunction\" + (e.length ? \", \" : \"\") + e.join(\", \") + \");\\n\";\n        d = new Function(\"dynCall\", \"rawFunction\", f + \"};\\n\")(d, b);\n      }\n      \"function\" !== typeof d && P(\"unknown function pointer with signature \" + a + \": \" + b);\n      return d;\n    }\n\n    var rb = void 0;\n\n    function sb(a) {\n      a = tb(a);\n      var b = N(a);\n      S(a);\n      return b;\n    }\n\n    function ub(a, b) {\n      function d(a) {\n        f[a] || L[a] || ($a[a] ? $a[a].forEach(d) : (e.push(a), f[a] = !0));\n      }\n\n      var e = [],\n          f = {};\n      b.forEach(d);\n      throw new rb(a + \": \" + e.map(sb).join([\", \"]));\n    }\n\n    function vb(a, b, d) {\n      switch (b) {\n        case 0:\n          return d ? function (a) {\n            return C[a];\n          } : function (a) {\n            return _E[a];\n          };\n\n        case 1:\n          return d ? function (a) {\n            return ua[a >> 1];\n          } : function (a) {\n            return va[a >> 1];\n          };\n\n        case 2:\n          return d ? function (a) {\n            return F[a >> 2];\n          } : function (a) {\n            return G[a >> 2];\n          };\n\n        default:\n          throw new TypeError(\"Unknown integer type: \" + a);\n      }\n    }\n\n    function T(a) {\n      a || P(\"Cannot use deleted val. handle = \" + a);\n      return Q[a].value;\n    }\n\n    function wb(a, b) {\n      var d = L[a];\n      void 0 === d && P(b + \" has unknown type \" + sb(a));\n      return d;\n    }\n\n    var xb = {};\n\n    function yb(a) {\n      var b = xb[a];\n      return void 0 === b ? N(a) : b;\n    }\n\n    var zb = [];\n\n    function Ab(a) {\n      var b = zb.length;\n      zb.push(a);\n      return b;\n    }\n\n    function Bb(a, b) {\n      for (var d = Array(a), e = 0; e < a; ++e) {\n        d[e] = wb(F[(b >> 2) + e], \"parameter \" + e);\n      }\n\n      return d;\n    }\n\n    function Cb(a, b) {\n      Db = a;\n      Eb = b;\n      if (Fb) if (0 == a) U = function U() {\n        var a = Math.max(0, Gb + b - V()) | 0;\n        setTimeout(_Hb, a);\n      }, Ib = \"timeout\";else if (1 == a) U = function U() {\n        Jb(_Hb);\n      }, Ib = \"rAF\";else if (2 == a) {\n        if (\"undefined\" === typeof setImmediate) {\n          var d = [];\n          addEventListener(\"message\", function (a) {\n            if (\"setimmediate\" === a.data || \"setimmediate\" === a.data.target) a.stopPropagation(), d.shift()();\n          }, !0);\n\n          setImmediate = function setImmediate(a) {\n            d.push(a);\n            postMessage(\"setimmediate\", \"*\");\n          };\n        }\n\n        U = function U() {\n          setImmediate(_Hb);\n        };\n\n        Ib = \"immediate\";\n      }\n    }\n\n    function V() {\n      B();\n    }\n\n    function Kb(a) {\n      var b = Lb;\n      ha = !0;\n      ja(!Fb, \"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters.\");\n      Fb = a;\n      Lb = b;\n      var d = \"undefined\" !== typeof b ? function () {\n        c.dynCall_vi(a, b);\n      } : function () {\n        c.dynCall_v(a);\n      };\n      var e = W;\n\n      _Hb = function Hb() {\n        if (!A) if (0 < Mb.length) {\n          var a = Date.now(),\n              b = Mb.shift();\n          b.Ob(b.Lb);\n\n          if (false) {\n            var k;\n          }\n\n          console.log('main loop blocker \"' + b.name + '\" took ' + (Date.now() - a) + \" ms\");\n          c.setStatus && (a = c.statusMessage || \"Please wait...\", b = Nb, k = Ob.lc, b ? b < k ? c.setStatus(a + \" (\" + (k - b) + \"/\" + k + \")\") : c.setStatus(a) : c.setStatus(\"\"));\n          e < W || setTimeout(_Hb, 0);\n        } else if (!(e < W)) if (Pb = Pb + 1 | 0, 1 == Db && 1 < Eb && 0 != Pb % Eb) U();else {\n          0 == Db && (Gb = V());\n          \"timeout\" === Ib && c.Mb && (w(\"Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!\"), Ib = \"\");\n\n          a: if (!(A || c.preMainLoop && !1 === c.preMainLoop())) {\n            try {\n              d();\n            } catch (l) {\n              if (l instanceof Qb) break a;\n              l && \"object\" === _typeof(l) && l.stack && w(\"exception thrown: \" + [l, l.stack]);\n              throw l;\n            }\n\n            c.postMainLoop && c.postMainLoop();\n          }\n\n          e < W || (\"object\" === (typeof SDL === \"undefined\" ? \"undefined\" : _typeof(SDL)) && SDL.audio && SDL.audio.$b && SDL.audio.$b(), U());\n        }\n      };\n    }\n\n    var U = null,\n        Ib = \"\",\n        W = 0,\n        Fb = null,\n        Lb = 0,\n        Db = 0,\n        Eb = 0,\n        Pb = 0,\n        Mb = [],\n        Ob = {},\n        Gb,\n        _Hb,\n        Nb,\n        Rb = !1,\n        Sb = !1,\n        Tb = [];\n\n    function Vb() {\n      function a() {\n        Sb = document.pointerLockElement === c.canvas || document.mozPointerLockElement === c.canvas || document.webkitPointerLockElement === c.canvas || document.msPointerLockElement === c.canvas;\n      }\n\n      c.preloadPlugins || (c.preloadPlugins = []);\n\n      if (!Wb) {\n        Wb = !0;\n\n        try {\n          Xb = !0;\n        } catch (d) {\n          Xb = !1, console.log(\"warning: no blob constructor, cannot create blobs with mimetypes\");\n        }\n\n        Yb = \"undefined\" != typeof MozBlobBuilder ? MozBlobBuilder : \"undefined\" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : Xb ? null : console.log(\"warning: no BlobBuilder\");\n        Zb = \"undefined\" != typeof window ? window.URL ? window.URL : window.webkitURL : void 0;\n        c.Rb || \"undefined\" !== typeof Zb || (console.log(\"warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available.\"), c.Rb = !0);\n        c.preloadPlugins.push({\n          canHandle: function canHandle(a) {\n            return !c.Rb && /\\.(jpg|jpeg|png|bmp)$/i.test(a);\n          },\n          handle: function handle(a, b, f, g) {\n            var d = null;\n            if (Xb) try {\n              d = new Blob([a], {\n                type: $b(b)\n              }), d.size !== a.length && (d = new Blob([new Uint8Array(a).buffer], {\n                type: $b(b)\n              }));\n            } catch (p) {\n              ea(\"Blob constructor present but fails: \" + p + \"; falling back to blob builder\");\n            }\n            d || (d = new Yb(), d.append(new Uint8Array(a).buffer), d = d.getBlob());\n            var e = Zb.createObjectURL(d),\n                l = new Image();\n\n            l.onload = function () {\n              ja(l.complete, \"Image \" + b + \" could not be decoded\");\n              var d = document.createElement(\"canvas\");\n              d.width = l.width;\n              d.height = l.height;\n              d.getContext(\"2d\").drawImage(l, 0, 0);\n              c.preloadedImages[b] = d;\n              Zb.revokeObjectURL(e);\n              f && f(a);\n            };\n\n            l.onerror = function () {\n              console.log(\"Image \" + e + \" could not be decoded\");\n              g && g();\n            };\n\n            l.src = e;\n          }\n        });\n        c.preloadPlugins.push({\n          canHandle: function canHandle(a) {\n            return !c.qc && a.substr(-4) in {\n              \".ogg\": 1,\n              \".wav\": 1,\n              \".mp3\": 1\n            };\n          },\n          handle: function handle(a, b, f, g) {\n            function d(d) {\n              l || (l = !0, c.preloadedAudios[b] = d, f && f(a));\n            }\n\n            function e() {\n              l || (l = !0, c.preloadedAudios[b] = new Audio(), g && g());\n            }\n\n            var l = !1;\n\n            if (Xb) {\n              try {\n                var p = new Blob([a], {\n                  type: $b(b)\n                });\n              } catch (q) {\n                return e();\n              }\n\n              p = Zb.createObjectURL(p);\n              var u = new Audio();\n              u.addEventListener(\"canplaythrough\", function () {\n                d(u);\n              }, !1);\n\n              u.onerror = function () {\n                if (!l) {\n                  console.log(\"warning: browser could not fully decode audio \" + b + \", trying slower base64 approach\");\n\n                  for (var e = \"\", f = 0, g = 0, h = 0; h < a.length; h++) {\n                    for (f = f << 8 | a[h], g += 8; 6 <= g;) {\n                      var k = f >> g - 6 & 63;\n                      g -= 6;\n                      e += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[k];\n                    }\n                  }\n\n                  2 == g ? (e += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(f & 3) << 4], e += \"==\") : 4 == g && (e += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(f & 15) << 2], e += \"=\");\n                  u.src = \"data:audio/x-\" + b.substr(-3) + \";base64,\" + e;\n                  d(u);\n                }\n              };\n\n              u.src = p;\n              ac(function () {\n                d(u);\n              });\n            } else return e();\n          }\n        });\n        var b = c.canvas;\n        b && (b.requestPointerLock = b.requestPointerLock || b.mozRequestPointerLock || b.webkitRequestPointerLock || b.msRequestPointerLock || function () {}, b.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock || document.msExitPointerLock || function () {}, b.exitPointerLock = b.exitPointerLock.bind(document), document.addEventListener(\"pointerlockchange\", a, !1), document.addEventListener(\"mozpointerlockchange\", a, !1), document.addEventListener(\"webkitpointerlockchange\", a, !1), document.addEventListener(\"mspointerlockchange\", a, !1), c.elementPointerLock && b.addEventListener(\"click\", function (a) {\n          !Sb && c.canvas.requestPointerLock && (c.canvas.requestPointerLock(), a.preventDefault());\n        }, !1));\n      }\n    }\n\n    function bc(a, b, d, e) {\n      if (b && c.Mb && a == c.canvas) return c.Mb;\n      var f;\n\n      if (b) {\n        var g = {\n          antialias: !1,\n          alpha: !1,\n          oc: 1\n        };\n        if (e) for (var k in e) {\n          g[k] = e[k];\n        }\n        if (\"undefined\" !== typeof GL && (f = GL.ic(a, g))) var h = GL.getContext(f).gc;\n      } else h = a.getContext(\"2d\");\n\n      if (!h) return null;\n      d && (b || ja(\"undefined\" === typeof GLctx, \"cannot set in module if GLctx is used, but we are a non-GL context that would replace it\"), c.Mb = h, b && GL.pc(f), c.sc = b, Tb.forEach(function (a) {\n        a();\n      }), Vb());\n      return h;\n    }\n\n    var cc = !1,\n        dc = void 0,\n        Y = void 0;\n\n    function ec(a, b, d) {\n      function e() {\n        Rb = !1;\n        var a = f.parentNode;\n        (document.fullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement || document.webkitCurrentFullScreenElement) === a ? (f.exitFullscreen = fc, dc && f.requestPointerLock(), Rb = !0, Y ? (\"undefined\" != typeof SDL && (F[SDL.screen >> 2] = G[SDL.screen >> 2] | 8388608), gc(c.canvas), hc()) : gc(f)) : (a.parentNode.insertBefore(f, a), a.parentNode.removeChild(a), Y ? (\"undefined\" != typeof SDL && (F[SDL.screen >> 2] = G[SDL.screen >> 2] & -8388609), gc(c.canvas), hc()) : gc(f));\n        if (c.onFullScreen) c.onFullScreen(Rb);\n        if (c.onFullscreen) c.onFullscreen(Rb);\n      }\n\n      dc = a;\n      Y = b;\n      \"undefined\" === typeof dc && (dc = !0);\n      \"undefined\" === typeof Y && (Y = !1);\n      var f = c.canvas;\n      cc || (cc = !0, document.addEventListener(\"fullscreenchange\", e, !1), document.addEventListener(\"mozfullscreenchange\", e, !1), document.addEventListener(\"webkitfullscreenchange\", e, !1), document.addEventListener(\"MSFullscreenChange\", e, !1));\n      var g = document.createElement(\"div\");\n      f.parentNode.insertBefore(g, f);\n      g.appendChild(f);\n      g.requestFullscreen = g.requestFullscreen || g.mozRequestFullScreen || g.msRequestFullscreen || (g.webkitRequestFullscreen ? function () {\n        g.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      } : null) || (g.webkitRequestFullScreen ? function () {\n        g.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);\n      } : null);\n      d ? g.requestFullscreen({\n        tc: d\n      }) : g.requestFullscreen();\n    }\n\n    function jc(a, b, d) {\n      w(\"Browser.requestFullScreen() is deprecated. Please call Browser.requestFullscreen instead.\");\n\n      jc = function jc(a, b, d) {\n        ec(a, b, d);\n      };\n\n      ec(a, b, d);\n    }\n\n    function fc() {\n      if (!Rb) return !1;\n      (document.exitFullscreen || document.cancelFullScreen || document.mozCancelFullScreen || document.msExitFullscreen || document.webkitCancelFullScreen || function () {}).apply(document, []);\n      return !0;\n    }\n\n    var kc = 0;\n\n    function Jb(a) {\n      if (\"function\" === typeof requestAnimationFrame) requestAnimationFrame(a);else {\n        var b = Date.now();\n        if (0 === kc) kc = b + 1E3 / 60;else for (; b + 2 >= kc;) {\n          kc += 1E3 / 60;\n        }\n        setTimeout(a, Math.max(kc - b, 0));\n      }\n    }\n\n    function ac(a) {\n      ha = !0;\n      setTimeout(function () {\n        A || a();\n      }, 1E4);\n    }\n\n    function $b(a) {\n      return {\n        jpg: \"image/jpeg\",\n        jpeg: \"image/jpeg\",\n        png: \"image/png\",\n        bmp: \"image/bmp\",\n        ogg: \"audio/ogg\",\n        wav: \"audio/wav\",\n        mp3: \"audio/mpeg\"\n      }[a.substr(a.lastIndexOf(\".\") + 1)];\n    }\n\n    var lc = [];\n\n    function hc() {\n      var a = c.canvas;\n      lc.forEach(function (b) {\n        b(a.width, a.height);\n      });\n    }\n\n    function gc(a, b, d) {\n      b && d ? (a.fc = b, a.Xb = d) : (b = a.fc, d = a.Xb);\n      var e = b,\n          f = d;\n      c.forcedAspectRatio && 0 < c.forcedAspectRatio && (e / f < c.forcedAspectRatio ? e = Math.round(f * c.forcedAspectRatio) : f = Math.round(e / c.forcedAspectRatio));\n\n      if ((document.fullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement || document.webkitCurrentFullScreenElement) === a.parentNode && \"undefined\" != typeof screen) {\n        var g = Math.min(screen.width / e, screen.height / f);\n        e = Math.round(e * g);\n        f = Math.round(f * g);\n      }\n\n      Y ? (a.width != e && (a.width = e), a.height != f && (a.height = f), \"undefined\" != typeof a.style && (a.style.removeProperty(\"width\"), a.style.removeProperty(\"height\"))) : (a.width != b && (a.width = b), a.height != d && (a.height = d), \"undefined\" != typeof a.style && (e != b || f != d ? (a.style.setProperty(\"width\", e + \"px\", \"important\"), a.style.setProperty(\"height\", f + \"px\", \"important\")) : (a.style.removeProperty(\"width\"), a.style.removeProperty(\"height\"))));\n    }\n\n    var Z = {},\n        mc = 0;\n\n    function nc() {\n      var a = mc;\n      mc++;\n      return a;\n    }\n\n    var Wb, Xb, Yb, Zb;\n\n    function oc() {\n      if (\"undefined\" !== typeof indexedDB) return indexedDB;\n      var a = null;\n      \"object\" === (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) && (a = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB);\n      ja(a, \"IDBStore used, but indexedDB not supported\");\n      return a;\n    }\n\n    var pc = {};\n\n    function qc(a, b) {\n      var d = pc[a];\n      if (d) b(null, d);else {\n        try {\n          var e = oc().open(a, 22);\n        } catch (f) {\n          b(f);\n          return;\n        }\n\n        e.onupgradeneeded = function (a) {\n          var b = a.target.result;\n          a = a.target.transaction;\n          b.objectStoreNames.contains(\"FILE_DATA\") ? a.objectStore(\"FILE_DATA\") : b.createObjectStore(\"FILE_DATA\");\n        };\n\n        e.onsuccess = function () {\n          d = e.result;\n          pc[a] = d;\n          b(null, d);\n        };\n\n        e.onerror = function (a) {\n          b(this.error);\n          a.preventDefault();\n        };\n      }\n    }\n\n    function rc(a, b, d) {\n      qc(a, function (a, f) {\n        if (a) return d(a);\n        a = f.transaction([\"FILE_DATA\"], b);\n\n        a.onerror = function (a) {\n          d(this.error || \"unknown error\");\n          a.preventDefault();\n        };\n\n        a = a.objectStore(\"FILE_DATA\");\n        d(null, a);\n      });\n    }\n\n    function sc(a, b, d) {\n      rc(a, \"readonly\", function (a, f) {\n        if (a) return d(a);\n        a = f.get(b);\n\n        a.onsuccess = function (a) {\n          return (a = a.target.result) ? d(null, a) : d(\"file \" + b + \" not found\");\n        };\n\n        a.onerror = function (a) {\n          d(a);\n        };\n      });\n    }\n\n    function tc(a, b, d, e) {\n      rc(a, \"readwrite\", function (a, g) {\n        if (a) return e(a);\n        a = g.put(d, b);\n\n        a.onsuccess = function () {\n          e();\n        };\n\n        a.onerror = function (a) {\n          e(a);\n        };\n      });\n    }\n\n    var uc = {};\n\n    function vc() {\n      if (!wc) {\n        var a = {\n          USER: \"web_user\",\n          LOGNAME: \"web_user\",\n          PATH: \"/\",\n          PWD: \"/\",\n          HOME: \"/home/web_user\",\n          LANG: (\"object\" === (typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) && navigator.languages && navigator.languages[0] || \"C\").replace(\"-\", \"_\") + \".UTF-8\",\n          _: aa\n        },\n            b;\n\n        for (b in uc) {\n          a[b] = uc[b];\n        }\n\n        var d = [];\n\n        for (b in a) {\n          d.push(b + \"=\" + a[b]);\n        }\n\n        wc = d;\n      }\n\n      return wc;\n    }\n\n    var wc;\n\n    function xc(a) {\n      if (!ha && (A = !0, Ba(Fa), c.onExit)) c.onExit(a);\n      ba(a, new Qb(a));\n    }\n\n    c._exit = xc;\n    na(\"GMT\", 26736, 4);\n    db = c.InternalError = cb(\"InternalError\");\n\n    for (var yc = Array(256), zc = 0; 256 > zc; ++zc) {\n      yc[zc] = String.fromCharCode(zc);\n    }\n\n    gb = yc;\n    hb = c.BindingError = cb(\"BindingError\");\n\n    c.count_emval_handles = function () {\n      for (var a = 0, b = 5; b < Q.length; ++b) {\n        void 0 !== Q[b] && ++a;\n      }\n\n      return a;\n    };\n\n    c.get_first_emval = function () {\n      for (var a = 5; a < Q.length; ++a) {\n        if (void 0 !== Q[a]) return Q[a];\n      }\n\n      return null;\n    };\n\n    rb = c.UnboundTypeError = cb(\"UnboundTypeError\");\n\n    c.requestFullScreen = function (a, b, d) {\n      w(\"Module.requestFullScreen is deprecated. Please call Module.requestFullscreen instead.\");\n      c.requestFullScreen = c.requestFullscreen;\n      jc(a, b, d);\n    };\n\n    c.requestFullscreen = function (a, b, d) {\n      ec(a, b, d);\n    };\n\n    c.requestAnimationFrame = function (a) {\n      Jb(a);\n    };\n\n    c.setCanvasSize = function (a, b, d) {\n      gc(c.canvas, a, b);\n      d || hc();\n    };\n\n    c.pauseMainLoop = function () {\n      U = null;\n      W++;\n    };\n\n    c.resumeMainLoop = function () {\n      W++;\n      var a = Db,\n          b = Eb,\n          d = Fb;\n      Fb = null;\n      Kb(d);\n      Cb(a, b);\n      U();\n    };\n\n    c.getUserMedia = function () {\n      window.getUserMedia || (window.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia);\n      window.getUserMedia(void 0);\n    };\n\n    c.createContext = function (a, b, d, e) {\n      return bc(a, b, d, e);\n    };\n\n    \"undefined\" !== typeof dateNow ? V = dateNow : \"object\" === (typeof performance === \"undefined\" ? \"undefined\" : _typeof(performance)) && performance && \"function\" === typeof performance.now ? V = function V() {\n      return performance.now();\n    } : V = Date.now;\n    Fa.push(function () {\n      var a = c._fflush;\n      a && a(0);\n      Ta[1].length && Ua(1, 10);\n      Ta[2].length && Ua(2, 10);\n    });\n\n    var Dc = {\n      W: function W() {\n        w(\"missing function: _ZN5Umbra13MiniSceneCopy7connectERK20UmbraSceneCopySource\");\n        B(-1);\n      },\n      V: function V() {\n        w(\"missing function: _ZN5Umbra13MiniSceneCopy9getStatusEPf\");\n        B(-1);\n      },\n      X: function X() {\n        w(\"missing function: _ZN5Umbra13MiniSceneCopyC1ERNS_11MiniRuntimeERK25UmbraSceneCopyDestinationPK20UmbraEnvironmentInfoRKN5Eigen6MatrixIfLi3ELi1ELi0ELi3ELi1EEEfi\");\n        B(-1);\n      },\n      C: function C() {\n        return Sa.apply(null, arguments);\n      },\n      N: function N() {},\n      R: function R(a, b) {\n        J = b;\n\n        try {\n          var d = D(Va()),\n              e = Va();\n          return Wa.kc((void 0).stat, d, e);\n        } catch (f) {\n          return B(f), -f.Nb;\n        }\n      },\n      w: function w(a, b) {\n        J = b;\n        return 0;\n      },\n      Q: function Q(a, b) {\n        J = b;\n\n        try {\n          var d = D(Va()),\n              e = Va(),\n              f = Va();\n          return (void 0).open(d, e, f).mc;\n        } catch (g) {\n          return B(g), -g.Nb;\n        }\n      },\n      P: function P(a, b) {\n        J = b;\n        return 0;\n      },\n      s: function s() {},\n      A: function A(a) {\n        var b = Xa[a];\n        delete Xa[a];\n        var d = b.ac,\n            e = b.bc,\n            f = b.Qb,\n            g = f.map(function (a) {\n          return a.Wb;\n        }).concat(f.map(function (a) {\n          return a.dc;\n        }));\n        eb([a], g, function (a) {\n          var g = {};\n          f.forEach(function (b, d) {\n            var e = a[d],\n                h = b.Ub,\n                k = b.Vb,\n                l = a[d + f.length],\n                p = b.cc,\n                za = b.ec;\n            g[b.Tb] = {\n              read: function read(a) {\n                return e.fromWireType(h(k, a));\n              },\n              write: function write(a, b) {\n                var d = [];\n                p(za, a, l.toWireType(d, b));\n                Ya(d);\n              }\n            };\n          });\n          return [{\n            name: b.name,\n            fromWireType: function fromWireType(a) {\n              var b = {},\n                  d;\n\n              for (d in g) {\n                b[d] = g[d].read(a);\n              }\n\n              e(a);\n              return b;\n            },\n            toWireType: function toWireType(a, b) {\n              for (var f in g) {\n                if (!(f in b)) throw new TypeError(\"Missing field\");\n              }\n\n              var h = d();\n\n              for (f in g) {\n                g[f].write(h, b[f]);\n              }\n\n              null !== a && a.push(e, h);\n              return h;\n            },\n            argPackAdvance: 8,\n            readValueFromPointer: Za,\n            Kb: e\n          }];\n        });\n      },\n      I: function I(a, b, d, e, f) {\n        var g = fb(d);\n        b = N(b);\n        M(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            return !!a;\n          },\n          toWireType: function toWireType(a, b) {\n            return b ? e : f;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: function readValueFromPointer(a) {\n            if (1 === d) var e = C;else if (2 === d) e = ua;else if (4 === d) e = F;else throw new TypeError(\"Unknown boolean type size: \" + b);\n            return this.fromWireType(e[a >> g]);\n          },\n          Kb: null\n        });\n      },\n      k: function k(a, b, d) {\n        a = N(a);\n        eb([], [b], function (b) {\n          b = b[0];\n          c[a] = b.fromWireType(d);\n          return [];\n        });\n      },\n      G: function G(a, b) {\n        b = N(b);\n        M(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            var b = Q[a].value;\n            jb(a);\n            return b;\n          },\n          toWireType: function toWireType(a, b) {\n            return R(b);\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Za,\n          Kb: null\n        });\n      },\n      u: function u(a, b, d) {\n        d = fb(d);\n        b = N(b);\n        M(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            return a;\n          },\n          toWireType: function toWireType(a, b) {\n            if (\"number\" !== typeof b && \"boolean\" !== typeof b) throw new TypeError('Cannot convert \"' + kb(b) + '\" to ' + this.name);\n            return b;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: lb(b, d),\n          Kb: null\n        });\n      },\n      e: function e(a, b, d, _e, f, g) {\n        var k = pb(b, d);\n        a = N(a);\n        f = qb(_e, f);\n        ob(a, function () {\n          ub(\"Cannot call \" + a + \" due to unbound types\", k);\n        }, b - 1);\n        eb([], k, function (d) {\n          var e = a,\n              h = a;\n          d = [d[0], null].concat(d.slice(1));\n          var k = f,\n              q = d.length;\n          2 > q && P(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");\n\n          for (var t = null !== d[1] && !1, x = !1, m = 1; m < d.length; ++m) {\n            if (null !== d[m] && void 0 === d[m].Kb) {\n              x = !0;\n              break;\n            }\n          }\n\n          var za = \"void\" !== d[0].name,\n              O = \"\",\n              X = \"\";\n\n          for (m = 0; m < q - 2; ++m) {\n            O += (0 !== m ? \", \" : \"\") + \"arg\" + m, X += (0 !== m ? \", \" : \"\") + \"arg\" + m + \"Wired\";\n          }\n\n          h = \"return function \" + ab(h) + \"(\" + O + \") {\\nif (arguments.length !== \" + (q - 2) + \") {\\nthrowBindingError('function \" + h + \" called with ' + arguments.length + ' arguments, expected \" + (q - 2) + \" args!');\\n}\\n\";\n          x && (h += \"var destructors = [];\\n\");\n          var Ub = x ? \"destructors\" : \"null\";\n          O = \"throwBindingError invoker fn runDestructors retType classParam\".split(\" \");\n          k = [P, k, g, Ya, d[0], d[1]];\n          t && (h += \"var thisWired = classParam.toWireType(\" + Ub + \", this);\\n\");\n\n          for (m = 0; m < q - 2; ++m) {\n            h += \"var arg\" + m + \"Wired = argType\" + m + \".toWireType(\" + Ub + \", arg\" + m + \"); // \" + d[m + 2].name + \"\\n\", O.push(\"argType\" + m), k.push(d[m + 2]);\n          }\n\n          t && (X = \"thisWired\" + (0 < X.length ? \", \" : \"\") + X);\n          h += (za ? \"var rv = \" : \"\") + \"invoker(fn\" + (0 < X.length ? \", \" : \"\") + X + \");\\n\";\n          if (x) h += \"runDestructors(destructors);\\n\";else for (m = t ? 1 : 2; m < d.length; ++m) {\n            q = 1 === m ? \"thisWired\" : \"arg\" + (m - 2) + \"Wired\", null !== d[m].Kb && (h += q + \"_dtor(\" + q + \"); // \" + d[m].name + \"\\n\", O.push(q + \"_dtor\"), k.push(d[m].Kb));\n          }\n          za && (h += \"var ret = retType.fromWireType(rv);\\nreturn ret;\\n\");\n          O.push(h + \"}\\n\");\n          d = mb(O).apply(null, k);\n          m = b - 1;\n          if (!c.hasOwnProperty(e)) throw new db(\"Replacing nonexistant public symbol\");\n          void 0 !== c[e].Jb && void 0 !== m ? c[e].Jb[m] = d : (c[e] = d, c[e].Sb = m);\n          return [];\n        });\n      },\n      o: function o(a, b, d, e, f) {\n        function g(a) {\n          return a;\n        }\n\n        b = N(b);\n        -1 === f && (f = 4294967295);\n        var k = fb(d);\n\n        if (0 === e) {\n          var h = 32 - 8 * d;\n\n          g = function g(a) {\n            return a << h >>> h;\n          };\n        }\n\n        var l = -1 != b.indexOf(\"unsigned\");\n        M(a, {\n          name: b,\n          fromWireType: g,\n          toWireType: function toWireType(a, d) {\n            if (\"number\" !== typeof d && \"boolean\" !== typeof d) throw new TypeError('Cannot convert \"' + kb(d) + '\" to ' + this.name);\n            if (d < e || d > f) throw new TypeError('Passing a number \"' + kb(d) + '\" from JS side to C/C++ side to an argument of type \"' + b + '\", which is outside the valid range [' + e + \", \" + f + \"]!\");\n            return l ? d >>> 0 : d | 0;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: vb(b, k, 0 !== e),\n          Kb: null\n        });\n      },\n      m: function m(a, b, d) {\n        function e(a) {\n          a >>= 2;\n          var b = G;\n          return new f(b.buffer, b[a + 1], b[a]);\n        }\n\n        var f = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array][b];\n        d = N(d);\n        M(a, {\n          name: d,\n          fromWireType: e,\n          argPackAdvance: 8,\n          readValueFromPointer: e\n        }, {\n          Yb: !0\n        });\n      },\n      v: function v(a, b) {\n        b = N(b);\n        var d = \"std::string\" === b;\n        M(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            var b = G[a >> 2];\n\n            if (d) {\n              var e = _E[a + 4 + b],\n                  k = 0;\n              0 != e && (k = e, _E[a + 4 + b] = 0);\n              var h = a + 4;\n\n              for (e = 0; e <= b; ++e) {\n                var l = a + 4 + e;\n\n                if (0 == _E[l]) {\n                  h = D(h);\n                  if (void 0 === p) var p = h;else p += String.fromCharCode(0), p += h;\n                  h = l + 1;\n                }\n              }\n\n              0 != k && (_E[a + 4 + b] = k);\n            } else {\n              p = Array(b);\n\n              for (e = 0; e < b; ++e) {\n                p[e] = String.fromCharCode(_E[a + 4 + e]);\n              }\n\n              p = p.join(\"\");\n            }\n\n            S(a);\n            return p;\n          },\n          toWireType: function toWireType(a, b) {\n            b instanceof ArrayBuffer && (b = new Uint8Array(b));\n            var e = \"string\" === typeof b;\n            e || b instanceof Uint8Array || b instanceof Uint8ClampedArray || b instanceof Int8Array || P(\"Cannot pass non-string to std::string\");\n            var f = (d && e ? function () {\n              for (var a = 0, d = 0; d < b.length; ++d) {\n                var e = b.charCodeAt(d);\n                55296 <= e && 57343 >= e && (e = 65536 + ((e & 1023) << 10) | b.charCodeAt(++d) & 1023);\n                127 >= e ? ++a : a = 2047 >= e ? a + 2 : 65535 >= e ? a + 3 : a + 4;\n              }\n\n              return a;\n            } : function () {\n              return b.length;\n            })(),\n                h = Ac(4 + f + 1);\n            G[h >> 2] = f;\n            if (d && e) na(b, h + 4, f + 1);else if (e) for (e = 0; e < f; ++e) {\n              var l = b.charCodeAt(e);\n              255 < l && (S(h), P(\"String has UTF-16 code units that do not fit in 8 bits\"));\n              _E[h + 4 + e] = l;\n            } else for (e = 0; e < f; ++e) {\n              _E[h + 4 + e] = b[e];\n            }\n            null !== a && a.push(S, h);\n            return h;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Za,\n          Kb: function Kb(a) {\n            S(a);\n          }\n        });\n      },\n      H: function H(a, b, d) {\n        d = N(d);\n\n        if (2 === b) {\n          var e = function e() {\n            return va;\n          };\n\n          var f = 1;\n        } else 4 === b && (e = function e() {\n          return G;\n        }, f = 2);\n\n        M(a, {\n          name: d,\n          fromWireType: function fromWireType(a) {\n            for (var b = e(), d = G[a >> 2], g = Array(d), p = a + 4 >> f, u = 0; u < d; ++u) {\n              g[u] = String.fromCharCode(b[p + u]);\n            }\n\n            S(a);\n            return g.join(\"\");\n          },\n          toWireType: function toWireType(a, d) {\n            var g = d.length,\n                k = Ac(4 + g * b),\n                p = e();\n            G[k >> 2] = g;\n\n            for (var u = k + 4 >> f, q = 0; q < g; ++q) {\n              p[u + q] = d.charCodeAt(q);\n            }\n\n            null !== a && a.push(S, k);\n            return k;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Za,\n          Kb: function Kb(a) {\n            S(a);\n          }\n        });\n      },\n      B: function B(a, b, d, e, f, g) {\n        Xa[a] = {\n          name: N(b),\n          ac: qb(d, e),\n          bc: qb(f, g),\n          Qb: []\n        };\n      },\n      q: function q(a, b, d, e, f, g, k, h, l, p) {\n        Xa[a].Qb.push({\n          Tb: N(b),\n          Wb: d,\n          Ub: qb(e, f),\n          Vb: g,\n          dc: k,\n          cc: qb(h, l),\n          ec: p\n        });\n      },\n      J: function J(a, b) {\n        b = N(b);\n        M(a, {\n          Zb: !0,\n          name: b,\n          argPackAdvance: 0,\n          fromWireType: function fromWireType() {},\n          toWireType: function toWireType() {}\n        });\n      },\n      h: function h(a, b, d) {\n        a = T(a);\n        b = wb(b, \"emval::as\");\n        var e = [],\n            f = R(e);\n        F[d >> 2] = f;\n        return b.toWireType(e, a);\n      },\n      i: function i(a, b, d, e) {\n        a = zb[a];\n        b = T(b);\n        d = yb(d);\n        a(b, d, null, e);\n      },\n      a: jb,\n      j: function j(a, b) {\n        b = Bb(a, b);\n\n        for (var d = b[0], e = d.name + \"_$\" + b.slice(1).map(function (a) {\n          return a.name;\n        }).join(\"_\") + \"$\", f = [\"retType\"], g = [d], k = \"\", h = 0; h < a - 1; ++h) {\n          k += (0 !== h ? \", \" : \"\") + \"arg\" + h, f.push(\"argType\" + h), g.push(b[1 + h]);\n        }\n\n        e = \"return function \" + ab(\"methodCaller_\" + e) + \"(handle, name, destructors, args) {\\n\";\n        var l = 0;\n\n        for (h = 0; h < a - 1; ++h) {\n          e += \"    var arg\" + h + \" = argType\" + h + \".readValueFromPointer(args\" + (l ? \"+\" + l : \"\") + \");\\n\", l += b[h + 1].argPackAdvance;\n        }\n\n        e += \"    var rv = handle[name](\" + k + \");\\n\";\n\n        for (h = 0; h < a - 1; ++h) {\n          b[h + 1].deleteObject && (e += \"    argType\" + h + \".deleteObject(arg\" + h + \");\\n\");\n        }\n\n        d.Zb || (e += \"    return retType.toWireType(destructors, rv);\\n\");\n        f.push(e + \"};\\n\");\n        a = mb(f).apply(null, g);\n        return Ab(a);\n      },\n      f: function f(a, b) {\n        a = T(a);\n        b = T(b);\n        return R(a[b]);\n      },\n      p: function p(a) {\n        4 < a && (Q[a].Pb += 1);\n      },\n      n: function n() {\n        return R([]);\n      },\n      b: function b(a) {\n        return R(yb(a));\n      },\n      l: function l() {\n        return R({});\n      },\n      g: function g(a) {\n        Ya(Q[a].value);\n        jb(a);\n      },\n      d: function d(a, b, _d) {\n        a = T(a);\n        b = T(b);\n        _d = T(_d);\n        a[b] = _d;\n      },\n      c: function c(a, b) {\n        a = wb(a, \"_emval_take_value\");\n        a = a.readValueFromPointer(b);\n        return R(a);\n      },\n      S: function S() {\n        B();\n      },\n      r: function r(a, b, d) {\n        a: for (Qa.length = 0;;) {\n          var e = _E[b++];\n\n          if (!e) {\n            b = Qa;\n            break a;\n          }\n\n          100 === e || 102 === e ? (d = da(d, 8), Qa.push(xa[d >> 3]), d += 8) : 105 === e && (d = da(d, 4), Qa.push(F[d >> 2]), d += 4);\n        }\n\n        return Pa[a].apply(null, b);\n      },\n      z: function z(a) {\n        (a = Z[a]) && a.abort();\n      },\n      Z: V,\n      y: function y(a, b, d, e, f) {\n        sc(D(a), D(b), function (a, b) {\n          a ? f && Bc(f, d) : (a = Ac(b.length), _E.set(b, a), Cc(e, d, a, b.length), S(a));\n        });\n      },\n      Y: function Y(a, b, d, e, f, g, k) {\n        tc(D(a), D(b), new Uint8Array(_E.subarray(d, d + e)), function (a) {\n          a ? k && Bc(k, f) : g && Bc(g, f);\n        });\n      },\n      E: function E(a, b, d) {\n        _E.set(_E.subarray(b, b + d), a);\n      },\n      F: function F(a) {\n        if (2147418112 < a) return !1;\n\n        for (var b = Math.max(C.length, 16777216); b < a;) {\n          536870912 >= b ? b = sa(2 * b) : b = Math.min(sa((3 * b + 2147483648) / 4), 2147418112);\n        }\n\n        a: {\n          try {\n            z.grow(b - ta.byteLength + 65535 >> 16);\n            ya(z.buffer);\n            var d = 1;\n            break a;\n          } catch (e) {}\n\n          d = void 0;\n        }\n\n        return d ? !0 : !1;\n      },\n      K: function K(a, b) {\n        var d = 0;\n        vc().forEach(function (e, f) {\n          var g = b + d;\n          f = F[a + 4 * f >> 2] = g;\n\n          for (g = 0; g < e.length; ++g) {\n            C[f++ >> 0] = e.charCodeAt(g);\n          }\n\n          C[f >> 0] = 0;\n          d += e.length + 1;\n        });\n        return 0;\n      },\n      L: function L(a, b) {\n        var d = vc();\n        F[a >> 2] = d.length;\n        var e = 0;\n        d.forEach(function (a) {\n          e += a.length + 1;\n        });\n        F[b >> 2] = e;\n        return 0;\n      },\n      _: xc,\n      x: function x() {\n        return 0;\n      },\n      M: function M(a, b, d, e) {\n        try {\n          var f = Wa.nc(a),\n              g = Wa.jc(f, b, d);\n          F[e >> 2] = g;\n          return 0;\n        } catch (k) {\n          return B(k), k.Nb;\n        }\n      },\n      D: function D() {\n        return 0;\n      },\n      O: function O(a, b, d, e) {\n        try {\n          for (var f = 0, g = 0; g < d; g++) {\n            for (var k = F[b + 8 * g >> 2], h = F[b + (8 * g + 4) >> 2], l = 0; l < h; l++) {\n              Ua(a, _E[k + l]);\n            }\n\n            f += h;\n          }\n\n          F[e >> 2] = f;\n          return 0;\n        } catch (p) {\n          return B(p), p.Nb;\n        }\n      },\n      T: function T(a) {\n        a = new Date(1E3 * F[a >> 2]);\n        F[6672] = a.getUTCSeconds();\n        F[6673] = a.getUTCMinutes();\n        F[6674] = a.getUTCHours();\n        F[6675] = a.getUTCDate();\n        F[6676] = a.getUTCMonth();\n        F[6677] = a.getUTCFullYear() - 1900;\n        F[6678] = a.getUTCDay();\n        F[6681] = 0;\n        F[6680] = 0;\n        F[6679] = (a.getTime() - Date.UTC(a.getUTCFullYear(), 0, 1, 0, 0, 0, 0)) / 864E5 | 0;\n        F[6682] = 26736;\n        return 26688;\n      },\n      memory: z,\n      t: function t() {},\n      table: ia,\n      U: function U(a) {\n        var b = Date.now() / 1E3 | 0;\n        a && (F[a >> 2] = b);\n        return b;\n      }\n    },\n        Ec = function () {\n      function a(a) {\n        c.asm = a.exports;\n        H--;\n        c.monitorRunDependencies && c.monitorRunDependencies(H);\n        0 == H && (Ja && (a = Ja, Ja = null, a()));\n      }\n\n      function b(b) {\n        a(b.instance);\n      }\n\n      function d(a) {\n        return Na().then(function (a) {\n          return WebAssembly.instantiate(a, e);\n        }).then(a, function (a) {\n          w(\"failed to asynchronously prepare wasm: \" + a);\n          B(a);\n        });\n      }\n\n      var e = {\n        env: Dc,\n        wasi_unstable: Dc\n      };\n      H++;\n      c.monitorRunDependencies && c.monitorRunDependencies(H);\n      if (c.instantiateWasm) try {\n        return c.instantiateWasm(e, a);\n      } catch (f) {\n        return w(\"Module.instantiateWasm callback failed with error: \" + f), !1;\n      }\n\n      (function () {\n        if (y || \"function\" !== typeof WebAssembly.instantiateStreaming || Ka() || \"function\" !== typeof fetch) return d(b);\n        fetch(I, {\n          credentials: \"same-origin\"\n        }).then(function (a) {\n          return WebAssembly.instantiateStreaming(a, e).then(b, function (a) {\n            w(\"wasm streaming compile failed: \" + a);\n            w(\"falling back to ArrayBuffer instantiation\");\n            d(b);\n          });\n        });\n      })();\n\n      return {};\n    }();\n\n    c.asm = Ec;\n\n    var Ra = c.___wasm_call_ctors = function () {\n      return c.asm.$.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadGetInfo = function () {\n      return c.asm.aa.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadGetSerializedSize = function () {\n      return c.asm.ba.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadSerialize = function () {\n      return c.asm.ca.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadGetType = function () {\n      return c.asm.da.apply(null, arguments);\n    };\n\n    c._UmbraTextureLoadGetInfo = function () {\n      return c.asm.ea.apply(null, arguments);\n    };\n\n    c._UmbraTextureLoadGetSerializedSize = function () {\n      return c.asm.fa.apply(null, arguments);\n    };\n\n    c._UmbraTextureLoadSerialize = function () {\n      return c.asm.ga.apply(null, arguments);\n    };\n\n    c._UmbraGeodeticToEcef = function () {\n      return c.asm.ha.apply(null, arguments);\n    };\n\n    c._UmbraEcefToGeodetic = function () {\n      return c.asm.ia.apply(null, arguments);\n    };\n\n    c._UmbraTextureGetMipmapLevelByteSize = function () {\n      return c.asm.ja.apply(null, arguments);\n    };\n\n    c._UmbraTextureGetMipmapLevelOffset = function () {\n      return c.asm.ka.apply(null, arguments);\n    };\n\n    var Ac = c._malloc = function () {\n      return c.asm.la.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadFinishExternal = function () {\n      return c.asm.ma.apply(null, arguments);\n    };\n\n    var S = c._free = function () {\n      return c.asm.na.apply(null, arguments);\n    };\n\n    c._UmbraConfigInit = function () {\n      return c.asm.oa.apply(null, arguments);\n    };\n\n    c._UmbraSetAllocator = function () {\n      return c.asm.pa.apply(null, arguments);\n    };\n\n    c._UmbraSetLogger = function () {\n      return c.asm.qa.apply(null, arguments);\n    };\n\n    c._UmbraSetHttp = function () {\n      return c.asm.ra.apply(null, arguments);\n    };\n\n    c._UmbraClientCreate = function () {\n      return c.asm.sa.apply(null, arguments);\n    };\n\n    c._UmbraClientDestroy = function () {\n      return c.asm.ta.apply(null, arguments);\n    };\n\n    c._UmbraGetLibraryInfo = function () {\n      return c.asm.ua.apply(null, arguments);\n    };\n\n    c._UmbraEnvironmentInfoDefaults = function () {\n      return c.asm.va.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeCreate = function () {\n      return c.asm.wa.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeDestroy = function () {\n      return c.asm.xa.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeUpdate = function () {\n      return c.asm.ya.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeGetStreamingState = function () {\n      return c.asm.za.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeNextAssetUnload = function () {\n      return c.asm.Aa.apply(null, arguments);\n    };\n\n    c._UmbraAssetUnloadFinish = function () {\n      return c.asm.Ba.apply(null, arguments);\n    };\n\n    c._UmbraAssetUnloadGetType = function () {\n      return c.asm.Ca.apply(null, arguments);\n    };\n\n    c._UmbraAssetUnloadGetUserPointer = function () {\n      return c.asm.Da.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeNextAssetLoad = function () {\n      return c.asm.Ea.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadPrepare = function () {\n      return c.asm.Fa.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadFinish = function () {\n      return c.asm.Ga.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadAbortRequested = function () {\n      return c.asm.Ha.apply(null, arguments);\n    };\n\n    c._UmbraVertexAttributeGetElementByteSize = function () {\n      return c.asm.Ia.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadGetData = function () {\n      return c.asm.Ja.apply(null, arguments);\n    };\n\n    c._UmbraMeshStreamSetBuffers = function () {\n      return c.asm.Ka.apply(null, arguments);\n    };\n\n    c._UmbraMeshStreamDone = function () {\n      return c.asm.La.apply(null, arguments);\n    };\n\n    c._UmbraMeshStreamNext = function () {\n      return c.asm.Ma.apply(null, arguments);\n    };\n\n    c._UmbraMaterialLoadGetInfo = function () {\n      return c.asm.Na.apply(null, arguments);\n    };\n\n    c._UmbraTextureLoadGetData = function () {\n      return c.asm.Oa.apply(null, arguments);\n    };\n\n    c._UmbraTextureMetaDataLoadGetData = function () {\n      return c.asm.Pa.apply(null, arguments);\n    };\n\n    c._UmbraTextureMetaDataGetClassificationCount = function () {\n      return c.asm.Qa.apply(null, arguments);\n    };\n\n    c._UmbraTextureMetaDataGetClassification = function () {\n      return c.asm.Ra.apply(null, arguments);\n    };\n\n    c._UmbraTextureMetaDataGetClassificationAmount = function () {\n      return c.asm.Sa.apply(null, arguments);\n    };\n\n    c._UmbraSceneCreate = function () {\n      return c.asm.Ta.apply(null, arguments);\n    };\n\n    c._UmbraSceneCreatePublic = function () {\n      return c.asm.Ua.apply(null, arguments);\n    };\n\n    c._UmbraSceneCreateLocal = function () {\n      return c.asm.Va.apply(null, arguments);\n    };\n\n    c._UmbraSceneDestroy = function () {\n      return c.asm.Wa.apply(null, arguments);\n    };\n\n    c._UmbraSceneGetConnectionStatus = function () {\n      return c.asm.Xa.apply(null, arguments);\n    };\n\n    c._UmbraSceneGetInfo = function () {\n      return c.asm.Ya.apply(null, arguments);\n    };\n\n    c._UmbraSceneSetTransform = function () {\n      return c.asm.Za.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyCreate = function () {\n      return c.asm._a.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyDestroy = function () {\n      return c.asm.$a.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyGetStatus = function () {\n      return c.asm.ab.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyGetError = function () {\n      return c.asm.bb.apply(null, arguments);\n    };\n\n    c._UmbraViewCreate = function () {\n      return c.asm.cb.apply(null, arguments);\n    };\n\n    c._UmbraViewDestroy = function () {\n      return c.asm.db.apply(null, arguments);\n    };\n\n    c._UmbraViewUpdateRendering = function () {\n      return c.asm.eb.apply(null, arguments);\n    };\n\n    c._UmbraViewUpdateFilter = function () {\n      return c.asm.fb.apply(null, arguments);\n    };\n\n    c._UmbraViewGetCompleted = function () {\n      return c.asm.gb.apply(null, arguments);\n    };\n\n    c._UmbraViewResetRenderables = function () {\n      return c.asm.hb.apply(null, arguments);\n    };\n\n    c._UmbraViewNextRenderables = function () {\n      return c.asm.ib.apply(null, arguments);\n    };\n\n    c._UmbraViewRayQuery = function () {\n      return c.asm.jb.apply(null, arguments);\n    };\n\n    c._UmbraSendInternalMessage = function () {\n      return c.asm.kb.apply(null, arguments);\n    };\n\n    var tb = c.___getTypeName = function () {\n      return c.asm.lb.apply(null, arguments);\n    };\n\n    c.___embind_register_native_and_builtin_types = function () {\n      return c.asm.mb.apply(null, arguments);\n    };\n\n    var oa = c.stackSave = function () {\n      return c.asm.nb.apply(null, arguments);\n    },\n        ma = c.stackAlloc = function () {\n      return c.asm.ob.apply(null, arguments);\n    },\n        pa = c.stackRestore = function () {\n      return c.asm.pb.apply(null, arguments);\n    },\n        Bc = c.dynCall_vi = function () {\n      return c.asm.qb.apply(null, arguments);\n    };\n\n    c.dynCall_v = function () {\n      return c.asm.rb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiiiiiiii = function () {\n      return c.asm.sb.apply(null, arguments);\n    };\n\n    c.dynCall_viiiiiiiii = function () {\n      return c.asm.tb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiii = function () {\n      return c.asm.ub.apply(null, arguments);\n    };\n\n    c.dynCall_iiii = function () {\n      return c.asm.vb.apply(null, arguments);\n    };\n\n    c.dynCall_iii = function () {\n      return c.asm.wb.apply(null, arguments);\n    };\n\n    c.dynCall_ii = function () {\n      return c.asm.xb.apply(null, arguments);\n    };\n\n    c.dynCall_vii = function () {\n      return c.asm.yb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiiii = function () {\n      return c.asm.zb.apply(null, arguments);\n    };\n\n    c.dynCall_viiiii = function () {\n      return c.asm.Ab.apply(null, arguments);\n    };\n\n    c.dynCall_iiiiiiii = function () {\n      return c.asm.Bb.apply(null, arguments);\n    };\n\n    c.dynCall_viiiiiii = function () {\n      return c.asm.Cb.apply(null, arguments);\n    };\n\n    c.dynCall_i = function () {\n      return c.asm.Db.apply(null, arguments);\n    };\n\n    var Cc = c.dynCall_viii = function () {\n      return c.asm.Eb.apply(null, arguments);\n    };\n\n    c.dynCall_viiii = function () {\n      return c.asm.Fb.apply(null, arguments);\n    };\n\n    c.dynCall_jiji = function () {\n      return c.asm.Gb.apply(null, arguments);\n    };\n\n    c.dynCall_iidiiii = function () {\n      return c.asm.Hb.apply(null, arguments);\n    };\n\n    c.dynCall_viiiiii = function () {\n      return c.asm.Ib.apply(null, arguments);\n    };\n\n    c.asm = Ec;\n\n    c.cwrap = function (a, b, d, e) {\n      d = d || [];\n      var f = d.every(function (a) {\n        return \"number\" === a;\n      });\n      return \"string\" !== b && f && !e ? ka(a) : function () {\n        return la(a, b, d, arguments);\n      };\n    };\n\n    var Fc;\n\n    c.then = function (a) {\n      if (Fc) a(c);else {\n        var b = c.onRuntimeInitialized;\n\n        c.onRuntimeInitialized = function () {\n          b && b();\n          a(c);\n        };\n      }\n      return c;\n    };\n\n    function Qb(a) {\n      this.name = \"ExitStatus\";\n      this.message = \"Program terminated with exit(\" + a + \")\";\n      this.status = a;\n    }\n\n    Ja = function Gc() {\n      Fc || Hc();\n      Fc || (Ja = Gc);\n    };\n\n    function Hc() {\n      function a() {\n        if (!Fc && (Fc = !0, !A)) {\n          Ba(Da);\n          Ba(Ea);\n          if (c.onRuntimeInitialized) c.onRuntimeInitialized();\n          if (c.postRun) for (\"function\" == typeof c.postRun && (c.postRun = [c.postRun]); c.postRun.length;) {\n            var a = c.postRun.shift();\n            Ga.unshift(a);\n          }\n          Ba(Ga);\n        }\n      }\n\n      if (!(0 < H)) {\n        if (c.preRun) for (\"function\" == typeof c.preRun && (c.preRun = [c.preRun]); c.preRun.length;) {\n          Ha();\n        }\n        Ba(Ca);\n        0 < H || (c.setStatus ? (c.setStatus(\"Running...\"), setTimeout(function () {\n          setTimeout(function () {\n            c.setStatus(\"\");\n          }, 1);\n          a();\n        }, 1)) : a());\n      }\n    }\n\n    c.run = Hc;\n    if (c.preInit) for (\"function\" == typeof c.preInit && (c.preInit = [c.preInit]); 0 < c.preInit.length;) {\n      c.preInit.pop()();\n    }\n    Hc();\n    c.maxBytesDownloaded = 0;\n    c.minBytesDownloaded = 0;\n    c.URLsDownloaded = new Set([]);\n    c.wgetRequests = Z;\n\n    function Oa(a, b, d, e, f, g, k, h, l, p, u) {\n      var q = D(a);\n      b = D(b);\n      g = D(g);\n      var t = new XMLHttpRequest();\n      t.open(b, q, !0);\n      if (\"GET\" != b || 0 != g.length) t.withCredentials = !0;\n      t.responseType = \"arraybuffer\";\n      var x = nc();\n\n      t.onload = function () {\n        if (200 == t.status) {\n          var b = new Uint8Array(t.response),\n              g = c.URLsDownloaded;\n          c.maxBytesDownloaded += t.response.byteLength;\n          g.has(a) || (g.add(a), c.minBytesDownloaded += t.response.byteLength);\n          p ? b.length != u ? c.dynCall_viii(f, x, d, 0) : (_E.set(b, p), c.dynCall_viiii(e, x, d, null, 0)) : (g = Ac(b.length), _E.set(b, g), c.dynCall_viiii(e, x, d, g, b.length), S(g));\n        } else c.dynCall_viii(f, x, d, t.status);\n\n        delete Z[x];\n      };\n\n      t.onerror = function () {\n        c.dynCall_viii(f, x, d, t.status);\n        delete Z[x];\n      };\n\n      t.onabort = function () {\n        delete Z[x];\n      };\n\n      0 != g.length && t.setRequestHeader(\"Authorization\", \"Basic \" + btoa(g + \":\"));\n      l = D(l).split(\"\\n\");\n      if (2 <= l.length) for (q = 0; q < l.length; q += 2) {\n        t.setRequestHeader(l[q], l[q + 1]);\n      }\n      \"POST\" == b ? t.send(C.slice(k, k + h)) : t.send(null);\n      Z[x] = t;\n      return x;\n    }\n    return UmbraNativeAPI;\n  };\n}();\n\n// Generated at 2020-07-14 16:33:24\nvar MatrixFormat;\n\n(function (MatrixFormat) {\n  MatrixFormat[MatrixFormat[\"ColumnMajor\"] = 0] = \"ColumnMajor\";\n  MatrixFormat[MatrixFormat[\"RowMajor\"] = 1] = \"RowMajor\";\n  MatrixFormat[MatrixFormat[\"Count\"] = 2] = \"Count\";\n})(MatrixFormat || (MatrixFormat = {}));\n\nvar TextureType;\n\n(function (TextureType) {\n  TextureType[TextureType[\"Diffuse\"] = 0] = \"Diffuse\";\n  TextureType[TextureType[\"Normal\"] = 1] = \"Normal\";\n  TextureType[TextureType[\"Specular\"] = 2] = \"Specular\";\n  TextureType[TextureType[\"MetaIndex\"] = 3] = \"MetaIndex\";\n  TextureType[TextureType[\"Count\"] = 4] = \"Count\";\n})(TextureType || (TextureType = {}));\n\nvar TextureFormat;\n\n(function (TextureFormat) {\n  TextureFormat[TextureFormat[\"RGBA32\"] = 0] = \"RGBA32\";\n  TextureFormat[TextureFormat[\"RGB24\"] = 1] = \"RGB24\";\n  TextureFormat[TextureFormat[\"BC1\"] = 2] = \"BC1\";\n  TextureFormat[TextureFormat[\"BC3\"] = 3] = \"BC3\";\n  TextureFormat[TextureFormat[\"BC4\"] = 4] = \"BC4\";\n  TextureFormat[TextureFormat[\"BC5\"] = 5] = \"BC5\";\n  TextureFormat[TextureFormat[\"ETC1_RGB\"] = 6] = \"ETC1_RGB\";\n  TextureFormat[TextureFormat[\"RGBA_FLOAT32\"] = 7] = \"RGBA_FLOAT32\";\n  TextureFormat[TextureFormat[\"UNC1\"] = 8] = \"UNC1\";\n  TextureFormat[TextureFormat[\"JPEG\"] = 9] = \"JPEG\";\n  TextureFormat[TextureFormat[\"PNG\"] = 10] = \"PNG\";\n  TextureFormat[TextureFormat[\"BMP\"] = 11] = \"BMP\";\n  TextureFormat[TextureFormat[\"PSD\"] = 12] = \"PSD\";\n  TextureFormat[TextureFormat[\"TGA\"] = 13] = \"TGA\";\n  TextureFormat[TextureFormat[\"GIF\"] = 14] = \"GIF\";\n  TextureFormat[TextureFormat[\"HDR\"] = 15] = \"HDR\";\n  TextureFormat[TextureFormat[\"PIC\"] = 16] = \"PIC\";\n  TextureFormat[TextureFormat[\"PNM\"] = 17] = \"PNM\";\n  TextureFormat[TextureFormat[\"ASTC_4X4\"] = 18] = \"ASTC_4X4\";\n  TextureFormat[TextureFormat[\"ASTC_5X4\"] = 19] = \"ASTC_5X4\";\n  TextureFormat[TextureFormat[\"ASTC_5X5\"] = 20] = \"ASTC_5X5\";\n  TextureFormat[TextureFormat[\"ASTC_6X5\"] = 21] = \"ASTC_6X5\";\n  TextureFormat[TextureFormat[\"ASTC_6X6\"] = 22] = \"ASTC_6X6\";\n  TextureFormat[TextureFormat[\"ASTC_8X5\"] = 23] = \"ASTC_8X5\";\n  TextureFormat[TextureFormat[\"ASTC_8X6\"] = 24] = \"ASTC_8X6\";\n  TextureFormat[TextureFormat[\"ASTC_10X5\"] = 25] = \"ASTC_10X5\";\n  TextureFormat[TextureFormat[\"ASTC_10X6\"] = 26] = \"ASTC_10X6\";\n  TextureFormat[TextureFormat[\"ASTC_8X8\"] = 27] = \"ASTC_8X8\";\n  TextureFormat[TextureFormat[\"ASTC_10X8\"] = 28] = \"ASTC_10X8\";\n  TextureFormat[TextureFormat[\"ASTC_10X10\"] = 29] = \"ASTC_10X10\";\n  TextureFormat[TextureFormat[\"ASTC_12X10\"] = 30] = \"ASTC_12X10\";\n  TextureFormat[TextureFormat[\"ASTC_12X12\"] = 31] = \"ASTC_12X12\";\n  TextureFormat[TextureFormat[\"ARGB32\"] = 32] = \"ARGB32\";\n  TextureFormat[TextureFormat[\"R8\"] = 33] = \"R8\";\n  TextureFormat[TextureFormat[\"PVRTC1_RGB4\"] = 34] = \"PVRTC1_RGB4\";\n  TextureFormat[TextureFormat[\"PVRTC1_RGBA4\"] = 35] = \"PVRTC1_RGBA4\";\n  TextureFormat[TextureFormat[\"UINT8\"] = 36] = \"UINT8\";\n  TextureFormat[TextureFormat[\"UINT16\"] = 37] = \"UINT16\";\n  TextureFormat[TextureFormat[\"UINT32\"] = 38] = \"UINT32\";\n  TextureFormat[TextureFormat[\"RGB565\"] = 39] = \"RGB565\";\n  TextureFormat[TextureFormat[\"RG8\"] = 40] = \"RG8\";\n  TextureFormat[TextureFormat[\"RG16F\"] = 41] = \"RG16F\";\n  TextureFormat[TextureFormat[\"OPENEXR\"] = 42] = \"OPENEXR\";\n  TextureFormat[TextureFormat[\"RGBA_FLOAT16\"] = 43] = \"RGBA_FLOAT16\";\n  TextureFormat[TextureFormat[\"RGB_FLOAT16\"] = 44] = \"RGB_FLOAT16\";\n  TextureFormat[TextureFormat[\"RGB_FLOAT32\"] = 45] = \"RGB_FLOAT32\";\n  TextureFormat[TextureFormat[\"Count\"] = 46] = \"Count\";\n})(TextureFormat || (TextureFormat = {}));\n\nvar ColorSpace;\n\n(function (ColorSpace) {\n  ColorSpace[ColorSpace[\"Linear\"] = 0] = \"Linear\";\n  ColorSpace[ColorSpace[\"SRGB\"] = 1] = \"SRGB\";\n  ColorSpace[ColorSpace[\"Count\"] = 2] = \"Count\";\n})(ColorSpace || (ColorSpace = {}));\n\nvar VertexAttribute;\n\n(function (VertexAttribute) {\n  VertexAttribute[VertexAttribute[\"Position\"] = 0] = \"Position\";\n  VertexAttribute[VertexAttribute[\"TextureCoordinate\"] = 1] = \"TextureCoordinate\";\n  VertexAttribute[VertexAttribute[\"Normal\"] = 2] = \"Normal\";\n  VertexAttribute[VertexAttribute[\"Tangent\"] = 3] = \"Tangent\";\n  VertexAttribute[VertexAttribute[\"Count\"] = 4] = \"Count\";\n})(VertexAttribute || (VertexAttribute = {}));\n\nvar BufferFlags;\n\n(function (BufferFlags) {\n  BufferFlags[BufferFlags[\"UncachedMemory\"] = 1] = \"UncachedMemory\";\n})(BufferFlags || (BufferFlags = {}));\n\nvar LogLevel;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\n  LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n  LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\n  LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n  LogLevel[LogLevel[\"Count\"] = 4] = \"Count\";\n})(LogLevel || (LogLevel = {}));\n\nvar TransferStatus;\n\n(function (TransferStatus) {\n  TransferStatus[TransferStatus[\"Inactive\"] = 0] = \"Inactive\";\n  TransferStatus[TransferStatus[\"Active\"] = 1] = \"Active\";\n  TransferStatus[TransferStatus[\"Complete\"] = 2] = \"Complete\";\n  TransferStatus[TransferStatus[\"Error\"] = 3] = \"Error\";\n  TransferStatus[TransferStatus[\"Count\"] = 4] = \"Count\";\n})(TransferStatus || (TransferStatus = {}));\n\nvar HeaderError;\n\n(function (HeaderError) {\n  HeaderError[HeaderError[\"Found\"] = 0] = \"Found\";\n  HeaderError[HeaderError[\"Not_Found\"] = 1] = \"Not_Found\";\n  HeaderError[HeaderError[\"Transfer_Not_Complete\"] = 2] = \"Transfer_Not_Complete\";\n  HeaderError[HeaderError[\"Buffer_Too_Small\"] = 3] = \"Buffer_Too_Small\";\n  HeaderError[HeaderError[\"Count\"] = 4] = \"Count\";\n})(HeaderError || (HeaderError = {}));\n\nvar HttpMethod;\n\n(function (HttpMethod) {\n  HttpMethod[HttpMethod[\"Get\"] = 0] = \"Get\";\n  HttpMethod[HttpMethod[\"Post\"] = 1] = \"Post\";\n  HttpMethod[HttpMethod[\"Put\"] = 2] = \"Put\";\n  HttpMethod[HttpMethod[\"Delete\"] = 3] = \"Delete\";\n  HttpMethod[HttpMethod[\"Count\"] = 4] = \"Count\";\n})(HttpMethod || (HttpMethod = {}));\n\nvar LibraryInfo;\n\n(function (LibraryInfo) {\n  LibraryInfo[LibraryInfo[\"Version\"] = 0] = \"Version\";\n  LibraryInfo[LibraryInfo[\"Copyright\"] = 1] = \"Copyright\";\n  LibraryInfo[LibraryInfo[\"BuildTime\"] = 2] = \"BuildTime\";\n  LibraryInfo[LibraryInfo[\"BuildId\"] = 3] = \"BuildId\";\n  LibraryInfo[LibraryInfo[\"Count\"] = 4] = \"Count\";\n})(LibraryInfo || (LibraryInfo = {}));\n\nvar InvalidUserPointer;\n\n(function (InvalidUserPointer) {\n  InvalidUserPointer[InvalidUserPointer[\"InvalidUserPointer\"] = 0] = \"InvalidUserPointer\";\n})(InvalidUserPointer || (InvalidUserPointer = {}));\n\nvar TextureSupportFlags;\n\n(function (TextureSupportFlags) {\n  TextureSupportFlags[TextureSupportFlags[\"None\"] = 0] = \"None\";\n  TextureSupportFlags[TextureSupportFlags[\"BC1\"] = 1] = \"BC1\";\n  TextureSupportFlags[TextureSupportFlags[\"BC2\"] = 2] = \"BC2\";\n  TextureSupportFlags[TextureSupportFlags[\"BC3\"] = 4] = \"BC3\";\n  TextureSupportFlags[TextureSupportFlags[\"BC4\"] = 8] = \"BC4\";\n  TextureSupportFlags[TextureSupportFlags[\"BC5\"] = 16] = \"BC5\";\n  TextureSupportFlags[TextureSupportFlags[\"BC6H\"] = 32] = \"BC6H\";\n  TextureSupportFlags[TextureSupportFlags[\"BC7\"] = 64] = \"BC7\";\n  TextureSupportFlags[TextureSupportFlags[\"ASTC\"] = 128] = \"ASTC\";\n  TextureSupportFlags[TextureSupportFlags[\"ETC1\"] = 256] = \"ETC1\";\n  TextureSupportFlags[TextureSupportFlags[\"ETC2\"] = 512] = \"ETC2\";\n  TextureSupportFlags[TextureSupportFlags[\"EAC_R\"] = 1024] = \"EAC_R\";\n  TextureSupportFlags[TextureSupportFlags[\"EAC_RG\"] = 2048] = \"EAC_RG\";\n  TextureSupportFlags[TextureSupportFlags[\"PVRTC1\"] = 4096] = \"PVRTC1\";\n  TextureSupportFlags[TextureSupportFlags[\"PVRTC2\"] = 8192] = \"PVRTC2\";\n  TextureSupportFlags[TextureSupportFlags[\"ATC\"] = 16384] = \"ATC\";\n  TextureSupportFlags[TextureSupportFlags[\"HalfFloat\"] = 32768] = \"HalfFloat\";\n  TextureSupportFlags[TextureSupportFlags[\"Float\"] = 65536] = \"Float\";\n  TextureSupportFlags[TextureSupportFlags[\"All\"] = 2147483647] = \"All\";\n})(TextureSupportFlags || (TextureSupportFlags = {}));\n\nvar RuntimeFlags;\n\n(function (RuntimeFlags) {\n  RuntimeFlags[RuntimeFlags[\"NeverUnload\"] = 1] = \"NeverUnload\";\n  RuntimeFlags[RuntimeFlags[\"ExclusiveRendering\"] = 2] = \"ExclusiveRendering\";\n  RuntimeFlags[RuntimeFlags[\"EnableRayQueries\"] = 4] = \"EnableRayQueries\";\n})(RuntimeFlags || (RuntimeFlags = {}));\n\nvar ConnectionStatus;\n\n(function (ConnectionStatus) {\n  ConnectionStatus[ConnectionStatus[\"Connected\"] = 0] = \"Connected\";\n  ConnectionStatus[ConnectionStatus[\"Connecting\"] = 1] = \"Connecting\";\n  ConnectionStatus[ConnectionStatus[\"ConnectionError\"] = 2] = \"ConnectionError\";\n  ConnectionStatus[ConnectionStatus[\"Count\"] = 3] = \"Count\";\n})(ConnectionStatus || (ConnectionStatus = {}));\n\nvar DepthRange;\n\n(function (DepthRange) {\n  DepthRange[DepthRange[\"ZeroToOne\"] = 0] = \"ZeroToOne\";\n  DepthRange[DepthRange[\"MinusOneToOne\"] = 1] = \"MinusOneToOne\";\n  DepthRange[DepthRange[\"Count\"] = 2] = \"Count\";\n})(DepthRange || (DepthRange = {}));\n\nvar FilterShapeType;\n\n(function (FilterShapeType) {\n  FilterShapeType[FilterShapeType[\"Sphere\"] = 0] = \"Sphere\";\n  FilterShapeType[FilterShapeType[\"Cylinder\"] = 1] = \"Cylinder\";\n  FilterShapeType[FilterShapeType[\"None\"] = 2] = \"None\";\n  FilterShapeType[FilterShapeType[\"Count\"] = 3] = \"Count\";\n})(FilterShapeType || (FilterShapeType = {}));\n\nvar SceneCopyStatus;\n\n(function (SceneCopyStatus) {\n  SceneCopyStatus[SceneCopyStatus[\"InProgress\"] = 0] = \"InProgress\";\n  SceneCopyStatus[SceneCopyStatus[\"Done\"] = 1] = \"Done\";\n  SceneCopyStatus[SceneCopyStatus[\"Error\"] = 2] = \"Error\";\n  SceneCopyStatus[SceneCopyStatus[\"Count\"] = 3] = \"Count\";\n})(SceneCopyStatus || (SceneCopyStatus = {}));\n\nvar SceneCopyDestinationType;\n\n(function (SceneCopyDestinationType) {\n  SceneCopyDestinationType[SceneCopyDestinationType[\"File\"] = 0] = \"File\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Directory\"] = 1] = \"Directory\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Cloud\"] = 2] = \"Cloud\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"FormatObj\"] = 3] = \"FormatObj\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Count\"] = 4] = \"Count\";\n})(SceneCopyDestinationType || (SceneCopyDestinationType = {}));\n\nvar SceneCopySourceType;\n\n(function (SceneCopySourceType) {\n  SceneCopySourceType[SceneCopySourceType[\"Directory\"] = 0] = \"Directory\";\n  SceneCopySourceType[SceneCopySourceType[\"Cloud\"] = 1] = \"Cloud\";\n  SceneCopySourceType[SceneCopySourceType[\"Count\"] = 2] = \"Count\";\n})(SceneCopySourceType || (SceneCopySourceType = {}));\n\nvar AssetType;\n\n(function (AssetType) {\n  AssetType[AssetType[\"Material\"] = 0] = \"Material\";\n  AssetType[AssetType[\"Texture\"] = 1] = \"Texture\";\n  AssetType[AssetType[\"Mesh\"] = 2] = \"Mesh\";\n  AssetType[AssetType[\"Count\"] = 3] = \"Count\";\n})(AssetType || (AssetType = {}));\n\nvar AssetLoadResult;\n\n(function (AssetLoadResult) {\n  AssetLoadResult[AssetLoadResult[\"Failure\"] = 0] = \"Failure\";\n  AssetLoadResult[AssetLoadResult[\"OutOfMemory\"] = 1] = \"OutOfMemory\";\n  AssetLoadResult[AssetLoadResult[\"Aborted\"] = 2] = \"Aborted\";\n  AssetLoadResult[AssetLoadResult[\"Success\"] = 3] = \"Success\";\n  AssetLoadResult[AssetLoadResult[\"Count\"] = 4] = \"Count\";\n})(AssetLoadResult || (AssetLoadResult = {}));\n\nvar RayQueryFlags;\n\n(function (RayQueryFlags) {\n  RayQueryFlags[RayQueryFlags[\"BackfaceCulling\"] = 1] = \"BackfaceCulling\";\n})(RayQueryFlags || (RayQueryFlags = {}));\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\n\n\nvar Assets = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  get AssetType () { return AssetType; },\n  get AssetLoadResult () { return AssetLoadResult; }\n});\n\nclass WorkerPool {\n  constructor(numWorkers, workerScriptURL, abortCheckCallback) {\n    var _this = this;\n\n    // List of web workers and their metadatas\n    this.workers = [];\n    this.infos = [];\n\n    if (!window['Worker']) {\n      console.error('WebWorker support required');\n      return;\n    }\n\n    var _loop = function _loop(i) {\n      var worker = new Worker(workerScriptURL);\n\n      worker.onmessage = function (msg) {\n        var _this$infos$i$queue$s = _this.infos[i].queue.shift(),\n            userData = _this$infos$i$queue$s.userData,\n            callback = _this$infos$i$queue$s.callback;\n\n        if (abortCheckCallback()) {\n          console.log('Runtime aborted');\n          return;\n        }\n\n        if (!msg.data['finalResponse']) {\n          console.error('emscripten_worker_respond_provisionally is not supported');\n          return;\n        }\n\n        callback(msg.data.data, userData);\n      };\n\n      worker.onerror = function (msg) {\n        console.error(\"Worker call failed. Is worker's script URL \\\"\".concat(workerScriptURL, \"\\\" correct? Message:\"), msg.message);\n\n        var _this$infos$i$queue$s2 = _this.infos[i].queue.shift(),\n            userData = _this$infos$i$queue$s2.userData,\n            callback = _this$infos$i$queue$s2.callback;\n\n        callback(undefined, userData);\n      };\n\n      var info = {\n        queue: []\n      };\n\n      _this.workers.push(worker);\n\n      _this.infos.push(info);\n    };\n\n    for (var i = 0; i < numWorkers; i++) {\n      _loop(i);\n    }\n  }\n  /**\r\n   * Sends a binary message to a WebWorker.\r\n   */\n\n\n  callWorker(id, funcName, message, userData) {\n    var _this2 = this;\n\n    var transferObject = {\n      funcName: funcName,\n      callbackId: '',\n      data: message\n    }; // We transfer the ownership of \"message\" to the worker. This means it can't point\n    // to a view of the Emscripten heap because the whole heap would get transferred!\n\n    this.workers[id].postMessage(transferObject, [message.buffer]); // Wrap worker's onmessage callback in a promise that rejects if onerror was called.\n\n    return new Promise(function (resolve, reject) {\n      var callback = function callback(buffer, userData) {\n        if (typeof buffer === 'undefined') {\n          reject({\n            buffer: buffer,\n            userData: userData\n          });\n        } else {\n          resolve({\n            buffer: buffer,\n            userData: userData\n          });\n        }\n      };\n\n      _this2.infos[id].queue.push({\n        callback: callback,\n        userData: userData\n      });\n    });\n  }\n\n  findBestWorker() {\n    var best_id = -1;\n    var best = 1e9;\n\n    for (var i = 0; i < this.workers.length; i++) {\n      if (this.infos[i].queue.length < best) {\n        best_id = i;\n        best = this.infos[i].queue.length;\n      }\n    }\n\n    return best_id;\n  }\n\n  shortestQueueLength() {\n    var shortest = 1e9;\n\n    for (var info of this.infos) {\n      shortest = Math.min(shortest, info.queue.length);\n    }\n\n    return shortest;\n  }\n\n}\n\nvar MAX_LIGHTS = 32;\nvar arrayToHeap = new Map([[Float32Array, 'HEAPF32'], [Uint32Array, 'HEAPU32'], [Uint16Array, 'HEAPU16'], [Uint8Array, 'HEAPU8']]);\n\nfunction assertInteger(x) {\n  if (!Number.isInteger(x)) {\n    throw new Error('Value was not integer: ' + x.toString());\n  }\n}\n/**\r\n * We need to use a factory here since the native API classes depend on the Emscripten generated wasm code\r\n * that can't be loaded as a regular ES6 module. The \"Module\" object allows access to C++ functions and the\r\n * Emscripten heap.\r\n */\n\n\nvar create = function create(Module) {\n  /**\r\n   * A Buffer is a block of memory in the Emscripten heap. Typed arrays may get detached when Emscripten\r\n   * memory growth happens, so any JS code that wants to read from the heap needs to create its typed views\r\n   * right before they are used.\r\n   *\r\n   * The views are safe to use during synchronous execution, but for example a 'yield' in a generator may\r\n   * trigger memory growth before the caller gets the returned value.\r\n   */\n  class Buffer {\n    constructor(size) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Uint8Array;\n      assertInteger(size / type.BYTES_PER_ELEMENT);\n\n      if (size === 0) {\n        throw new Error('Buffer size was zero');\n      }\n\n      this.ptr = Module.umbraAlloc(size);\n\n      if (this.ptr === 0) {\n        throw new Error(\"Allocation of \".concat(size, \" bytes failed.\"));\n      }\n\n      this.size = size; // In bytes\n\n      this.type = type;\n    }\n\n    destroy() {\n      Module.umbraFree(this.ptr);\n      this.ptr = 0;\n      this.size = 0;\n    }\n    /**\r\n     * A destructive resize operation that never shrinks the buffer.\r\n     * NOTE: Does *not* copy the old data over.\r\n     */\n\n\n    ensureSize(newSize) {\n      if (this.size < newSize) {\n        this.destroy();\n        this.ptr = Module.umbraAlloc(newSize);\n\n        if (this.ptr === 0) {\n          throw new Error(\"Buffer growth to \".concat(newSize, \" bytes failed.\"));\n        }\n\n        this.size = newSize;\n      }\n    }\n\n    floats() {\n      return new Float32Array(Module.HEAPF32.buffer, this.ptr, this.size / 4);\n    }\n\n    bytes() {\n      return new Uint8Array(Module.HEAPU8.buffer, this.ptr, this.size);\n    }\n\n  }\n\n  class BufferView {\n    constructor(ptr, size) {\n      var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Float32Array;\n      this.ptr = ptr;\n      this.size = size;\n      this.type = type;\n      this.heapName = arrayToHeap.get(type);\n    }\n\n    getArray() {\n      // eslint-disable-next-line new-cap\n      return new this.type(Module[this.heapName].buffer, this.ptr, this.size / this.type.BYTES_PER_ELEMENT);\n    }\n\n  } // Struct field offsets are required for zero-copy interop\n\n\n  var renderableStructOffsets = Module.getRenderableMemberOffsets();\n\n  function copyMat4(buf, elements) {\n    for (var i = 0; i < 16; i++) {\n      buf[i] = elements[i];\n    }\n  }\n\n  function copyVec3(buf, elements) {\n    buf[0] = elements[0];\n    buf[1] = elements[1];\n    buf[2] = elements[2];\n  }\n\n  class Client {\n    constructor() {\n      this.configPtr = Module.umbraAlloc(Module.CONFIG_SIZE);\n      Module.configInit(this.configPtr);\n      this.ptr = Module.clientCreate('UmbraJS', this.configPtr);\n    }\n\n    destroy() {\n      Module.clientDestroy(this.ptr);\n      Module.umbraFree(this.configPtr);\n      this.ptr = 0;\n    }\n\n  }\n\n  class NativeScene {\n    constructor(ptr) {\n      this.matrixBuffer = new Buffer(16 * 4, Float32Array);\n      this.infoBuffer = new Buffer(Module.sceneInfoSize);\n      this.ptr = ptr;\n    }\n\n    destroy() {\n      this.matrixBuffer.destroy();\n      this.infoBuffer.destroy();\n      Module.sceneDestroy(this.ptr);\n      this.ptr = 0;\n    }\n\n    connectionStatus() {\n      return Module.sceneGetConnectionStatus(this.ptr);\n    }\n\n    getInfo() {\n      Module.sceneGetInfo(this.ptr, this.infoBuffer.ptr);\n      return Module.deserializeSceneInfo(this.infoBuffer.ptr);\n    }\n\n    isConnected() {\n      return this.connectionStatus() === ConnectionStatus.Connected;\n    }\n\n    setTransform(matrix) {\n      if (!Array.isArray(matrix)) {\n        throw new TypeError('Matrix should be an array');\n      }\n\n      if (matrix.length !== 16) {\n        throw new TypeError('Matrix should be of size 4x4');\n      }\n\n      copyMat4(this.matrixBuffer.floats(), matrix);\n      Module.sceneSetTransform(this.ptr, this.matrixBuffer.ptr);\n    }\n\n  }\n\n  class View {\n    constructor(ptr, runtimeAssets) {\n      this.ptr = ptr;\n      this.matrixBuffer = new Buffer(16 * 4, Float32Array);\n      this.vectorBuffer = new Buffer(4 * 4, Float32Array);\n      this.lightBuffer = new Buffer(MAX_LIGHTS * 3 * 4, Float32Array);\n      this.temp = undefined;\n      this.runtimeAssets = runtimeAssets;\n    }\n\n    destroy() {\n      this.matrixBuffer.destroy();\n      this.vectorBuffer.destroy();\n      this.lightBuffer.destroy();\n\n      if (this.temp) {\n        this.temp.destroy();\n      }\n\n      Module.viewDestroy(this.ptr);\n      this.ptr = 0;\n    }\n\n    setCamera(worldToClip, positionVector, quality) {\n      var lights = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n      var depthRange = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : DepthRange.MinusOneToOne;\n      var matrixFormat = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : MatrixFormat.ColumnMajor;\n\n      if (!Array.isArray(worldToClip)) {\n        throw new TypeError('Camera matrix should be an array');\n      }\n\n      if (!Array.isArray(positionVector)) {\n        throw new TypeError('Position should be an array');\n      }\n\n      if (typeof quality !== 'number') {\n        throw new TypeError('Quality should be a number');\n      }\n\n      if (worldToClip.length !== 16) {\n        throw new TypeError('WorldToClip matrix should be of size 4x4');\n      }\n\n      if (positionVector.length !== 3) {\n        throw new TypeError('Position vector should be of length 3');\n      }\n\n      copyMat4(this.matrixBuffer.floats(), worldToClip);\n      copyVec3(this.vectorBuffer.floats(), positionVector);\n\n      if (lights) {\n        if (lights.length > MAX_LIGHTS) {\n          throw new Error('Too many lights given');\n        }\n\n        var buffer = this.lightBuffer.floats();\n\n        for (var i = 0; i < lights.length; i++) {\n          buffer[3 * i + 0] = lights[i][0];\n          buffer[3 * i + 1] = lights[i][1];\n          buffer[3 * i + 2] = lights[i][2];\n        }\n      }\n\n      Module.viewUpdateRendering(this.ptr, this.matrixBuffer.ptr, this.vectorBuffer.ptr, depthRange, matrixFormat, quality, this.lightBuffer.ptr, lights.length);\n    }\n\n    getVisible(batchSize) {\n      assertInteger(batchSize);\n      var bufferSize = batchSize * Module.renderableSize; // Check if we should enlarge or allocate the temp buffer\n\n      if (!this.temp || this.temp.size < bufferSize) {\n        if (this.temp) {\n          this.temp.destroy();\n        }\n\n        this.temp = new Buffer(bufferSize);\n      }\n\n      var temp = this.temp;\n      var strideInWords = Module.renderableSize / 4;\n      var bufferWordSize = bufferSize / 4;\n      assertInteger(strideInWords);\n      assertInteger(bufferWordSize);\n\n      var getView = function getView(arrayType, heap, ptr, ofs) {\n        assertInteger(ofs / 4); // eslint-disable-next-line new-cap\n\n        return new arrayType(heap.buffer, ptr + ofs, bufferWordSize - ofs / 4);\n      };\n\n      var meshIDs = getView(Uint32Array, Module.HEAPU32, temp.ptr, renderableStructOffsets['mesh']);\n      var lodLevels = getView(Int32Array, Module.HEAP32, temp.ptr, renderableStructOffsets['lodLevel']);\n      var masks = getView(Uint32Array, Module.HEAPU32, temp.ptr, renderableStructOffsets['visibilityMask']); // const transforms = getView(Float32Array, Module.HEAPF32, temp.ofs, offsets['transform'])\n\n      var scenePointers = getView(Uint32Array, Module.HEAPU32, temp.ptr, renderableStructOffsets['scene']);\n      var count = Module.viewNextRenderables(this.ptr, temp.ptr, batchSize);\n      var output = [];\n\n      for (var i = 0; i < count; i++) {\n        var id = meshIDs[strideInWords * i];\n        var lod = lodLevels[strideInWords * i];\n        var mask = masks[strideInWords * i];\n        var scenePtr = scenePointers[strideInWords * i]; // TODO extract individual transforms too\n\n        output.push({\n          id: id,\n          mesh: this.runtimeAssets.get(id),\n          lod: lod,\n          mask: mask,\n          scenePtr: scenePtr\n        });\n      }\n\n      return output;\n    }\n\n  }\n\n  class AssetLoad {\n    constructor(ptr, assetUserPointer) {\n      this.ptr = ptr;\n      this.assetType = Module.assetLoadGetType(this.ptr);\n      this.type = 'Load' + AssetType[this.assetType];\n      this.data = {}; // Type specific asset data set from the outside\n\n      this.assetUserPointer = assetUserPointer;\n    }\n\n    prepare() {\n      Module.assetLoadPrepare(this.ptr, this.assetUserPointer);\n    }\n\n    finish(result) {\n      Module.assetLoadFinish(this.ptr, result);\n    }\n\n  }\n\n  class AssetUnload {\n    constructor(ptr) {\n      this.ptr = ptr;\n      this.assetType = Module.assetUnloadGetType(this.ptr);\n      this.type = 'Unload' + AssetType[this.assetType];\n      this.userPointer = Module.assetUnloadGetUserPointer(this.ptr);\n    }\n\n    finish() {\n      Module.assetUnloadFinish(this.ptr);\n    }\n\n  }\n\n  class Runtime {\n    constructor(client, _ref, _ref2) {\n      var _this = this;\n\n      var _ref$features = _ref.features,\n          features = _ref$features === void 0 ? {\n        textureSupportMask: 0,\n        formats: [],\n        srgb: false,\n        halfFloat: false\n      } : _ref$features,\n          _ref$flags = _ref.flags,\n          flags = _ref$flags === void 0 ? 0 : _ref$flags;\n      var _ref2$workerScriptURL = _ref2.workerScriptURL,\n          workerScriptURL = _ref2$workerScriptURL === void 0 ? 'UmbraPlayerWorker.js' : _ref2$workerScriptURL,\n          _ref2$numWorkers = _ref2.numWorkers,\n          numWorkers = _ref2$numWorkers === void 0 ? 2 : _ref2$numWorkers;\n      this.assets = new Map();\n      this.nextId = 1;\n      this.tempTextureBuffer = new Buffer(1024 * 1024);\n      this.tempStreamingStateBuffer = new Buffer(Module.streamingStateSize);\n      this.tempDispatchBuffer = new Buffer(1);\n      this.stats = {\n        meshPipelineMemoryUse: 0,\n        texturePipelineMemoryUse: 0\n      };\n      this.limits = {\n        // A soft upper limit in bytes\n        maxPipelineMemoryUse: 32 * 1024 * 1024\n      };\n      this.pendingAssetLoads = new Map();\n      /**\r\n       * If no normal map formats are supported then force support for\r\n       * BC5 so that textures get transcoded into an uncompressed format.\r\n       */\n\n      var normalFormats = TextureSupportFlags.ETC1 | TextureSupportFlags.ASTC | TextureSupportFlags.PVRTC1 | TextureSupportFlags.BC5;\n      var textureSupportMask = features.textureSupportMask;\n\n      if (!(textureSupportMask & normalFormats)) {\n        textureSupportMask |= TextureSupportFlags.BC5 | TextureSupportFlags.BC4;\n      }\n\n      this.client = client;\n      var infoPtr = Module.serializeEnvironmentInfo({\n        textureSupportFlags: textureSupportMask,\n        localCacheDirectory: null,\n        localCacheMaximumByteSize: 0\n      }, 0);\n      this.ptr = Module.runtimeCreate(client.ptr, infoPtr, flags);\n      Module.umbraFree(infoPtr);\n      this.platformFeatures = features;\n      var scratchSize = Math.max(Module.meshInfoSize, Module.materialInfoSize, Module.textureInfoSize, Module.byteBufferSize);\n      this.scratch = new Buffer(scratchSize, Uint8Array);\n      this.debug = {\n        textureFormatsInUse: new Set(),\n        platformFeatures: features\n      };\n\n      if (numWorkers < 1) {\n        throw new Error(\"numWorkers should be at least 1, was \".concat(numWorkers));\n      }\n\n      this.workerPool = new WorkerPool(numWorkers, workerScriptURL, function () {\n        return _this.ptr === 0;\n      });\n    }\n\n    destroy() {\n      this.tempTextureBuffer.destroy();\n      this.tempStreamingStateBuffer.destroy();\n      this.tempDispatchBuffer.destroy();\n      this.scratch.destroy();\n      Module.runtimeDestroy(this.ptr);\n      this.client.destroy();\n      this.ptr = 0;\n    }\n\n    createScenePublic(publicKey) {\n      var scenePtr = Module.sceneCreatePublic(this.ptr, publicKey);\n\n      if (!scenePtr) {\n        return undefined;\n      }\n\n      return new NativeScene(scenePtr);\n    }\n\n    createSceneLocal(url) {\n      var scenePtr = Module.sceneCreateLocal(this.ptr, url);\n\n      if (!scenePtr) {\n        return undefined;\n      }\n\n      return new NativeScene(scenePtr);\n    }\n\n    setHandlers(handlers) {\n      this.handlers = handlers;\n    }\n\n    createView() {\n      var viewPtr = Module.viewCreate(this.ptr);\n      return new View(viewPtr, this.assets);\n    }\n\n    update() {\n      Module.runtimeUpdate(this.ptr);\n    }\n\n    *getAssetUnloads() {\n      var p = Module.runtimeNextAssetUnload(this.ptr);\n\n      while (p !== 0) {\n        var unload = new AssetUnload(p);\n        unload.data = this.assets.get(unload.userPointer);\n        yield unload;\n        p = Module.runtimeNextAssetUnload(this.ptr);\n      }\n    }\n\n    dispatchTextureLoad(load) {\n      return __awaiter(this, void 0, void 0, function* () {\n        var infoPtr = this.scratch.ptr;\n        Module.textureLoadGetInfo(load.ptr, infoPtr);\n        var texture = Module.deserializeTextureInfo(infoPtr);\n        var needsTranscoding = this.formatNeedsTranscoding(texture.format);\n        load.prepare();\n\n        if (needsTranscoding) {\n          var _formatToArrayType;\n\n          var serSize = Module.textureLoadGetSerializedSize(load.ptr);\n          var headerSize = Module.textureLoadDispatchHeaderSize;\n          var textureLoadDispatchSize = serSize + headerSize;\n          this.tempDispatchBuffer.ensureSize(textureLoadDispatchSize);\n          var dispatchBuffer = this.tempDispatchBuffer;\n          /*const result =*/\n\n          Module.convertAssetLoadToTextureDispatch(load.ptr, load.assetUserPointer, this.platformFeatures.textureSupportMask, this.platformFeatures.srgb, dispatchBuffer.ptr, textureLoadDispatchSize); // We can't tell how big the transcoded texture will be but we assume it will be pretty\n          // much the same size as the input. Since both input and output textures can still stay\n          // allocated simultaneously, multiply the size with two two get a peak memory use estimate.\n\n          var memoryUseEstimate = textureLoadDispatchSize * 2;\n          this.stats.texturePipelineMemoryUse += memoryUseEstimate;\n          var best = this.workerPool.findBestWorker();\n          var buffer; // Launch the async worker transcode task\n\n          try {\n            ;\n\n            var _ref3 = yield this.workerPool.callWorker(best, 'loadTexture', new Uint8Array(dispatchBuffer.bytes()), // Copy the dispatch buffer\n            {\n              load: load,\n              memoryUse: memoryUseEstimate\n            });\n\n            buffer = _ref3.buffer;\n          } catch (_ref4) {\n            var userData = _ref4.userData;\n            load.finish(AssetLoadResult.Failure);\n            throw AssetLoadResult.Failure;\n          }\n\n          this.stats.texturePipelineMemoryUse -= memoryUseEstimate;\n          var ptr = Module.umbraAlloc(buffer.byteLength); // Int8Array.set(ArrayBuffer, ofs) works but ArrayBuffer is missing .length so we force the type\n\n          Module.HEAP8.set(buffer, ptr);\n          var result = Module.deserializeTextureLoadResult(ptr);\n          var umbraTexture = result.textureInfo;\n          var formatToArrayType = (_formatToArrayType = {}, _defineProperty(_formatToArrayType, TextureFormat.RGBA32, Uint8Array), _defineProperty(_formatToArrayType, TextureFormat.RGB565, Uint16Array), _defineProperty(_formatToArrayType, TextureFormat.RG8, Uint8Array), _defineProperty(_formatToArrayType, TextureFormat.RG16F, Uint16Array), _formatToArrayType);\n          var pixelData = new BufferView(ptr + Module.textureLoadResultHeaderSize, umbraTexture.dataByteSize, Uint8Array);\n          pixelData.type = formatToArrayType[umbraTexture.format];\n          var textureData = {\n            info: umbraTexture,\n            buffer: pixelData\n          };\n          buffer = undefined;\n          var status = AssetLoadResult.Failure;\n\n          try {\n            status = this.handlers['LoadTexture'](textureData, load.assetUserPointer);\n            this.debug.textureFormatsInUse.add(umbraTexture.format);\n            load.finish(status);\n          } catch (error) {\n            load.finish(AssetLoadResult.Failure);\n            throw AssetLoadResult.Failure;\n          } finally {\n            Module.umbraFree(ptr);\n          }\n\n          return status;\n        } else {\n          var _buffer = this.tempTextureBuffer;\n\n          _buffer.ensureSize(texture.dataByteSize);\n\n          Module.serializeByteBuffer({\n            ptr: _buffer.ptr,\n            byteSize: texture.dataByteSize,\n            flags: 0\n          }, this.scratch.ptr);\n\n          if (!Module.textureLoadGetData(load.ptr, this.scratch.ptr)) {\n            throw new Error(\"textureLoadGetData failed: \".concat(load.ptr, \", \").concat(_buffer.ptr, \", \").concat(texture.dataByteSize, \"/\").concat(_buffer.size));\n          }\n\n          var bufferView = new BufferView(_buffer.ptr, texture.dataByteSize, _buffer.type);\n          var _textureData = {\n            info: texture,\n            buffer: bufferView\n          };\n          var _status = AssetLoadResult.Failure;\n\n          try {\n            _status = this.handlers['LoadTexture'](_textureData, load.assetUserPointer);\n          } catch (error) {\n            load.finish(AssetLoadResult.Failure);\n            throw error;\n          }\n\n          load.finish(_status); // Instantly resolve the promise in the case we didn't need any transcoding.\n\n          if (_status === AssetLoadResult.Success) {\n            return _status;\n          } else {\n            throw _status;\n          }\n        }\n      });\n    }\n\n    dispatchMaterialLoad(load) {\n      return __awaiter(this, void 0, void 0, function* () {\n        var _this2 = this;\n\n        load.prepare();\n        Module.materialLoadGetInfo(load.ptr, this.scratch.ptr);\n        var info = Module.deserializeMaterialInfo(this.scratch.ptr);\n        var texturePtrs = info.textures.filter(function (ptr) {\n          return ptr !== Module.INVALID_USERPOINTER;\n        }); // All texture loads should've been started by now so the promises should exist\n\n        var pending = texturePtrs.map(function (id) {\n          return _this2.pendingAssetLoads.get(id);\n        }); // Catches errors and saves the texture load statuses to a list. All texture\n        // promises are waited for before materialPromise runs its executor.\n\n        var texturePromises = pending.map(function (p) {\n          return p[\"catch\"](function (e) {\n            return e;\n          });\n        }); // First wait for all material's textures\n\n        var results = yield Promise.all(texturePromises);\n        texturePtrs.forEach(function (id) {\n          return _this2.pendingAssetLoads[\"delete\"](id);\n        });\n\n        for (var result of results) {\n          if (result !== AssetLoadResult.Success) {\n            load.finish(AssetLoadResult.Failure);\n            throw AssetLoadResult.Failure;\n          }\n        } // Texture loads have finished so we can fetch the objects uploaded by user\n\n\n        var textureObjects = texturePtrs.map(function (id) {\n          return _this2.assets.get(id);\n        });\n        var materialData = {\n          transparent: info.transparent,\n          textures: textureObjects\n        };\n\n        try {\n          var status = this.handlers['LoadMaterial'](materialData, load.assetUserPointer);\n          load.finish(status);\n          return status;\n        } catch (error) {\n          load.finish(AssetLoadResult.Failure);\n          throw AssetLoadResult.Failure;\n        }\n      });\n    }\n\n    dispatchMeshLoad(load) {\n      return __awaiter(this, void 0, void 0, function* () {\n        Module.meshLoadGetInfo(load.ptr, this.scratch.ptr);\n        var info = Module.deserializeMeshInfo(this.scratch.ptr);\n        load.prepare();\n        var size = Module.meshLoadDispatchHeaderSize + Module.meshLoadGetSerializedSize(load.ptr);\n        this.tempDispatchBuffer.ensureSize(size);\n        var buf = this.tempDispatchBuffer;\n\n        if ((buf.ptr & 0x0f) != 0) {\n          console.warn(\"buf.ptr wasn't aligned: \".concat(buf.ptr));\n        }\n\n        var desc = Module.convertAssetLoadToMeshDispatch(load.ptr, load.assetUserPointer, buf.ptr, size);\n        var materialUserPointer = info.material;\n        var materialPromise = this.pendingAssetLoads.get(materialUserPointer);\n\n        if (typeof materialPromise === 'undefined') {\n          console.error(\"Material UserPointer \".concat(materialUserPointer, \" didn't have a promise\"));\n          load.finish(AssetLoadResult.Failure);\n          throw AssetLoadResult.Failure;\n        } // Increase memory use here and decrease it in the finish callback.\n\n\n        var memoryUse = size + desc.byteSize + Module.meshLoadResultHeaderSize;\n        this.stats.meshPipelineMemoryUse += memoryUse;\n        var best = this.workerPool.findBestWorker();\n        var buffer;\n\n        try {\n          // NOTE: We need to copy \"buf\" here because if \"callWorker()\" transfers the ownership\n          // its a must, and even if it doesn't, then it's much faster to transfer a small copy\n          // because otherwise the _whole heap_ would get copied over to a worker.\n          // See https://bugs.chromium.org/p/chromium/issues/detail?id=169705\n          ;\n\n          var _ref5 = yield this.workerPool.callWorker(best, 'loadMesh', new Uint8Array(buf.bytes()), {});\n\n          buffer = _ref5.buffer;\n        } catch (obj) {\n          console.warn('Worker failed async mesh load');\n          load.finish(AssetLoadResult.Failure);\n          throw AssetLoadResult.Failure;\n        } finally {\n          this.stats.meshPipelineMemoryUse -= memoryUse;\n        }\n\n        var bufferByteSize = buffer.length * buffer.BYTES_PER_ELEMENT;\n        var ptr = Module.umbraAlloc(bufferByteSize);\n        Module.HEAP8.set(buffer, ptr);\n        buffer = undefined; // we won't be using \"buffer\" after we've copied it to the heap\n\n        var obj = Module.deserializeMeshLoadResult(ptr);\n        var failed = false; // These errors should never happen\n\n        if (obj.result !== AssetLoadResult.Success) {\n          console.error(\"Asset load failed with \".concat(AssetLoadResult[obj.result]));\n          failed = true;\n        }\n\n        if (obj.assetLoad !== load.ptr) {\n          console.error(\"Asset load ptr didn't match \".concat(obj.assetLoad, \" vs \").concat(load.ptr));\n          failed = true;\n        }\n\n        if (failed) {\n          Module.umbraFree(ptr);\n          load.finish(AssetLoadResult.Failure);\n          throw AssetLoadResult.Failure;\n        }\n\n        var basePtr = ptr + Module.meshLoadResultHeaderSize;\n        var bufferDescs = Module.meshLoadResultBuildUmbraBuffers(ptr, basePtr);\n        var attributeArrayType = {\n          position: Float32Array,\n          uv: Float32Array,\n          normal: Float32Array,\n          tangent: Float32Array,\n          index: bufferDescs.index.elementByteSize === 2 ? Uint16Array : Uint32Array\n        };\n        var meshAttributes = {};\n\n        for (var name of Object.keys(bufferDescs)) {\n          var vbuf = {};\n          var elemBuf = bufferDescs[name];\n          var attributeArraySize = elemBuf.elementCapacity * elemBuf.elementStride;\n          vbuf['data'] = new BufferView(elemBuf.ptr, attributeArraySize, attributeArrayType[name]);\n          vbuf['desc'] = elemBuf;\n          meshAttributes[name] = vbuf;\n        } // Wait for material load to finish (its textures may take time) and\n        // only then call the handler.\n\n\n        try {\n          yield materialPromise;\n        } catch (status) {\n          // On error, finish the mesh load with the same status as its dependency\n          load.finish(status);\n          Module.umbraFree(ptr);\n          throw status;\n        }\n\n        var materialAsset = this.assets.get(materialUserPointer);\n        var meshData = {\n          buffers: meshAttributes,\n          material: materialAsset,\n          bounds: [info.bounds.mn, info.bounds.mx]\n        };\n        var status = AssetLoadResult.Failure;\n\n        try {\n          // Finally we can call user's handler function\n          status = this.handlers['LoadMesh'](meshData, load.assetUserPointer);\n\n          if (status === AssetLoadResult.Success) {\n            Module.meshLoadFinishExternalWithLoadResultHeader(load.ptr, ptr, basePtr);\n          } else {\n            load.finish(status);\n            throw status;\n          }\n        } catch (error) {\n          // Handler threw an exception\n          load.finish(AssetLoadResult.Failure);\n          throw error;\n        } finally {\n          Module.umbraFree(ptr);\n        }\n\n        return status;\n      });\n    }\n\n    loadAssets(timeLimit) {\n      var startTime = performance.now(); // First go and free up all pending assets\n\n      for (var unload of this.getAssetUnloads()) {\n        var asset = this.assets.get(unload.userPointer);\n        this.handlers[unload.type](asset, unload.userPointer);\n        unload.finish();\n\n        if (performance.now() - startTime > timeLimit) {\n          break;\n        }\n      } // Process load jobs if there's still time left\n\n      do {\n        var loadPtr = Module.runtimeNextAssetLoad(this.ptr); // No more jobs to process?\n\n        if (loadPtr === 0) {\n          break;\n        }\n\n        var promise = void 0; // Assign the newly created AssetLoad its own user pointer right away\n        // so that we can call load.prepare() before handing it out to user.\n\n        var load = new AssetLoad(loadPtr, this.getNextUserPointer());\n\n        if (load.type === 'LoadTexture') {\n          promise = this.dispatchTextureLoad(load);\n        } else if (load.type === 'LoadMaterial') {\n          promise = this.dispatchMaterialLoad(load);\n        } else if (load.type === 'LoadMesh') {\n          // No-one waits for mesh loads to finish so we don't save its promise\n          this.dispatchMeshLoad(load);\n        }\n\n        if (typeof promise !== 'undefined') {\n          this.pendingAssetLoads.set(load.assetUserPointer, promise);\n        }\n        // This causes a bubble in the pipeline when very large decompression\n        // jobs consume all the pipeline memory. On the other hand, we crash if too\n        // much memory is used so something needs to be done.\n\n        var pipelineMemoryUsed = this.stats.meshPipelineMemoryUse + this.stats.texturePipelineMemoryUse;\n\n        if (this.workerPool.shortestQueueLength() > 0 && pipelineMemoryUsed >= this.limits.maxPipelineMemoryUse) {\n          break;\n        }\n      } while (performance.now() - startTime < timeLimit);\n    }\n\n    getNextUserPointer() {\n      // AssetJob IDs are just an increasing 32-bit series\n      var userPtr = this.nextId;\n      this.nextId = this.nextId + 1 | 0;\n\n      if (this.nextId === 0) {\n        this.nextId = 1;\n      }\n\n      return userPtr;\n    }\n\n    addAsset(assetID, asset) {\n      this.assets.set(assetID, asset);\n    }\n    /**\r\n     * Removes the asset reference of the stream out job.\r\n     * Assumes the caller has already freed their own asset resources.\r\n     */\n\n\n    removeAsset(id) {\n      if (this.assets.has(id)) {\n        this.assets[\"delete\"](id);\n      }\n    }\n\n    formatNeedsTranscoding(format) {\n      var flags = this.platformFeatures.textureSupportMask;\n\n      switch (format) {\n        case TextureFormat.BC1:\n          if (flags & TextureSupportFlags.BC1) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC3:\n          if (flags & TextureSupportFlags.BC3) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC4:\n          if (flags & TextureSupportFlags.BC4) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC5:\n          if (flags & TextureSupportFlags.BC5) {\n            return false;\n          }\n\n          break;\n\n        default:\n          return false;\n      }\n\n      return true;\n    }\n\n    getStreamingState() {\n      Module.runtimeGetStreamingState(this.ptr, this.tempStreamingStateBuffer.ptr);\n      return Module.deserializeStreamingState(this.tempStreamingStateBuffer.ptr);\n    }\n\n    getStreamingProgress() {\n      var state = this.getStreamingState();\n\n      if (state.numResidentTiles == 0) {\n        return 0.0;\n      }\n\n      return state.numResidentTilesLoaded / state.numResidentTiles;\n    }\n\n  } // Expose only runtime for instantiation\n\n\n  return {\n    createRuntime: function createRuntime(config) {\n      return new Runtime(new Client(), config, Module.umbraLibraryConfig);\n    }\n  };\n};\n\n// Generated at 2020-07-14 16:33:24\nfunction wrapNativeFunctions(Module) {\n  Object.assign(Module, {\n    configInit: Module.cwrap('UmbraConfigInit', null, ['number']),\n    clientCreate: Module.cwrap('UmbraClientCreate', 'number', ['string', 'number']),\n    clientDestroy: Module.cwrap('UmbraClientDestroy', null, ['number']),\n    getLibraryInfo: Module.cwrap('UmbraGetLibraryInfo', 'string', ['number']),\n    environmentInfoDefaults: Module.cwrap('UmbraEnvironmentInfoDefaults', null, ['number']),\n    runtimeCreate: Module.cwrap('UmbraRuntimeCreate', 'number', ['number', 'number', 'number']),\n    runtimeUpdate: Module.cwrap('UmbraRuntimeUpdate', null, ['number']),\n    runtimeGetStreamingState: Module.cwrap('UmbraRuntimeGetStreamingState', null, ['number', 'number']),\n    runtimeDestroy: Module.cwrap('UmbraRuntimeDestroy', null, ['number']),\n    sceneCreate: Module.cwrap('UmbraSceneCreate', 'number', ['number', 'string', 'string']),\n    sceneCreatePublic: Module.cwrap('UmbraSceneCreatePublic', 'number', ['number', 'string']),\n    sceneCreateLocal: Module.cwrap('UmbraSceneCreateLocal', 'number', ['number', 'string']),\n    sceneGetConnectionStatus: Module.cwrap('UmbraSceneGetConnectionStatus', 'number', ['number']),\n    sceneGetInfo: Module.cwrap('UmbraSceneGetInfo', 'number', ['number', 'number']),\n    sceneSetTransform: Module.cwrap('UmbraSceneSetTransform', null, ['number', 'number']),\n    sceneDestroy: Module.cwrap('UmbraSceneDestroy', null, ['number']),\n    viewCreate: Module.cwrap('UmbraViewCreate', 'number', ['number']),\n    viewUpdateRendering: Module.cwrap('UmbraViewUpdateRendering', null, ['number', 'number', 'number', 'number', 'number', 'number', 'number', 'number']),\n    viewUpdateFilter: Module.cwrap('UmbraViewUpdateFilter', null, ['number', 'number']),\n    viewGetCompleted: Module.cwrap('UmbraViewGetCompleted', 'number', ['number']),\n    viewNextRenderables: Module.cwrap('UmbraViewNextRenderables', 'number', ['number', 'number', 'number']),\n    viewResetRenderables: Module.cwrap('UmbraViewResetRenderables', null, ['number']),\n    viewDestroy: Module.cwrap('UmbraViewDestroy', null, ['number']),\n    viewRayQuery: Module.cwrap('UmbraViewRayQuery', 'number', ['number', 'number', 'number', 'number', 'number', 'number']),\n    sceneCopyCreate: Module.cwrap('UmbraSceneCopyCreate', 'number', ['number', 'number', 'number', 'number', 'number']),\n    sceneCopyGetStatus: Module.cwrap('UmbraSceneCopyGetStatus', 'number', ['number', 'number']),\n    sceneCopyGetError: Module.cwrap('UmbraSceneCopyGetError', 'string', ['number']),\n    sceneCopyDestroy: Module.cwrap('UmbraSceneCopyDestroy', null, ['number']),\n    vertexAttributeGetElementByteSize: Module.cwrap('UmbraVertexAttributeGetElementByteSize', 'number', ['number']),\n    runtimeNextAssetLoad: Module.cwrap('UmbraRuntimeNextAssetLoad', 'number', ['number']),\n    assetLoadGetType: Module.cwrap('UmbraAssetLoadGetType', 'number', ['number']),\n    assetLoadPrepare: Module.cwrap('UmbraAssetLoadPrepare', null, ['number', 'number']),\n    assetLoadAbortRequested: Module.cwrap('UmbraAssetLoadAbortRequested', 'number', ['number']),\n    assetLoadFinish: Module.cwrap('UmbraAssetLoadFinish', null, ['number', 'number']),\n    meshLoadFinishExternal: Module.cwrap('UmbraMeshLoadFinishExternal', null, ['number', 'number', 'number', 'number']),\n    meshLoadGetInfo: Module.cwrap('UmbraMeshLoadGetInfo', null, ['number', 'number']),\n    meshLoadGetData: Module.cwrap('UmbraMeshLoadGetData', 'number', ['number', 'number', 'number']),\n    meshStreamSetBuffers: Module.cwrap('UmbraMeshStreamSetBuffers', 'number', ['number', 'number', 'number']),\n    meshStreamNext: Module.cwrap('UmbraMeshStreamNext', 'number', ['number', 'number', 'number']),\n    meshStreamDone: Module.cwrap('UmbraMeshStreamDone', 'number', ['number']),\n    meshLoadGetSerializedSize: Module.cwrap('UmbraMeshLoadGetSerializedSize', 'number', ['number']),\n    textureGetMipmapLevelByteSize: Module.cwrap('UmbraTextureGetMipmapLevelByteSize', 'number', ['number', 'number']),\n    textureGetMipmapLevelOffset: Module.cwrap('UmbraTextureGetMipmapLevelOffset', 'number', ['number', 'number']),\n    textureLoadGetInfo: Module.cwrap('UmbraTextureLoadGetInfo', null, ['number', 'number']),\n    textureLoadGetData: Module.cwrap('UmbraTextureLoadGetData', 'number', ['number', 'number']),\n    textureLoadGetSerializedSize: Module.cwrap('UmbraTextureLoadGetSerializedSize', 'number', ['number']),\n    textureMetaDataLoadGetData: Module.cwrap('UmbraTextureMetaDataLoadGetData', 'number', ['number', 'number']),\n    textureMetaDataGetClassificationCount: Module.cwrap('UmbraTextureMetaDataGetClassificationCount', 'number', ['number', 'number']),\n    textureMetaDataGetClassification: Module.cwrap('UmbraTextureMetaDataGetClassification', 'number', ['number', 'number', 'number']),\n    textureMetaDataGetClassificationAmount: Module.cwrap('UmbraTextureMetaDataGetClassificationAmount', 'number', ['number', 'number', 'number']),\n    materialLoadGetInfo: Module.cwrap('UmbraMaterialLoadGetInfo', null, ['number', 'number']),\n    runtimeNextAssetUnload: Module.cwrap('UmbraRuntimeNextAssetUnload', 'number', ['number']),\n    assetUnloadGetType: Module.cwrap('UmbraAssetUnloadGetType', 'number', ['number']),\n    assetUnloadGetUserPointer: Module.cwrap('UmbraAssetUnloadGetUserPointer', 'number', ['number']),\n    assetUnloadFinish: Module.cwrap('UmbraAssetUnloadFinish', null, ['number']),\n    sendInternalMessage: Module.cwrap('UmbraSendInternalMessage', 'number', ['number', 'number'])\n  });\n}\n\n// Generated at 2020-07-14 16:33:24\nvar MatrixFormat$1;\n\n(function (MatrixFormat) {\n  MatrixFormat[MatrixFormat[\"ColumnMajor\"] = 0] = \"ColumnMajor\";\n  MatrixFormat[MatrixFormat[\"RowMajor\"] = 1] = \"RowMajor\";\n  MatrixFormat[MatrixFormat[\"Count\"] = 2] = \"Count\";\n})(MatrixFormat$1 || (MatrixFormat$1 = {}));\n\nvar TextureType$1;\n\n(function (TextureType) {\n  TextureType[TextureType[\"Diffuse\"] = 0] = \"Diffuse\";\n  TextureType[TextureType[\"Normal\"] = 1] = \"Normal\";\n  TextureType[TextureType[\"Specular\"] = 2] = \"Specular\";\n  TextureType[TextureType[\"MetaIndex\"] = 3] = \"MetaIndex\";\n  TextureType[TextureType[\"Count\"] = 4] = \"Count\";\n})(TextureType$1 || (TextureType$1 = {}));\n\nvar TextureFormat$1;\n\n(function (TextureFormat) {\n  TextureFormat[TextureFormat[\"RGBA32\"] = 0] = \"RGBA32\";\n  TextureFormat[TextureFormat[\"RGB24\"] = 1] = \"RGB24\";\n  TextureFormat[TextureFormat[\"BC1\"] = 2] = \"BC1\";\n  TextureFormat[TextureFormat[\"BC3\"] = 3] = \"BC3\";\n  TextureFormat[TextureFormat[\"BC4\"] = 4] = \"BC4\";\n  TextureFormat[TextureFormat[\"BC5\"] = 5] = \"BC5\";\n  TextureFormat[TextureFormat[\"ETC1_RGB\"] = 6] = \"ETC1_RGB\";\n  TextureFormat[TextureFormat[\"RGBA_FLOAT32\"] = 7] = \"RGBA_FLOAT32\";\n  TextureFormat[TextureFormat[\"UNC1\"] = 8] = \"UNC1\";\n  TextureFormat[TextureFormat[\"JPEG\"] = 9] = \"JPEG\";\n  TextureFormat[TextureFormat[\"PNG\"] = 10] = \"PNG\";\n  TextureFormat[TextureFormat[\"BMP\"] = 11] = \"BMP\";\n  TextureFormat[TextureFormat[\"PSD\"] = 12] = \"PSD\";\n  TextureFormat[TextureFormat[\"TGA\"] = 13] = \"TGA\";\n  TextureFormat[TextureFormat[\"GIF\"] = 14] = \"GIF\";\n  TextureFormat[TextureFormat[\"HDR\"] = 15] = \"HDR\";\n  TextureFormat[TextureFormat[\"PIC\"] = 16] = \"PIC\";\n  TextureFormat[TextureFormat[\"PNM\"] = 17] = \"PNM\";\n  TextureFormat[TextureFormat[\"ASTC_4X4\"] = 18] = \"ASTC_4X4\";\n  TextureFormat[TextureFormat[\"ASTC_5X4\"] = 19] = \"ASTC_5X4\";\n  TextureFormat[TextureFormat[\"ASTC_5X5\"] = 20] = \"ASTC_5X5\";\n  TextureFormat[TextureFormat[\"ASTC_6X5\"] = 21] = \"ASTC_6X5\";\n  TextureFormat[TextureFormat[\"ASTC_6X6\"] = 22] = \"ASTC_6X6\";\n  TextureFormat[TextureFormat[\"ASTC_8X5\"] = 23] = \"ASTC_8X5\";\n  TextureFormat[TextureFormat[\"ASTC_8X6\"] = 24] = \"ASTC_8X6\";\n  TextureFormat[TextureFormat[\"ASTC_10X5\"] = 25] = \"ASTC_10X5\";\n  TextureFormat[TextureFormat[\"ASTC_10X6\"] = 26] = \"ASTC_10X6\";\n  TextureFormat[TextureFormat[\"ASTC_8X8\"] = 27] = \"ASTC_8X8\";\n  TextureFormat[TextureFormat[\"ASTC_10X8\"] = 28] = \"ASTC_10X8\";\n  TextureFormat[TextureFormat[\"ASTC_10X10\"] = 29] = \"ASTC_10X10\";\n  TextureFormat[TextureFormat[\"ASTC_12X10\"] = 30] = \"ASTC_12X10\";\n  TextureFormat[TextureFormat[\"ASTC_12X12\"] = 31] = \"ASTC_12X12\";\n  TextureFormat[TextureFormat[\"ARGB32\"] = 32] = \"ARGB32\";\n  TextureFormat[TextureFormat[\"R8\"] = 33] = \"R8\";\n  TextureFormat[TextureFormat[\"PVRTC1_RGB4\"] = 34] = \"PVRTC1_RGB4\";\n  TextureFormat[TextureFormat[\"PVRTC1_RGBA4\"] = 35] = \"PVRTC1_RGBA4\";\n  TextureFormat[TextureFormat[\"UINT8\"] = 36] = \"UINT8\";\n  TextureFormat[TextureFormat[\"UINT16\"] = 37] = \"UINT16\";\n  TextureFormat[TextureFormat[\"UINT32\"] = 38] = \"UINT32\";\n  TextureFormat[TextureFormat[\"RGB565\"] = 39] = \"RGB565\";\n  TextureFormat[TextureFormat[\"RG8\"] = 40] = \"RG8\";\n  TextureFormat[TextureFormat[\"RG16F\"] = 41] = \"RG16F\";\n  TextureFormat[TextureFormat[\"OPENEXR\"] = 42] = \"OPENEXR\";\n  TextureFormat[TextureFormat[\"RGBA_FLOAT16\"] = 43] = \"RGBA_FLOAT16\";\n  TextureFormat[TextureFormat[\"RGB_FLOAT16\"] = 44] = \"RGB_FLOAT16\";\n  TextureFormat[TextureFormat[\"RGB_FLOAT32\"] = 45] = \"RGB_FLOAT32\";\n  TextureFormat[TextureFormat[\"Count\"] = 46] = \"Count\";\n})(TextureFormat$1 || (TextureFormat$1 = {}));\n\nvar ColorSpace$1;\n\n(function (ColorSpace) {\n  ColorSpace[ColorSpace[\"Linear\"] = 0] = \"Linear\";\n  ColorSpace[ColorSpace[\"SRGB\"] = 1] = \"SRGB\";\n  ColorSpace[ColorSpace[\"Count\"] = 2] = \"Count\";\n})(ColorSpace$1 || (ColorSpace$1 = {}));\n\nvar VertexAttribute$1;\n\n(function (VertexAttribute) {\n  VertexAttribute[VertexAttribute[\"Position\"] = 0] = \"Position\";\n  VertexAttribute[VertexAttribute[\"TextureCoordinate\"] = 1] = \"TextureCoordinate\";\n  VertexAttribute[VertexAttribute[\"Normal\"] = 2] = \"Normal\";\n  VertexAttribute[VertexAttribute[\"Tangent\"] = 3] = \"Tangent\";\n  VertexAttribute[VertexAttribute[\"Count\"] = 4] = \"Count\";\n})(VertexAttribute$1 || (VertexAttribute$1 = {}));\n\nvar BufferFlags$1;\n\n(function (BufferFlags) {\n  BufferFlags[BufferFlags[\"UncachedMemory\"] = 1] = \"UncachedMemory\";\n})(BufferFlags$1 || (BufferFlags$1 = {}));\n\nvar LogLevel$1;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\n  LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n  LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\n  LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n  LogLevel[LogLevel[\"Count\"] = 4] = \"Count\";\n})(LogLevel$1 || (LogLevel$1 = {}));\n\nvar TransferStatus$1;\n\n(function (TransferStatus) {\n  TransferStatus[TransferStatus[\"Inactive\"] = 0] = \"Inactive\";\n  TransferStatus[TransferStatus[\"Active\"] = 1] = \"Active\";\n  TransferStatus[TransferStatus[\"Complete\"] = 2] = \"Complete\";\n  TransferStatus[TransferStatus[\"Error\"] = 3] = \"Error\";\n  TransferStatus[TransferStatus[\"Count\"] = 4] = \"Count\";\n})(TransferStatus$1 || (TransferStatus$1 = {}));\n\nvar HeaderError$1;\n\n(function (HeaderError) {\n  HeaderError[HeaderError[\"Found\"] = 0] = \"Found\";\n  HeaderError[HeaderError[\"Not_Found\"] = 1] = \"Not_Found\";\n  HeaderError[HeaderError[\"Transfer_Not_Complete\"] = 2] = \"Transfer_Not_Complete\";\n  HeaderError[HeaderError[\"Buffer_Too_Small\"] = 3] = \"Buffer_Too_Small\";\n  HeaderError[HeaderError[\"Count\"] = 4] = \"Count\";\n})(HeaderError$1 || (HeaderError$1 = {}));\n\nvar HttpMethod$1;\n\n(function (HttpMethod) {\n  HttpMethod[HttpMethod[\"Get\"] = 0] = \"Get\";\n  HttpMethod[HttpMethod[\"Post\"] = 1] = \"Post\";\n  HttpMethod[HttpMethod[\"Put\"] = 2] = \"Put\";\n  HttpMethod[HttpMethod[\"Delete\"] = 3] = \"Delete\";\n  HttpMethod[HttpMethod[\"Count\"] = 4] = \"Count\";\n})(HttpMethod$1 || (HttpMethod$1 = {}));\n\nvar LibraryInfo$1;\n\n(function (LibraryInfo) {\n  LibraryInfo[LibraryInfo[\"Version\"] = 0] = \"Version\";\n  LibraryInfo[LibraryInfo[\"Copyright\"] = 1] = \"Copyright\";\n  LibraryInfo[LibraryInfo[\"BuildTime\"] = 2] = \"BuildTime\";\n  LibraryInfo[LibraryInfo[\"BuildId\"] = 3] = \"BuildId\";\n  LibraryInfo[LibraryInfo[\"Count\"] = 4] = \"Count\";\n})(LibraryInfo$1 || (LibraryInfo$1 = {}));\n\nvar InvalidUserPointer$1;\n\n(function (InvalidUserPointer) {\n  InvalidUserPointer[InvalidUserPointer[\"InvalidUserPointer\"] = 0] = \"InvalidUserPointer\";\n})(InvalidUserPointer$1 || (InvalidUserPointer$1 = {}));\n\nvar TextureSupportFlags$1;\n\n(function (TextureSupportFlags) {\n  TextureSupportFlags[TextureSupportFlags[\"None\"] = 0] = \"None\";\n  TextureSupportFlags[TextureSupportFlags[\"BC1\"] = 1] = \"BC1\";\n  TextureSupportFlags[TextureSupportFlags[\"BC2\"] = 2] = \"BC2\";\n  TextureSupportFlags[TextureSupportFlags[\"BC3\"] = 4] = \"BC3\";\n  TextureSupportFlags[TextureSupportFlags[\"BC4\"] = 8] = \"BC4\";\n  TextureSupportFlags[TextureSupportFlags[\"BC5\"] = 16] = \"BC5\";\n  TextureSupportFlags[TextureSupportFlags[\"BC6H\"] = 32] = \"BC6H\";\n  TextureSupportFlags[TextureSupportFlags[\"BC7\"] = 64] = \"BC7\";\n  TextureSupportFlags[TextureSupportFlags[\"ASTC\"] = 128] = \"ASTC\";\n  TextureSupportFlags[TextureSupportFlags[\"ETC1\"] = 256] = \"ETC1\";\n  TextureSupportFlags[TextureSupportFlags[\"ETC2\"] = 512] = \"ETC2\";\n  TextureSupportFlags[TextureSupportFlags[\"EAC_R\"] = 1024] = \"EAC_R\";\n  TextureSupportFlags[TextureSupportFlags[\"EAC_RG\"] = 2048] = \"EAC_RG\";\n  TextureSupportFlags[TextureSupportFlags[\"PVRTC1\"] = 4096] = \"PVRTC1\";\n  TextureSupportFlags[TextureSupportFlags[\"PVRTC2\"] = 8192] = \"PVRTC2\";\n  TextureSupportFlags[TextureSupportFlags[\"ATC\"] = 16384] = \"ATC\";\n  TextureSupportFlags[TextureSupportFlags[\"HalfFloat\"] = 32768] = \"HalfFloat\";\n  TextureSupportFlags[TextureSupportFlags[\"Float\"] = 65536] = \"Float\";\n  TextureSupportFlags[TextureSupportFlags[\"All\"] = 2147483647] = \"All\";\n})(TextureSupportFlags$1 || (TextureSupportFlags$1 = {}));\n\nvar RuntimeFlags$1;\n\n(function (RuntimeFlags) {\n  RuntimeFlags[RuntimeFlags[\"NeverUnload\"] = 1] = \"NeverUnload\";\n  RuntimeFlags[RuntimeFlags[\"ExclusiveRendering\"] = 2] = \"ExclusiveRendering\";\n  RuntimeFlags[RuntimeFlags[\"EnableRayQueries\"] = 4] = \"EnableRayQueries\";\n})(RuntimeFlags$1 || (RuntimeFlags$1 = {}));\n\nvar ConnectionStatus$1;\n\n(function (ConnectionStatus) {\n  ConnectionStatus[ConnectionStatus[\"Connected\"] = 0] = \"Connected\";\n  ConnectionStatus[ConnectionStatus[\"Connecting\"] = 1] = \"Connecting\";\n  ConnectionStatus[ConnectionStatus[\"ConnectionError\"] = 2] = \"ConnectionError\";\n  ConnectionStatus[ConnectionStatus[\"Count\"] = 3] = \"Count\";\n})(ConnectionStatus$1 || (ConnectionStatus$1 = {}));\n\nvar DepthRange$1;\n\n(function (DepthRange) {\n  DepthRange[DepthRange[\"ZeroToOne\"] = 0] = \"ZeroToOne\";\n  DepthRange[DepthRange[\"MinusOneToOne\"] = 1] = \"MinusOneToOne\";\n  DepthRange[DepthRange[\"Count\"] = 2] = \"Count\";\n})(DepthRange$1 || (DepthRange$1 = {}));\n\nvar FilterShapeType$1;\n\n(function (FilterShapeType) {\n  FilterShapeType[FilterShapeType[\"Sphere\"] = 0] = \"Sphere\";\n  FilterShapeType[FilterShapeType[\"Cylinder\"] = 1] = \"Cylinder\";\n  FilterShapeType[FilterShapeType[\"None\"] = 2] = \"None\";\n  FilterShapeType[FilterShapeType[\"Count\"] = 3] = \"Count\";\n})(FilterShapeType$1 || (FilterShapeType$1 = {}));\n\nvar SceneCopyStatus$1;\n\n(function (SceneCopyStatus) {\n  SceneCopyStatus[SceneCopyStatus[\"InProgress\"] = 0] = \"InProgress\";\n  SceneCopyStatus[SceneCopyStatus[\"Done\"] = 1] = \"Done\";\n  SceneCopyStatus[SceneCopyStatus[\"Error\"] = 2] = \"Error\";\n  SceneCopyStatus[SceneCopyStatus[\"Count\"] = 3] = \"Count\";\n})(SceneCopyStatus$1 || (SceneCopyStatus$1 = {}));\n\nvar SceneCopyDestinationType$1;\n\n(function (SceneCopyDestinationType) {\n  SceneCopyDestinationType[SceneCopyDestinationType[\"File\"] = 0] = \"File\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Directory\"] = 1] = \"Directory\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Cloud\"] = 2] = \"Cloud\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"FormatObj\"] = 3] = \"FormatObj\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Count\"] = 4] = \"Count\";\n})(SceneCopyDestinationType$1 || (SceneCopyDestinationType$1 = {}));\n\nvar SceneCopySourceType$1;\n\n(function (SceneCopySourceType) {\n  SceneCopySourceType[SceneCopySourceType[\"Directory\"] = 0] = \"Directory\";\n  SceneCopySourceType[SceneCopySourceType[\"Cloud\"] = 1] = \"Cloud\";\n  SceneCopySourceType[SceneCopySourceType[\"Count\"] = 2] = \"Count\";\n})(SceneCopySourceType$1 || (SceneCopySourceType$1 = {}));\n\nvar AssetType$1;\n\n(function (AssetType) {\n  AssetType[AssetType[\"Material\"] = 0] = \"Material\";\n  AssetType[AssetType[\"Texture\"] = 1] = \"Texture\";\n  AssetType[AssetType[\"Mesh\"] = 2] = \"Mesh\";\n  AssetType[AssetType[\"Count\"] = 3] = \"Count\";\n})(AssetType$1 || (AssetType$1 = {}));\n\nvar AssetLoadResult$1;\n\n(function (AssetLoadResult) {\n  AssetLoadResult[AssetLoadResult[\"Failure\"] = 0] = \"Failure\";\n  AssetLoadResult[AssetLoadResult[\"OutOfMemory\"] = 1] = \"OutOfMemory\";\n  AssetLoadResult[AssetLoadResult[\"Aborted\"] = 2] = \"Aborted\";\n  AssetLoadResult[AssetLoadResult[\"Success\"] = 3] = \"Success\";\n  AssetLoadResult[AssetLoadResult[\"Count\"] = 4] = \"Count\";\n})(AssetLoadResult$1 || (AssetLoadResult$1 = {}));\n\nvar RayQueryFlags$1;\n\n(function (RayQueryFlags) {\n  RayQueryFlags[RayQueryFlags[\"BackfaceCulling\"] = 1] = \"BackfaceCulling\";\n})(RayQueryFlags$1 || (RayQueryFlags$1 = {}));\n\n\n\nvar _Math = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\n/**\r\n * Returns a library instance that uses the Emscripten resources of \"Module\".\r\n */\n\nfunction instantiate(Module, config) {\n  var lib = {};\n  /**\r\n   * Queries supported texture formats and also enables the relevant WebGL extensions.\r\n   */\n\n  lib.getPlatformFeatures = function (gl) {\n    var flags = 0; // We accumulate a texture format bitmask here\n\n    var formats = new Set(); // Will hold all supported format names\n\n    var supportsSRGB = false;\n    var supportsHalfFloat = false;\n    /**\r\n     * We fetch all extension strings and strip off possible vendor prefixes of WEBGL\r\n     * extensions. However, when we enable the extension we need the original full string.\r\n     * Here 'extStrings' holds a mapping from a shortened to a full extension string.\r\n     */\n\n    var extStrings = new Map([]); // Full strings\n\n    var extNames = []; // Shortened strings\n\n    var allExtensions = gl.getSupportedExtensions();\n\n    for (var full of allExtensions) {\n      var shortened = full.replace(/^(.*)_WEBGL_/, 'WEBGL_');\n      extStrings.set(shortened, full);\n      extNames.push(shortened);\n    }\n\n    var mapping = new Map([['WEBGL_compressed_texture_s3tc', {\n      mask: TextureSupportFlags.BC1 | TextureSupportFlags.BC2 | TextureSupportFlags.BC3,\n      names: ['bc1', 'bc2', 'bc3']\n    }], ['WEBGL_compressed_texture_s3tc_srgb', {\n      mask: TextureSupportFlags.BC1 | TextureSupportFlags.BC2 | TextureSupportFlags.BC3,\n      names: ['bc1', 'bc2', 'bc3']\n    }], ['WEBGL_compressed_texture_rgtc', {\n      mask: TextureSupportFlags.BC4 | TextureSupportFlags.BC5,\n      names: ['bc4', 'bc5']\n    }], ['WEBGL_compressed_texture_pvrtc', {\n      mask: TextureSupportFlags.PVRTC1,\n      names: ['pvrtc1_rgb4', 'pvrtc1_rgba4']\n    }], ['WEBGL_compressed_texture_etc1', {\n      mask: TextureSupportFlags.ETC1,\n      names: ['etc1_rgb']\n    }], ['WEBGL_compressed_texture_astc', {\n      mask: TextureSupportFlags.ASTC,\n      names: ['astc_4x4']\n    }]]);\n\n    for (var key of mapping.keys()) {\n      if (extNames.includes(key)) {\n        gl.getExtension(extStrings.get(key));\n        var value = mapping.get(key);\n        flags |= value.mask;\n        value.names.forEach(function (name) {\n          return formats.add(name);\n        });\n      }\n    }\n\n    if (extNames.includes('WEBGL_compressed_texture_s3tc_srgb')) {\n      supportsSRGB = true;\n    }\n\n    if (extNames.includes('EXT_sRGB')) {\n      gl.getExtension(extStrings.get('EXT_sRGB'));\n      supportsSRGB = true;\n    }\n\n    if (extNames.includes('OES_texture_half_float')) {\n      gl.getExtension(extStrings.get('OES_texture_half_float'));\n      supportsHalfFloat = true;\n    }\n\n    return {\n      textureSupportMask: flags,\n      formats: _toConsumableArray(formats),\n      srgb: supportsSRGB,\n      halfFloat: supportsHalfFloat\n    };\n  }; // Access to the Emscripten module is needed for deinitialization\n\n\n  lib.nativeModule = Module;\n  lib.nativeModule['umbraLibraryConfig'] = config; // Allow access to Runtime class\n\n  lib.createRuntime = create(Module).createRuntime;\n\n  lib.getStreamingInfo = function () {\n    return {\n      minBytesDownloaded: lib.nativeModule.minBytesDownloaded,\n      maxBytesDownloaded: lib.nativeModule.maxBytesDownloaded\n    };\n  };\n\n  lib.getLibraryInfo = function () {\n    return {\n      version: Module.getLibraryInfo(LibraryInfo.Version),\n      copyright: Module.getLibraryInfo(LibraryInfo.Copyright),\n      buildTime: Module.getLibraryInfo(LibraryInfo.BuildTime),\n      buildID: Module.getLibraryInfo(LibraryInfo.BuildId)\n    };\n  };\n\n  lib.abortDownloads = function () {\n    Object.values(Module.wgetRequests).forEach(function (req) {\n      req.abort();\n    });\n  };\n\n  return lib;\n}\n/**\r\n * Compiles the WebAssembly and code and initializes the Emscripten environment.\r\n * Returns a Promise that resolves with the library instance ready for use.\r\n */\n\n\nvar initUmbra = function initUmbra(config) {\n  var defaults = {\n    wasmURL: ''\n  };\n  config = Object.assign(defaults, config);\n  return new Promise(function (resolve, reject) {\n    try {\n      var redirectWasmURL = function redirectWasmURL(path, prefix) {\n        // The main WASM file's URL must be changed here because it's loaded during startup\n        // using Emscripten's \"locateFile()\" API.\n        if (path.endsWith('umbra.wasm') && config.wasmURL !== '') {\n          return config.wasmURL;\n        }\n\n        return prefix + path;\n      };\n\n      UmbraNativeAPI({\n        locateFile: redirectWasmURL\n      }).then(function (Module) {\n        // A workaround for https://github.com/emscripten-core/emscripten/issues/5820\n        delete Module['then'];\n\n        Module['onAbort'] = function (what) {\n          reject(what);\n        };\n\n        wrapNativeFunctions(Module);\n        resolve(instantiate(Module, config));\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n};\n/**\r\n * Deinitializes the Emscripten environment.\r\n *\r\n * NOTE: We assume here that async IndexedDB loads and stores have already finished.\r\n * This is the case if Umbra.update() was *not* called before deinitUmbra() on the\r\n * same frame.\r\n */\n\nvar deinitUmbra = function deinitUmbra(Umbra) {\n  // Pending requests must be aborted so that native handlers won't get called\n  Umbra.abortDownloads();\n  var privateUmbra = Umbra; // Emscripten's exit(0) call throws an ExitStatus exception\n\n  try {\n    privateUmbra.nativeModule._exit(0);\n  } catch (e) {\n    if (e.name !== 'ExitStatus') {\n      throw e;\n    }\n  }\n};\n\nexport { Assets, ColorSpace, ConnectionStatus, DepthRange, LibraryInfo$1 as LibraryInfo, _Math as Math, MatrixFormat, TextureFormat, TextureSupportFlags, TextureType, deinitUmbra, initUmbra };\n//# sourceMappingURL=umbra.esm.js.map\n","/* eslint  @typescript-eslint/camelcase: 0 */\r\n\r\nimport * as THREE from './ThreeWrapper'\r\nimport { TextureFormat } from '@umbra3d/umbrajs'\r\n\r\nfunction makeFormat(format, type, compressed) {\r\n  return { format, type, compressed }\r\n}\r\n\r\n// prettier-ignore\r\nconst ThreeFormats = {\r\n  [TextureFormat.RGB24]: makeFormat(THREE.RGBFormat, THREE.UnsignedByteType, false),\r\n  [TextureFormat.RGBA32]: makeFormat(THREE.RGBAFormat, THREE.UnsignedByteType, false),\r\n  [TextureFormat.RGB565]: makeFormat(THREE.RGBFormat, THREE.UnsignedShort565Type, false),\r\n  [TextureFormat.RG8]: makeFormat(THREE.LuminanceAlphaFormat, THREE.UnsignedByteType, false),\r\n  [TextureFormat.RG16F]: makeFormat(THREE.LuminanceAlphaFormat, THREE.HalfFloatType, false),\r\n  [TextureFormat.BC1]: makeFormat(THREE.RGBA_S3TC_DXT1_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.BC3]: makeFormat(THREE.RGBA_S3TC_DXT5_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.ETC1_RGB]: makeFormat(THREE.RGB_ETC1_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.ASTC_4X4]: makeFormat(THREE.RGBA_ASTC_4x4_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.PVRTC1_RGB4]: makeFormat(THREE.RGB_PVRTC_4BPPV1_Format, THREE.UnsignedByteType, true),\r\n}\r\n\r\nexport { ThreeFormats }\r\n","const normalmapChunk = `\r\n#ifdef USE_NORMALMAP\r\n#ifdef USE_TANGENT\r\n\r\nvec3 tangentToWorld2 = normal;\r\nvec3 tangentToWorld0 = normalize(tangent - tangentToWorld2 * dot(tangentToWorld2, tangent));\r\n\r\n#ifdef UMBRA_FLIP_TANGENT\r\nvec3 tangentToWorld1 = normalize(cross(tangentToWorld0, tangentToWorld2));\r\n#else\r\nvec3 tangentToWorld1 = normalize(cross(tangentToWorld2, tangentToWorld0));\r\n#endif\r\n\r\n#if defined(UMBRA_TEXTURE_SUPPORT_BC5) || defined(UMBRA_TEXTURE_SUPPORT_ASTC)\r\nnormal.xy = texture2D(normalMap, vUv).xy * 2.0 - 1.0;\r\nnormal.z = sqrt(1.0 - clamp(dot(normal.xy, normal.xy), 0.0, 1.0));\r\n#elif defined(UMBRA_TEXTURE_SUPPORT_BC3)\r\nnormal.xy = texture2D(normalMap, vUv).yw * 2.0 - 1.0;\r\nnormal.z = sqrt(1.0 - clamp(dot(normal.xy, normal.xy), 0.0, 1.0));\r\n#else\r\nnormal.xyz = texture2D(normalMap, vUv).xyz;\r\nnormal.xy *= 2.0;\r\nnormal.xy -= 1.0;\r\nnormal = normalize(normal);\r\n#endif\r\n\r\nnormal = tangentToWorld0 * normal.x + tangentToWorld1 * normal.y + tangentToWorld2 * normal.z;\r\nnormal = normalize(normal);\r\n#endif\r\n#endif\r\n\r\n`\r\n\r\nconst metalnessMapChunk = `\r\nfloat metalnessFactor = metalness;\r\n#ifdef USE_METALNESSMAP\r\nvec4 texelMetalness = texture2D( metalnessMap, vUv );\r\nmetalnessFactor *= texelMetalness.r;\r\n#endif\r\n`\r\n\r\n// The BSDF function (see 'bsdfs.glsl') squares the roughness so we don't need to do it here.\r\nconst roughnessMapChunk = `\r\nfloat roughnessFactor = roughness;\r\n#ifdef USE_ROUGHNESSMAP\r\nvec4 texelRoughness = texture2D( roughnessMap, vUv );\r\nfloat roughness = 1.0 - texelRoughness.g;\r\nroughnessFactor *= roughness;\r\n#endif\r\n`\r\n\r\n/**\r\n * ShaderPatcher is a preprocessor class that replaces the default PBR texture read\r\n * shader chunks with the correct Umbra versions. Doing it this way instead of completely\r\n * custom shaders allows the application to use its own materials with Umbra scenes.\r\n */\r\nclass ShaderPatcher {\r\n  flipTangent: boolean\r\n  defines: string\r\n\r\n  constructor(formats: string[]) {\r\n    /*\r\n     * World space transform can swap handedness which isn't handled by three.js in tangent space\r\n     * normal maps so we need to be able to flip them ourselves.\r\n     */\r\n    this.flipTangent = false\r\n\r\n    // Texture format feature flags\r\n    this.defines = ''\r\n\r\n    if (formats.indexOf('bc3') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_BC3\\n'\r\n    }\r\n    if (formats.indexOf('bc5') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_BC5\\n'\r\n    }\r\n    if (formats.indexOf('astc_4x4') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_ASTC\\n'\r\n    }\r\n  }\r\n\r\n  process(shader: THREE.Shader, renderer: THREE.WebGLRenderer) {\r\n    let frag = shader.fragmentShader\r\n\r\n    if (this.flipTangent) {\r\n      frag = '#define UMBRA_FLIP_TANGENT\\n' + frag\r\n    }\r\n\r\n    frag = this.defines + frag\r\n    frag = frag.replace('#include <normal_fragment_maps>', normalmapChunk)\r\n    frag = frag.replace('#include <metalnessmap_fragment>', metalnessMapChunk)\r\n    frag = frag.replace('#include <roughnessmap_fragment>', roughnessMapChunk)\r\n\r\n    shader.fragmentShader = frag\r\n  }\r\n}\r\n\r\nexport { ShaderPatcher }\r\n","export class ObjectPool<T> {\r\n  usedList: Array<T> = []\r\n  freeList: Array<T> = []\r\n\r\n  // Tries to find an object matching \"predicate\", if any given.\r\n  // Constructs a new object with \"makeFunc\" if none were found.\r\n  allocate(makeFunc: () => T, predicate?: (x: T) => boolean) {\r\n    let obj: T\r\n\r\n    if (this.freeList.length > 0) {\r\n      // If no predicate given we always take the last one\r\n      if (typeof predicate === 'undefined') {\r\n        obj = this.freeList.pop()\r\n      } else {\r\n        for (let i = 0; i < this.freeList.length; i++) {\r\n          const elem: T = this.freeList[i]\r\n          if (predicate(elem)) {\r\n            obj = elem\r\n            this.freeList.splice(i, 1)\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!obj) {\r\n      obj = makeFunc()\r\n    }\r\n\r\n    this.usedList.push(obj)\r\n    return obj\r\n  }\r\n\r\n  freeAll(clearFunc?: (obj: T) => void) {\r\n    for (let i = 0; i < this.usedList.length; i++) {\r\n      if (clearFunc) {\r\n        clearFunc(this.usedList[i])\r\n      }\r\n      this.freeList.push(this.usedList[i])\r\n    }\r\n    this.usedList.length = 0\r\n  }\r\n\r\n  clear() {\r\n    this.usedList.length = 0\r\n    this.freeList.length = 0\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\n\r\nimport {\r\n  TextureType,\r\n  PlatformFeatures,\r\n  Runtime,\r\n  NativeScene,\r\n  View,\r\n  Renderable,\r\n  ConnectionStatus,\r\n} from '@umbra3d/umbrajs'\r\nimport { SharedFrameState } from './SharedFrameState'\r\nimport { PublicLink } from './PublicLink'\r\nimport { ShaderPatcher } from './ShaderPatcher'\r\nimport { ObjectPool } from './ObjectPool'\r\n\r\nexport interface SceneFactory {\r\n  createScene(link: string | PublicLink): UmbraScene\r\n  createSceneWithURL(url: string): UmbraScene\r\n}\r\n\r\ntype UmbraMesh = THREE.Mesh & { isUmbraMesh: true }\r\n\r\ninterface SceneStatus {\r\n  connected: boolean\r\n  sceneInfo?\r\n  numVisible: number\r\n  numShadowCasters: number\r\n  numCachedMaterials: number\r\n  numAssets: number\r\n}\r\n\r\n/**\r\n * A wrapper type for mesh geometry and its material. Only UmbraScene instantiates the\r\n * THREE.Mesh objects that are passed to the renderer. UmbraScene also creates the final\r\n * THREE.Material instance using the textures and transparency flag in 'materialDesc'\r\n */\r\nexport interface MeshDescriptor {\r\n  geometry\r\n  materialDesc\r\n}\r\n\r\ntype DisposeCallback = (m: UmbraScene) => void\r\n\r\nexport class UmbraScene extends THREE.Object3D {\r\n  // User editable config\r\n  material: THREE.Material = new THREE.MeshBasicMaterial()\r\n  wireframe = false\r\n  freeze = false\r\n\r\n  // Event callbacks\r\n  onConnected: () => void\r\n  onConnectionError: (error: string) => void\r\n  onDisconnected: () => void\r\n  onConnectionChanged: (connected: ConnectionStatus) => void\r\n  onMeshChanged: () => void\r\n\r\n  // We need to present ourselves as a LOD object to get the update() call\r\n  readonly isLOD = true\r\n  readonly autoUpdate = true\r\n  readonly name = 'UmbraScene'\r\n\r\n  set quality(value: number) {\r\n    console.error(`UmbraScene.quality is not supported any more. Use camera.umbraQuality instead.`)\r\n  }\r\n\r\n  private renderer: THREE.WebGLRenderer\r\n\r\n  private materialPool = new ObjectPool<THREE.Material>()\r\n  private shaderPatcher: ShaderPatcher\r\n  private sharedState: SharedFrameState\r\n\r\n  private stats = {\r\n    numVisible: 0,\r\n    numShadowCasters: 0,\r\n    numCachedMaterials: 0,\r\n    numAssets: 0,\r\n  }\r\n\r\n  private diagnostics = {\r\n    missingNormals: {\r\n      checked: false,\r\n      message:\r\n        'Property umbraScene.opaqueMaterial has been deprecated. Use umbraScene.material instead.',\r\n    },\r\n    deprecatedMaterial: {\r\n      checked: false,\r\n      message: 'UmbraScene has no normals so it will appear black.',\r\n    },\r\n    report: (field: string) => {\r\n      if (!this.diagnostics[field].checked) {\r\n        this.diagnostics[field].checked = true\r\n        console.warn(this.diagnostics[field].message)\r\n      }\r\n    },\r\n  }\r\n\r\n  private umbra: {\r\n    runtime: NonNullable<Runtime>\r\n    nativeScene: NonNullable<NativeScene>\r\n  }\r\n\r\n  private onDispose: DisposeCallback\r\n\r\n  // We need to keep track of changes to emit events\r\n  private oldState = {\r\n    status: undefined,\r\n    visibleIDs: new Set<number>(),\r\n  }\r\n\r\n  // UmbraScene should be instantiated using Umbra.createScene()\r\n  constructor(\r\n    runtime: Runtime,\r\n    scene: NativeScene,\r\n    sharedState: SharedFrameState,\r\n    renderer: THREE.WebGLRenderer,\r\n    features: PlatformFeatures,\r\n    onDispose: DisposeCallback = undefined,\r\n  ) {\r\n    super()\r\n\r\n    this.renderer = renderer\r\n    this.sharedState = sharedState\r\n    this.shaderPatcher = new ShaderPatcher(features.formats)\r\n    this.onDispose = onDispose\r\n\r\n    // We need to flip the Z-axis since scenes are stored in \"left-handed Y is up\" coordinate system\r\n    this.scale.set(1.0, 1.0, -1.0)\r\n\r\n    // Add API objects under their own object for clarity\r\n    this.umbra = {\r\n      runtime: runtime,\r\n      nativeScene: scene,\r\n    }\r\n  }\r\n\r\n  get opaqueMaterial() {\r\n    this.diagnostics.report('deprecatedMaterial')\r\n    return this.material\r\n  }\r\n\r\n  set opaqueMaterial(mat) {\r\n    this.diagnostics.report('deprecatedMaterial')\r\n    this.material = mat\r\n  }\r\n\r\n  getInfo(): SceneStatus {\r\n    const info = { connected: this.umbra.nativeScene.isConnected() }\r\n    if (info.connected) {\r\n      info['sceneInfo'] = this.umbra.nativeScene.getInfo()\r\n    }\r\n    Object.assign(info, this.stats)\r\n    return info as SceneStatus\r\n  }\r\n\r\n  getBounds(): THREE.Box3 {\r\n    if (!this.umbra.nativeScene.isConnected()) {\r\n      return undefined\r\n    }\r\n\r\n    const info = this.umbra.nativeScene.getInfo()\r\n    const bounds = info.bounds\r\n    const min = bounds.mn\r\n    const max = bounds.mx\r\n    const box = new THREE.Box3(\r\n      new THREE.Vector3(min[0], min[1], min[2]),\r\n      new THREE.Vector3(max[0], max[1], max[2]),\r\n    )\r\n    return box\r\n  }\r\n\r\n  getCenter(): THREE.Vector3 {\r\n    const bounds = this.getBounds()\r\n    bounds.applyMatrix4(this.matrixWorld)\r\n    const center = new THREE.Vector3()\r\n    bounds.getCenter(center)\r\n    return center\r\n  }\r\n\r\n  private updateStreamingEvents(visibleIDs: Set<number>) {\r\n    const then = this.oldState.visibleIDs\r\n    const now = visibleIDs\r\n\r\n    if (this.onMeshChanged) {\r\n      if (then.size !== now.size) {\r\n        this.onMeshChanged()\r\n      } else {\r\n        for (const id of now) {\r\n          if (!then.has(id)) {\r\n            this.onMeshChanged()\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.oldState.visibleIDs = visibleIDs\r\n  }\r\n\r\n  // This gets called by ThreejsIntegration's periodic update handler\r\n  private updateNetworkEvents() {\r\n    const status = this.umbra.nativeScene.connectionStatus()\r\n\r\n    if (this.oldState.status !== status) {\r\n      if (this.onConnectionChanged) {\r\n        this.onConnectionChanged(status)\r\n      }\r\n\r\n      switch (status) {\r\n        case ConnectionStatus.ConnectionError:\r\n          if (this.onConnectionError) {\r\n            this.onConnectionError('Could not connect')\r\n          }\r\n          break\r\n        case ConnectionStatus.Connected:\r\n          if (this.onConnected) {\r\n            this.onConnected()\r\n          }\r\n          break\r\n        case ConnectionStatus.Connecting:\r\n          if (this.onDisconnected) {\r\n            this.onDisconnected()\r\n          }\r\n          break\r\n      }\r\n    }\r\n\r\n    this.oldState.status = status\r\n  }\r\n\r\n  update = function(camera: THREE.Camera) {\r\n    if (this.freeze) {\r\n      return\r\n    }\r\n\r\n    if (this.umbra.nativeScene.ptr === 0) {\r\n      console.warn('Renderer tried to update a disposed UmbraScene')\r\n      return\r\n    }\r\n\r\n    let view: View = this.sharedState.cameraToView.get(camera)\r\n\r\n    if (!view) {\r\n      view = this.umbra.runtime.createView()\r\n      this.sharedState.cameraToView.set(camera, view)\r\n    }\r\n\r\n    this.sharedState.viewLastUseFrame.set(view, this.renderer.info.render.frame)\r\n\r\n    this.umbra.nativeScene.setTransform(this.matrixWorld.elements)\r\n\r\n    // If we are using a PBR material then we might need to flip the tangent vector\r\n    if (this.isPBREnabled()) {\r\n      // TODO(pvaananen): Would be nice to avoid recalculating the determinant every frame.\r\n      const flip = this.matrixWorld.determinant() < 0\r\n\r\n      if (flip !== this.shaderPatcher.flipTangent) {\r\n        this.shaderPatcher.flipTangent = flip\r\n        this.materialPool.clear()\r\n      }\r\n    }\r\n\r\n    this.stats.numVisible = 0\r\n    this.stats.numAssets = this.umbra.runtime.assets.size\r\n\r\n    /**\r\n     * Next we find the visible Umbra meshes and add them to the scene graph.\r\n     * This is pretty tricky, because we want more meshes to show up in the shadow map pass\r\n     * than in the main camera render pass. This is why 'mesh.castShadow' doesn't help here\r\n     * since it does the exact opposite.\r\n     *\r\n     * We use a workaround that first adds the common meshes as children of the Umbra scene\r\n     * object but stashes the shadow caster meshes (visible only from lights) to an extra\r\n     * list 'shadowCasters'.\r\n     *\r\n     * The trick is that after the children, we add a 'proxy' object that presents itself\r\n     * as a 'LOD' object. As a consequence it gets its own update() call, and there we go\r\n     * and add the shadow casters also to the children list. At this point the opaque\r\n     * renderable objects were already collected to their own render list, so 'children'\r\n     * is safe to modify.\r\n     *\r\n     * In essence, the flow is the following.\r\n     *\r\n     *    three.js                           scene object (this)\r\n     *    --------                           ------------------\r\n     *    Starts traversing three.js scene graph\r\n     *    Calls scene.update(cam) ---------> Updates views\r\n     *                                       Fetches a list of renderables\r\n     *                                       Adds common meshes to this.children\r\n     *    Adds scene.children to\r\n     *      the render list\r\n     *    Starts rendering scene.children\r\n     *    Calls proxy.update(cam) ---------> Proxy goes and adds shadow casters to this.children\r\n     *    Starts the shadow pass\r\n     *    Adds scene.children to shadow\r\n     *      render list\r\n     *    Renders the shadow pass\r\n     *    Renders the opaque pass\r\n     *    Renders the transparent pass\r\n     *\r\n     * As you can see, the 'this.children' list is mutated halfway through the renderer's\r\n     * scene graph traversal so that different object list ends up to the shadow pass render code.\r\n     */\r\n\r\n    // First filter away last frame's meshes\r\n    const newChildren = []\r\n    for (let i = 0; i < this.children.length; i++) {\r\n      if (!this.children[i].isUmbraMesh) {\r\n        newChildren.push(this.children[i])\r\n      }\r\n    }\r\n\r\n    this.children = newChildren\r\n\r\n    const shadowCasters = []\r\n\r\n    const proxy = new THREE.Object3D() as any\r\n    proxy.isLOD = true\r\n    proxy.autoUpdate = true\r\n    proxy.update = cam => {\r\n      // Remove the proxy itself\r\n      this.children.pop()\r\n\r\n      // Add the shadow casters\r\n      for (let i = 0; i < shadowCasters.length; i++) {\r\n        this.children.push(shadowCasters[i])\r\n      }\r\n    }\r\n\r\n    this.materialPool.freeAll(mat => {\r\n      // Remove references to textures so GC can release the three.js objects\r\n      delete mat.map\r\n      delete mat.normalMap\r\n      delete mat.metalnessMap\r\n      delete mat.roughnessMap\r\n    })\r\n\r\n    let visible: Renderable[] = []\r\n    const visibleIDs: Set<number> = new Set()\r\n\r\n    // On the first frame the view didn't yet exist when UmbrajsThreeInternal collected a list of renderables,\r\n    // so the list in \"viewRenderables\" may be missing.\r\n    if (this.sharedState.viewRenderables.has(view)) {\r\n      visible = this.sharedState.viewRenderables.get(view)\r\n    }\r\n\r\n    for (let i = 0; i < visible.length; i++) {\r\n      // Each view's list includes renderables of all UmbraScenes, so we need to pick only the relevant ones here.\r\n      if (visible[i].scenePtr !== this.umbra.nativeScene.ptr) {\r\n        continue\r\n      }\r\n\r\n      const { materialDesc, geometry } = visible[i].mesh as MeshDescriptor\r\n      visibleIDs.add(visible[i].id)\r\n      this.stats.numVisible += 1\r\n\r\n      const isTransparent = materialDesc.transparent || this.material.transparent\r\n\r\n      // Fetch a new material from the pool if we already have free ones. This avoids\r\n      // extra allocations and more importantly 'onBeforeCompile' calls.\r\n      const material = this.materialPool.allocate(\r\n        () => this.material.clone(),\r\n        (mat: THREE.Material) => {\r\n          return mat.transparent === isTransparent\r\n        },\r\n      )\r\n\r\n      material.wireframe = this.wireframe\r\n      material.opacity = this.material.opacity\r\n      material.transparent = isTransparent\r\n\r\n      material.onBeforeCompile = (shader, renderer) => {\r\n        /**\r\n         * If the original material already had a custom preprocessor callback we need to call\r\n         * that first. We need to use 'apply' in case the callback uses 'this' reference to\r\n         * access some material properties.\r\n         */\r\n        if (this.material.onBeforeCompile) {\r\n          this.material.onBeforeCompile.apply(material, [shader, renderer])\r\n        }\r\n\r\n        this.shaderPatcher.process(shader, renderer)\r\n      }\r\n\r\n      const diffuseMap = materialDesc.textures[TextureType.Diffuse]\r\n      const normalMap = materialDesc.textures[TextureType.Normal]\r\n      const metalglossMap = materialDesc.textures[TextureType.Specular]\r\n\r\n      if (diffuseMap && diffuseMap.isTexture) {\r\n        material.map = diffuseMap\r\n      }\r\n\r\n      if (normalMap && normalMap.isTexture) {\r\n        material.normalMap = normalMap\r\n        material.vertexTangents = true\r\n        material.normalMapType = THREE.TangentSpaceNormalMap\r\n      }\r\n\r\n      if (metalglossMap && metalglossMap.isTexture) {\r\n        material.metalnessMap = metalglossMap\r\n        material.metalness = 1.0\r\n        material.roughnessMap = metalglossMap\r\n        material.roughness = 1.0\r\n      }\r\n\r\n      /**\r\n       * We instatiate new Mesh objects each frame but the constructor is very cheap\r\n       * and the references should live for a very short time since 'this.children'\r\n       * gets cleared every frame.\r\n       */\r\n      const mesh = new THREE.Mesh(geometry, material) as UmbraMesh\r\n      mesh.isUmbraMesh = true\r\n      mesh.matrixWorld.copy(this.matrixWorld)\r\n      mesh.castShadow = this.castShadow\r\n      mesh.receiveShadow = this.receiveShadow\r\n      mesh.visible = true\r\n      this.children.push(mesh)\r\n\r\n      // TODO(pvaananen): Does this check work with multiple cameras?\r\n      if ((visible[i].mask & 0x01) === 0) {\r\n        shadowCasters.push(mesh)\r\n        mesh.frustumCulled = true\r\n      } else {\r\n        this.children.push(mesh)\r\n        mesh.frustumCulled = false\r\n      }\r\n    }\r\n\r\n    // Emit a warning if normals are required but missing\r\n    if (!this.diagnostics.missingNormals.checked && this.isPBREnabled()) {\r\n      for (let i = 0; i < this.children.length; i++) {\r\n        if (!this.children[i].isUmbraMesh) {\r\n          continue\r\n        }\r\n        if (!('normal' in this.children[i].geometry.attributes)) {\r\n          this.diagnostics.report('missingNormals')\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    this.stats.numShadowCasters = shadowCasters.length\r\n    this.stats.numCachedMaterials =\r\n      this.materialPool.usedList.length + this.materialPool.freeList.length\r\n\r\n    if (shadowCasters.length > 0) {\r\n      this.children.push(proxy)\r\n    }\r\n\r\n    this.updateStreamingEvents(visibleIDs)\r\n  }\r\n\r\n  dispose() {\r\n    if (this.onDispose) {\r\n      this.onDispose(this)\r\n    }\r\n\r\n    // Remove all Umbra meshes from children\r\n    this.children = this.children.filter((x: UmbraMesh) => !x.isUmbraMesh)\r\n\r\n    // Dispose all cached materials\r\n    this.materialPool.freeAll(mat => mat.dispose())\r\n\r\n    // We don't dispose mesh geometries here because they are managed by the Runtime, and\r\n    // Views are managed by UmbrajsThreeInternal.\r\n\r\n    this.umbra.nativeScene.destroy()\r\n    // Runtime must be manually freed by the user with .dispose() of the API object\r\n  }\r\n\r\n  private isPBREnabled() {\r\n    return 'normalMapType' in this.material\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\nimport { SceneFactory } from './Scene'\r\n\r\nexport class Loader extends THREE.Loader {\r\n  private Umbra: SceneFactory\r\n  constructor(Umbra: SceneFactory, manager?: THREE.LoadingManager) {\r\n    super(manager)\r\n    this.Umbra = Umbra\r\n  }\r\n\r\n  load(url: string, onLoad, onProgress, onError) {\r\n    const model = this.Umbra.createScene(url)\r\n\r\n    if (onError) {\r\n      model.onConnectionError = err => {\r\n        onError(err)\r\n      }\r\n    }\r\n    model.onConnected = () => {\r\n      delete model.onConnectionError\r\n      if (onProgress) {\r\n        onProgress(1.0)\r\n      }\r\n      onLoad(model)\r\n    }\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\nimport {\r\n  initUmbra,\r\n  deinitUmbra,\r\n  Math as UmbraMath,\r\n  Assets,\r\n  UmbraInstance,\r\n  PlatformFeatures,\r\n  TextureSupportFlags,\r\n  TextureType,\r\n  ColorSpace,\r\n  Runtime,\r\n  View,\r\n  Renderable,\r\n  VertexBuffer,\r\n  JobHandlers,\r\n  LibraryConfig,\r\n} from '@umbra3d/umbrajs'\r\nimport { ThreeFormats } from './ThreeFormats'\r\nimport { PublicLink } from './PublicLink'\r\nimport { SharedFrameState } from './SharedFrameState'\r\nimport { UmbraScene, SceneFactory, MeshDescriptor } from './Scene'\r\nimport { WebGLRenderer } from 'three'\r\nimport { HeapBufferView } from '@umbra3d/umbrajs/dist/Heap'\r\nimport { UserPointer } from '@umbra3d/umbrajs/dist/NativeTypes'\r\n\r\nexport type UmbraCamera = THREE.Camera & {\r\n  umbraStreamingPosition?: THREE.Vector3\r\n  umbraQuality?: number\r\n}\r\n\r\nfunction makeBoundingSphere(aabb: UmbraMath.BoundingBox) {\r\n  const min = aabb[0]\r\n  const max = aabb[1]\r\n  const size = new THREE.Vector3(max[0] - min[0], max[1] - min[1], max[2] - min[2])\r\n  const pos = new THREE.Vector3(min[0] + size.x * 0.5, min[1] + size.y * 0.5, min[2] + size.z * 0.5)\r\n  return new THREE.Sphere(pos, size.length())\r\n}\r\n\r\nclass UmbrajsThreeInternal implements SceneFactory {\r\n  // Upper VRAM memory use limit in bytes\r\n  memoryLimit = 500 * 1024 * 1024\r\n  // Upper total download size limit in bytes. Turned off by default.\r\n  downloadLimit = 0\r\n  // This gets lowered automatically if memory limit is hit\r\n  qualityFactor = 1.0\r\n\r\n  onStreamingUpdate: (progress: number) => void\r\n  onStreamingComplete: () => void\r\n\r\n  // An instance of the umbrajs library for debugging\r\n  umbrajs: UmbraInstance\r\n\r\n  private runtime: Runtime\r\n  private features: PlatformFeatures\r\n  private renderer: WebGLRenderer\r\n  private updateTask: number = undefined\r\n\r\n  private assetSizes = new Map<any, number>()\r\n  private textureMemoryUsed = 0\r\n  private meshMemoryUsed = 0\r\n  private lastQualityLowerFrame = -1\r\n\r\n  private get memoryUsed() {\r\n    return this.textureMemoryUsed + this.meshMemoryUsed\r\n  }\r\n\r\n  private umbraScenes = new Set<UmbraScene>()\r\n\r\n  private oldState = {\r\n    progress: 0,\r\n    downloadLimitReached: false,\r\n  }\r\n\r\n  private sharedState: SharedFrameState = {\r\n    cameraToView: new Map<THREE.Camera, View>(),\r\n    viewRenderables: new Map<View, Renderable[]>(),\r\n    viewLastUseFrame: new Map<View, number>(),\r\n  }\r\n\r\n  // Temporary values we don't want to reallocate every frame\r\n  private tempVector = new THREE.Vector3()\r\n  private dirVector = new THREE.Vector3()\r\n  private matrixWorldInverse = new THREE.Matrix4()\r\n  private projScreenMatrix = new THREE.Matrix4()\r\n  private cameraWorldPosition = new THREE.Vector3()\r\n\r\n  // This class should be instantiated via initUmbra()\r\n  constructor(umbrajs: UmbraInstance, renderer: WebGLRenderer) {\r\n    let context: WebGLRenderingContext\r\n    // three.js r106 has no 'getContext'\r\n    if ('getContext' in renderer) {\r\n      context = renderer.getContext()\r\n    } else {\r\n      context = (renderer as any).context\r\n    }\r\n\r\n    // Query GL Context for supported extenions and fill platform features with that info\r\n    const features = umbrajs.getPlatformFeatures(context)\r\n\r\n    // Three.js does not support BC5 compressed formats so we manually disable them.\r\n    features.textureSupportMask &= ~TextureSupportFlags.BC5\r\n\r\n    this.umbrajs = umbrajs\r\n    this.runtime = umbrajs.createRuntime({ features })\r\n    this.runtime.setHandlers(this.handlers)\r\n    this.renderer = renderer\r\n    this.features = features\r\n\r\n    this.startEventUpdate(1000 / 60)\r\n  }\r\n\r\n  startEventUpdate(interval: number) {\r\n    this.stopEventUpdate()\r\n    this.updateTask = window.setInterval(() => {\r\n      this.updateEvents()\r\n      this.umbraScenes.forEach(m => (m as any).updateNetworkEvents())\r\n    }, interval)\r\n  }\r\n\r\n  stopEventUpdate() {\r\n    if (typeof this.updateTask !== 'undefined') {\r\n      window.clearInterval(this.updateTask)\r\n      delete this.updateTask\r\n    }\r\n  }\r\n\r\n  private findLights(umbraScene: UmbraScene): Set<THREE.DirectionalLight> {\r\n    let parentScene\r\n    umbraScene.traverseAncestors(obj => {\r\n      if (obj['isScene']) {\r\n        parentScene = obj\r\n      }\r\n    })\r\n\r\n    if (!parentScene || (parentScene && !parentScene.isScene)) {\r\n      return new Set()\r\n    }\r\n\r\n    const lights: Set<THREE.DirectionalLight> = new Set()\r\n    parentScene.traverseVisible((obj: THREE.Object3D) => {\r\n      if (obj['isDirectionalLight'] && obj['castShadow']) {\r\n        lights.add(obj as THREE.DirectionalLight)\r\n      }\r\n    })\r\n\r\n    return lights\r\n  }\r\n\r\n  private pruneOldViews(frame: number): void {\r\n    /**\r\n     * We get no notification when cameras are removed from the scene graph\r\n     * so we'll go and remove views based on their age.\r\n     */\r\n    for (const [view, lastUsed] of this.sharedState.viewLastUseFrame) {\r\n      if (frame - lastUsed < 600) {\r\n        continue\r\n      }\r\n\r\n      for (const [cam, view2] of this.sharedState.cameraToView) {\r\n        if (view2 === view) {\r\n          this.sharedState.cameraToView.delete(cam)\r\n          break\r\n        }\r\n      }\r\n      view.destroy()\r\n      this.sharedState.viewLastUseFrame.delete(view)\r\n    }\r\n  }\r\n\r\n  private updateViews(): void {\r\n    const shared = this.sharedState\r\n\r\n    const lights: Set<THREE.DirectionalLight> = new Set()\r\n\r\n    if (this.renderer.shadowMap.enabled) {\r\n      for (const umbraScene of this.umbraScenes) {\r\n        for (const light of this.findLights(umbraScene)) {\r\n          lights.add(light)\r\n        }\r\n      }\r\n    }\r\n\r\n    const dir = this.dirVector\r\n    const vector3 = this.tempVector\r\n\r\n    const lightDirections = Array.from(lights).map(light => {\r\n      dir.setFromMatrixPosition(light.target.matrixWorld)\r\n      vector3.setFromMatrixPosition(light.matrixWorld)\r\n      dir.sub(vector3)\r\n      return [dir.x, dir.y, dir.z]\r\n    }, lights)\r\n\r\n    this.pruneOldViews(this.renderer.info.render.frame)\r\n\r\n    for (const [threeCamera, view] of shared.cameraToView) {\r\n      const camera: UmbraCamera = threeCamera\r\n\r\n      this.matrixWorldInverse.getInverse(camera.matrixWorld)\r\n      this.projScreenMatrix.multiplyMatrices(camera.projectionMatrix, this.matrixWorldInverse)\r\n\r\n      // By default we stream in meshes around the camera, but user can override it.\r\n      if ('umbraStreamingPosition' in camera) {\r\n        this.cameraWorldPosition.copy(camera.umbraStreamingPosition)\r\n      } else {\r\n        camera.getWorldPosition(this.cameraWorldPosition)\r\n      }\r\n\r\n      let quality = 0.5\r\n      if ('umbraQuality' in camera) {\r\n        quality = camera.umbraQuality\r\n      }\r\n\r\n      const pos = this.cameraWorldPosition\r\n      view.setCamera(\r\n        this.projScreenMatrix.elements,\r\n        [pos.x, pos.y, pos.z],\r\n        quality * this.qualityFactor,\r\n        lightDirections,\r\n      )\r\n\r\n      let list: Renderable[] = []\r\n      if (shared.viewRenderables.has(view)) {\r\n        list = shared.viewRenderables.get(view)\r\n        list.length = 0\r\n      } else {\r\n        shared.viewRenderables.set(view, list)\r\n      }\r\n\r\n      const batchSize = 500\r\n      let visible: Renderable[] = []\r\n      do {\r\n        visible = view.getVisible(batchSize)\r\n        list.push(...visible)\r\n      } while (visible.length === batchSize)\r\n    }\r\n  }\r\n\r\n  update(timeBudget = 7) {\r\n    const downloadLimitReached =\r\n      this.downloadLimit !== 0 && this.getStats().maxBytesDownloaded >= this.downloadLimit\r\n\r\n    // If the limit is reached we freeze all updates. Streaming will stop completely.\r\n    if (downloadLimitReached) {\r\n      if (!this.oldState.downloadLimitReached) {\r\n        this.umbrajs.abortDownloads()\r\n      }\r\n    } else {\r\n      const start = performance.now()\r\n      this.runtime.update()\r\n      const updateTook = performance.now() - start\r\n      this.runtime.loadAssets(timeBudget - updateTook)\r\n      this.updateViews()\r\n    }\r\n\r\n    this.oldState.downloadLimitReached = downloadLimitReached\r\n\r\n    if (this.memoryUsed / this.memoryLimit < 0.25) {\r\n      this.adjustQuality(1.1)\r\n    }\r\n  }\r\n\r\n  createScene(link: string | PublicLink): UmbraScene {\r\n    let url: string\r\n    if (typeof link === 'string') {\r\n      url = link\r\n    } else if (typeof link === 'object') {\r\n      if (('token' in link) as any) {\r\n        console.warn(\r\n          'Connection with {token, projectID, modelID} is deprecated. Use {key, project, model} or a string locator instad.',\r\n        )\r\n        link.key = link['token']\r\n        link.project = link['projectID']\r\n        link.model = link['modelID']\r\n      }\r\n\r\n      if (!('key' in link && 'project' in link && 'model' in link)) {\r\n        throw new Error(\r\n          'createScene() expects an object with properties \"key\", \"project\", and \"model\"',\r\n        )\r\n      }\r\n      url = `key=${link.key}&project=${link.project}&model=${link.model}`\r\n    } else {\r\n      throw new TypeError('expected either string or an object argument')\r\n    }\r\n\r\n    const umbraScene = new UmbraScene(\r\n      this.runtime,\r\n      this.runtime.createScenePublic(url),\r\n      this.sharedState,\r\n      this.renderer,\r\n      this.features,\r\n      s => this.umbraScenes.delete(s),\r\n    )\r\n    this.umbraScenes.add(umbraScene)\r\n    return umbraScene\r\n  }\r\n\r\n  createSceneWithURL(url: string): UmbraScene {\r\n    const scene = this.runtime.createSceneLocal(url)\r\n    const umbraScene = new UmbraScene(\r\n      this.runtime,\r\n      scene,\r\n      this.sharedState,\r\n      this.renderer,\r\n      this.features,\r\n      s => this.umbraScenes.delete(s),\r\n    )\r\n    this.umbraScenes.add(umbraScene)\r\n    return umbraScene\r\n  }\r\n\r\n  /**\r\n   * Returns streaming information. We can't tell which files came from the browser cache\r\n   * so we report lower and upper limits of the true download size.\r\n   *\r\n   * The returned object has the following fields:\r\n   *\r\n   *  'maxBytesDownloaded' an upper limit assuming no file was cached,\r\n   *  'minBytesDownloaded' the corresponding lower limit assuming all duplicates came from cache.\r\n   *  'textureMemoryUse' the number of bytes used by texture assets\r\n   *  'meshMemoryUse' the number of bytes used by mesh assets\r\n   *\r\n   */\r\n  getStats() {\r\n    return Object.assign(this.umbrajs.getStreamingInfo(), {\r\n      textureMemoryUsed: this.textureMemoryUsed,\r\n      meshMemoryUsed: this.meshMemoryUsed,\r\n    })\r\n  }\r\n\r\n  private canFitInMemory(bytes: number) {\r\n    return this.memoryUsed + bytes < this.memoryLimit\r\n  }\r\n\r\n  private adjustQuality(factor: number) {\r\n    if (this.renderer.info.render.frame == this.lastQualityLowerFrame) {\r\n      return\r\n    }\r\n    this.qualityFactor = Math.max(0, Math.min(1, this.qualityFactor * factor))\r\n    this.lastQualityLowerFrame = this.renderer.info.render.frame\r\n  }\r\n\r\n  // Converts a texture descriptor and a pixel buffer to a three.js compatible texture\r\n  private makeTexture(\r\n    info,\r\n    buffer: HeapBufferView,\r\n    glformat,\r\n  ): THREE.CompressedTexture | THREE.DataTexture {\r\n    const pixelData = buffer.getArray().slice() as THREE.TypedArray\r\n\r\n    let tex\r\n    if (glformat.compressed) {\r\n      const mip = {\r\n        width: info.width,\r\n        height: info.height,\r\n        data: pixelData as Uint8ClampedArray,\r\n      }\r\n      tex = new THREE.CompressedTexture([mip], info.width, info.height)\r\n    } else {\r\n      tex = new THREE.DataTexture(pixelData, info.width, info.height)\r\n    }\r\n\r\n    tex.format = glformat.format\r\n    tex.type = glformat.type\r\n    tex.magFilter = THREE.LinearFilter\r\n    tex.minFilter = THREE.LinearFilter\r\n    tex.anisotropy = 0\r\n\r\n    return tex\r\n  }\r\n\r\n  // AssetLoad handlers that create and remove materials, textures, and meshes\r\n  private handlers: JobHandlers = {\r\n    LoadMaterial: (data: Assets.MaterialData, assetID: UserPointer) => {\r\n      const material = data\r\n      material.transparent = data.transparent ? true : false\r\n      this.runtime.addAsset(assetID, material)\r\n      return Assets.AssetLoadResult.Success\r\n    },\r\n    UnloadMaterial: (asset: any, assetID: UserPointer) => {\r\n      this.runtime.removeAsset(assetID)\r\n    },\r\n    LoadTexture: (data: Assets.TextureData, assetID: UserPointer) => {\r\n      const info = data.info\r\n      const buffer = data.buffer\r\n\r\n      let glformat\r\n\r\n      if (ThreeFormats.hasOwnProperty(info.format)) {\r\n        glformat = ThreeFormats[info.format]\r\n      }\r\n\r\n      if (!glformat) {\r\n        // Add a dummy object for unknown formats. They will appear as a solid black color.\r\n        console.log('Unknown texture format', info.format)\r\n        this.runtime.addAsset(assetID, { isTexture: false })\r\n        return Assets.AssetLoadResult.Success\r\n      }\r\n\r\n      if (!this.canFitInMemory(buffer.size)) {\r\n        this.adjustQuality(0.8)\r\n        return Assets.AssetLoadResult.OutOfMemory\r\n      }\r\n\r\n      const tex = this.makeTexture(info, buffer, glformat)\r\n\r\n      /**\r\n       * A workaround for the case where we directly output colors in gamma space.\r\n       * We make diffuse textures linear to avoid gamma expansion at texture fetch time.\r\n       * This is slightly wrong because texture filtering and shading will be done\r\n       * in gamma space, but this behavior is what people usually expect.\r\n       */\r\n      let gammaOutput = false\r\n      if ('outputEncoding' in this.renderer) {\r\n        // three.js version 112 and after\r\n        gammaOutput = this.renderer['outputEncoding'] === THREE.sRGBEncoding\r\n      } else if ('gammaOutput' in this.renderer) {\r\n        // three.js prior to version 112\r\n        gammaOutput = this.renderer['gammaOutput']\r\n      }\r\n\r\n      if (info.type === TextureType.Diffuse && !gammaOutput) {\r\n        tex.encoding = THREE.LinearEncoding\r\n      } else {\r\n        tex.encoding =\r\n          info.colorSpace === ColorSpace.Linear ? THREE.LinearEncoding : THREE.sRGBEncoding\r\n      }\r\n\r\n      tex.needsUpdate = true\r\n\r\n      this.textureMemoryUsed += buffer.size\r\n      this.assetSizes.set(tex, buffer.size)\r\n      this.runtime.addAsset(assetID, tex)\r\n      return Assets.AssetLoadResult.Success\r\n    },\r\n    UnloadTexture: (texture: any, assetID: UserPointer) => {\r\n      // Free texture data only if it's not a dummy texture\r\n      if (texture.isTexture) {\r\n        texture.dispose()\r\n      }\r\n\r\n      if (this.assetSizes.has(texture)) {\r\n        this.textureMemoryUsed -= this.assetSizes.get(texture)\r\n        this.assetSizes.delete(texture)\r\n      }\r\n\r\n      this.runtime.removeAsset(assetID)\r\n    },\r\n    LoadMesh: (data: Assets.MeshData, assetID: UserPointer) => {\r\n      /**\r\n       * LoadMesh gives us all the vertex data in load.data.buffers.\r\n       * The buffers are only valid during this handler, and the memory will be\r\n       * reused for other meshes later. Therefore we make copies of the arrays\r\n       * for three.js which is something we would have to do anyway.\r\n       */\r\n\r\n      const attribs = {\r\n        position: { components: 3 },\r\n        normal: { components: 3 },\r\n        uv: { components: 2 },\r\n        tangent: { components: 3 },\r\n      }\r\n\r\n      let totalSize = 0\r\n      Object.keys(attribs)\r\n        .map(name => data.buffers[name])\r\n        .forEach(buffer => {\r\n          if (buffer) {\r\n            totalSize += buffer.data.size\r\n          }\r\n        })\r\n\r\n      if (!this.canFitInMemory(totalSize)) {\r\n        this.adjustQuality(0.8)\r\n        return Assets.AssetLoadResult.OutOfMemory\r\n      }\r\n\r\n      const geometry = new THREE.BufferGeometry()\r\n      const indexArray = data.buffers['index'].data.getArray()\r\n      const indices = Array.from(indexArray as any)\r\n      geometry.setIndex(indices as number[])\r\n      geometry.boundingSphere = makeBoundingSphere(data.bounds)\r\n\r\n      Object.keys(attribs).forEach(name => {\r\n        const buffer = data.buffers[name] as VertexBuffer\r\n\r\n        if (buffer) {\r\n          const view = buffer.data\r\n          const array = view.getArray()\r\n          const attrib = new THREE.Float32BufferAttribute(array.slice(), attribs[name].components)\r\n\r\n          if ('setAttribute' in (geometry as any)) {\r\n            // three.js v112\r\n            geometry['setAttribute'](name, attrib)\r\n          } else {\r\n            // three.js prior to v112\r\n            geometry['addAttribute'](name, attrib)\r\n          }\r\n        }\r\n      })\r\n\r\n      const mesh: MeshDescriptor = {\r\n        geometry,\r\n        materialDesc: data.material,\r\n      }\r\n\r\n      this.meshMemoryUsed += totalSize\r\n      this.assetSizes.set(mesh, totalSize)\r\n      this.runtime.addAsset(assetID, mesh)\r\n      return Assets.AssetLoadResult.Success\r\n    },\r\n    UnloadMesh: (mesh: any, assetID: UserPointer) => {\r\n      if (this.assetSizes.has(mesh)) {\r\n        this.meshMemoryUsed -= this.assetSizes.get(mesh)\r\n        this.assetSizes.delete(mesh)\r\n      }\r\n      // Tell Umbra's runtime that this asset doesn't exist anymore\r\n      this.runtime.removeAsset(assetID)\r\n      // Release three.js's resources\r\n      mesh.geometry.dispose()\r\n    },\r\n  }\r\n\r\n  private updateEvents() {\r\n    const progress = this.getStreamingProgress()\r\n    if (this.oldState.progress != progress) {\r\n      if (this.onStreamingUpdate) {\r\n        this.onStreamingUpdate(progress)\r\n      }\r\n      if (progress === 1.0 && this.onStreamingComplete) {\r\n        this.onStreamingComplete()\r\n      }\r\n    }\r\n\r\n    this.oldState.progress = progress\r\n  }\r\n\r\n  getStreamingProgress(): number {\r\n    return this.runtime.getStreamingProgress()\r\n  }\r\n\r\n  dispose() {\r\n    this.stopEventUpdate()\r\n\r\n    for (const view of this.sharedState.cameraToView.values()) {\r\n      view.destroy()\r\n    }\r\n\r\n    this.umbraScenes.forEach((m: UmbraScene) => m.dispose())\r\n\r\n    this.sharedState.cameraToView.clear()\r\n    this.umbraScenes.clear()\r\n\r\n    this.runtime.assets.forEach((asset, userPtr) => {\r\n      if ('geometry' in asset) {\r\n        asset.geometry.dispose()\r\n      }\r\n      if ('dispose' in asset) {\r\n        asset.dispose()\r\n      }\r\n    })\r\n\r\n    this.assetSizes.clear()\r\n    this.textureMemoryUsed = 0\r\n    this.meshMemoryUsed = 0\r\n\r\n    this.runtime.destroy()\r\n    this.runtime = undefined\r\n\r\n    deinitUmbra(this.umbrajs)\r\n  }\r\n}\r\n\r\nexport function initWithThreeJS(renderer: THREE.WebGLRenderer, userConfig: LibraryConfig) {\r\n  if (!renderer) {\r\n    throw new TypeError('\"renderer\" should be of type THREE.WebGLRenderer')\r\n  }\r\n\r\n  return initUmbra(userConfig).then(Umbra => {\r\n    return new UmbrajsThreeInternal(Umbra, renderer)\r\n  })\r\n}\r\n\r\n// Hide the library object constructor by wrapping it in an interface\r\ninterface UmbrajsThree extends UmbrajsThreeInternal {}\r\nexport { UmbraScene as Scene, UmbrajsThree }\r\nexport { Loader } from './Loader'\r\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","_scriptDir","MatrixFormat","TextureType","TextureFormat","ColorSpace","VertexAttribute","BufferFlags","LogLevel","TransferStatus","HeaderError","HttpMethod","LibraryInfo","InvalidUserPointer","TextureSupportFlags","RuntimeFlags","ConnectionStatus","DepthRange","FilterShapeType","SceneCopyStatus","SceneCopyDestinationType","SceneCopySourceType","AssetType","AssetLoadResult","RayQueryFlags","UmbraNativeAPI","document","currentScript","src","undefined","c","r","n","hasOwnProperty","aa","ba","a","b","v","indexOf","substr","lastIndexOf","fa","y","ha","ca","print","console","log","bind","w","printErr","warn","da","Math","ceil","thisProgram","quit","wasmBinary","noExitRuntime","WebAssembly","z","ia","Table","initial","maximum","element","A","ja","B","ka","la","d","e","f","string","na","ma","array","C","set","g","k","h","l","oa","D","apply","pa","ta","_E","ua","va","F","G","wa","xa","qa","TextDecoder","ra","subarray","decode","String","fromCharCode","charCodeAt","sa","ya","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","Int32Array","HEAPU8","Uint8Array","HEAPU16","Uint16Array","HEAPU32","Uint32Array","HEAPF32","Float32Array","HEAPF64","Float64Array","Aa","TOTAL_MEMORY","Ba","shift","Ob","Lb","dynCall_v","dynCall_vi","wasmMemory","Memory","buffer","byteLength","Ca","Da","Ea","Fa","Ga","Ha","preRun","unshift","H","Ja","onAbort","RuntimeError","Ka","I","startsWith","preloadedImages","preloadedAudios","La","locateFile","Ma","Pa","5793","alert","7093","7313","p","u","q","t","XMLHttpRequest","open","withCredentials","responseType","x","mc","nc","onload","status","response","URLsDownloaded","maxBytesDownloaded","has","add","minBytesDownloaded","dynCall_viii","dynCall_viiii","Ac","S","Z","onerror","onabort","setRequestHeader","btoa","split","send","slice","Oa","Qa","Sa","push","Ra","Ta","Ua","J","Va","Wa","Xa","Ya","pop","Za","this","fromWireType","K","L","$a","ab","replace","bb","Function","cb","Error","name","message","stack","create","db","eb","M","forEach","fb","gb","N","hb","P","Yb","ib","Q","jb","Pb","R","kb","lb","mb","ob","Jb","arguments","Sb","nb","rc","qb","FUNCTION_TABLE","join","rb","sb","tb","vb","T","wb","xb","yb","zb","V","Gb","_Hb","U","Ib","W","Fb","Db","Eb","Mb","Rb","Tb","Vb","pointerLockElement","canvas","mozPointerLockElement","webkitPointerLockElement","msPointerLockElement","preloadPlugins","Wb","Xb","MozBlobBuilder","WebKitBlobBuilder","Zb","window","URL","webkitURL","canHandle","test","handle","Blob","type","$b","size","ea","append","getBlob","createObjectURL","Image","complete","createElement","width","height","getContext","drawImage","revokeObjectURL","qc",".ogg",".wav",".mp3","Audio","addEventListener","setTimeout","ac","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","msRequestPointerLock","exitPointerLock","mozExitPointerLock","webkitExitPointerLock","msExitPointerLock","elementPointerLock","preventDefault","cc","dc","Y","ec","parentNode","fullscreenElement","mozFullScreenElement","msFullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","exitFullscreen","fc","SDL","screen","gc","hc","insertBefore","removeChild","onFullScreen","onFullscreen","appendChild","requestFullscreen","mozRequestFullScreen","msRequestFullscreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","webkitRequestFullScreen","tc","jc","cancelFullScreen","mozCancelFullScreen","msExitFullscreen","webkitCancelFullScreen","kc","requestAnimationFrame","Date","now","max","jpg","jpeg","png","bmp","ogg","wav","mp3","lc","forcedAspectRatio","round","min","style","removeProperty","setProperty","pc","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","oc","onupgradeneeded","target","result","transaction","objectStoreNames","contains","objectStore","createObjectStore","onsuccess","error","wc","uc","vc","USER","LOGNAME","PATH","PWD","HOME","LANG","navigator","languages","_","xc","onExit","Qb","_exit","InternalError","yc","zc","BindingError","count_emval_handles","get_first_emval","UnboundTypeError","requestFullScreen","setCanvasSize","pauseMainLoop","resumeMainLoop","setStatus","statusMessage","Nb","preMainLoop","postMainLoop","audio","Kb","setImmediate","data","stopPropagation","postMessage","Cb","getUserMedia","mozGetUserMedia","createContext","antialias","alpha","GL","ic","GLctx","sc","bc","dateNow","performance","_fflush","Dc","X","stat","s","map","concat","Ub","za","read","write","toWireType","argPackAdvance","readValueFromPointer","_e","pb","ub","m","O","o","ArrayBuffer","Uint8ClampedArray","j","Bb","deleteObject","Ab","_d","abort","get","Bc","Cc","put","E","grow","getUTCSeconds","getUTCMinutes","getUTCHours","getUTCDate","getUTCMonth","getUTCFullYear","getUTCDay","getTime","UTC","memory","table","Ec","asm","exports","monitorRunDependencies","instance","fetch","Promise","credentials","then","ok","arrayBuffer","instantiate","env","wasi_unstable","instantiateWasm","instantiateStreaming","___wasm_call_ctors","$","_UmbraMeshLoadGetInfo","_UmbraMeshLoadGetSerializedSize","_UmbraMeshLoadSerialize","_UmbraAssetLoadGetType","_UmbraTextureLoadGetInfo","_UmbraTextureLoadGetSerializedSize","_UmbraTextureLoadSerialize","ga","_UmbraGeodeticToEcef","_UmbraEcefToGeodetic","_UmbraTextureGetMipmapLevelByteSize","_UmbraTextureGetMipmapLevelOffset","_malloc","_UmbraMeshLoadFinishExternal","_free","_UmbraConfigInit","_UmbraSetAllocator","_UmbraSetLogger","_UmbraSetHttp","_UmbraClientCreate","_UmbraClientDestroy","_UmbraGetLibraryInfo","_UmbraEnvironmentInfoDefaults","_UmbraRuntimeCreate","_UmbraRuntimeDestroy","_UmbraRuntimeUpdate","_UmbraRuntimeGetStreamingState","_UmbraRuntimeNextAssetUnload","_UmbraAssetUnloadFinish","_UmbraAssetUnloadGetType","_UmbraAssetUnloadGetUserPointer","_UmbraRuntimeNextAssetLoad","_UmbraAssetLoadPrepare","_UmbraAssetLoadFinish","_UmbraAssetLoadAbortRequested","_UmbraVertexAttributeGetElementByteSize","Ia","_UmbraMeshLoadGetData","_UmbraMeshStreamSetBuffers","_UmbraMeshStreamDone","_UmbraMeshStreamNext","_UmbraMaterialLoadGetInfo","Na","_UmbraTextureLoadGetData","_UmbraTextureMetaDataLoadGetData","_UmbraTextureMetaDataGetClassificationCount","_UmbraTextureMetaDataGetClassification","_UmbraTextureMetaDataGetClassificationAmount","_UmbraSceneCreate","_UmbraSceneCreatePublic","_UmbraSceneCreateLocal","_UmbraSceneDestroy","_UmbraSceneGetConnectionStatus","_UmbraSceneGetInfo","_UmbraSceneSetTransform","_UmbraSceneCopyCreate","_a","_UmbraSceneCopyDestroy","_UmbraSceneCopyGetStatus","_UmbraSceneCopyGetError","_UmbraViewCreate","_UmbraViewDestroy","_UmbraViewUpdateRendering","_UmbraViewUpdateFilter","_UmbraViewGetCompleted","_UmbraViewResetRenderables","_UmbraViewNextRenderables","_UmbraViewRayQuery","_UmbraSendInternalMessage","___getTypeName","___embind_register_native_and_builtin_types","stackSave","stackAlloc","stackRestore","dynCall_iiiiiiiiii","dynCall_viiiiiiiii","dynCall_iiiii","dynCall_iiii","dynCall_iii","dynCall_ii","dynCall_vii","dynCall_iiiiii","dynCall_viiiii","dynCall_iiiiiiii","dynCall_viiiiiii","dynCall_i","Fc","Hc","onRuntimeInitialized","postRun","dynCall_jiji","dynCall_iidiiii","Hb","dynCall_viiiiii","cwrap","every","Gc","run","preInit","Set","wgetRequests","__awaiter","thisArg","_arguments","generator","resolve","reject","fulfilled","step","next","rejected","done","Assets","freeze","__proto__","WorkerPool","[object Object]","numWorkers","workerScriptURL","abortCheckCallback","_this","workers","infos","_loop","worker","Worker","onmessage","msg","_this$infos$i$queue$s","queue","userData","callback","_this$infos$i$queue$s2","id","funcName","_this2","transferObject","callbackId","best_id","best","shortest","info","arrayToHeap","Map","assertInteger","Number","isInteger","MatrixFormat$1","TextureType$1","TextureFormat$1","ColorSpace$1","VertexAttribute$1","BufferFlags$1","LogLevel$1","TransferStatus$1","HeaderError$1","HttpMethod$1","LibraryInfo$1","InvalidUserPointer$1","TextureSupportFlags$1","RuntimeFlags$1","ConnectionStatus$1","DepthRange$1","FilterShapeType$1","SceneCopyStatus$1","SceneCopyDestinationType$1","SceneCopySourceType$1","AssetType$1","AssetLoadResult$1","RayQueryFlags$1","Module","config","lib","getPlatformFeatures","gl","flags","formats","supportsSRGB","supportsHalfFloat","extStrings","extNames","allExtensions","getSupportedExtensions","full","shortened","mapping","mask","BC1","BC2","BC3","names","BC4","BC5","PVRTC1","ETC1","ASTC","keys","includes","getExtension","textureSupportMask","srgb","halfFloat","nativeModule","createRuntime","Buffer","BYTES_PER_ELEMENT","ptr","umbraAlloc","umbraFree","newSize","destroy","BufferView","heapName","renderableStructOffsets","getRenderableMemberOffsets","copyMat4","buf","elements","Client","configPtr","CONFIG_SIZE","configInit","clientCreate","clientDestroy","NativeScene","matrixBuffer","infoBuffer","sceneInfoSize","sceneDestroy","sceneGetConnectionStatus","sceneGetInfo","deserializeSceneInfo","connectionStatus","Connected","matrix","floats","sceneSetTransform","View","runtimeAssets","vectorBuffer","lightBuffer","MAX_LIGHTS","temp","viewDestroy","worldToClip","positionVector","quality","lights","depthRange","MinusOneToOne","matrixFormat","ColumnMajor","viewUpdateRendering","batchSize","bufferSize","renderableSize","strideInWords","bufferWordSize","getView","arrayType","heap","ofs","meshIDs","lodLevels","masks","scenePointers","count","viewNextRenderables","output","lod","scenePtr","mesh","AssetLoad","assetUserPointer","assetType","assetLoadGetType","assetLoadPrepare","assetLoadFinish","AssetUnload","assetUnloadGetType","userPointer","assetUnloadGetUserPointer","assetUnloadFinish","Runtime","client","_ref","_ref2","_ref$features","features","_ref$flags","_ref2$workerScriptURL","_ref2$numWorkers","assets","nextId","tempTextureBuffer","tempStreamingStateBuffer","streamingStateSize","tempDispatchBuffer","stats","meshPipelineMemoryUse","texturePipelineMemoryUse","limits","maxPipelineMemoryUse","pendingAssetLoads","normalFormats","infoPtr","serializeEnvironmentInfo","textureSupportFlags","localCacheDirectory","localCacheMaximumByteSize","runtimeCreate","platformFeatures","scratchSize","meshInfoSize","materialInfoSize","textureInfoSize","byteBufferSize","scratch","debug","textureFormatsInUse","workerPool","runtimeDestroy","publicKey","sceneCreatePublic","url","sceneCreateLocal","handlers","viewPtr","viewCreate","runtimeUpdate","runtimeNextAssetUnload","unload","load","textureLoadGetInfo","texture","deserializeTextureInfo","needsTranscoding","formatNeedsTranscoding","format","prepare","_formatToArrayType","textureLoadDispatchSize","textureLoadGetSerializedSize","textureLoadDispatchHeaderSize","ensureSize","dispatchBuffer","convertAssetLoadToTextureDispatch","memoryUseEstimate","findBestWorker","callWorker","bytes","memoryUse","_ref4","finish","Failure","umbraTexture","deserializeTextureLoadResult","textureInfo","formatToArrayType","RGBA32","RGB565","RG8","RG16F","pixelData","textureLoadResultHeaderSize","dataByteSize","textureData","_buffer","serializeByteBuffer","byteSize","textureLoadGetData","_textureData","_status","Success","materialLoadGetInfo","deserializeMaterialInfo","texturePtrs","textures","filter","INVALID_USERPOINTER","texturePromises","results","all","textureObjects","materialData","transparent","meshLoadGetInfo","deserializeMeshInfo","meshLoadDispatchHeaderSize","meshLoadGetSerializedSize","desc","convertAssetLoadToMeshDispatch","materialUserPointer","material","materialPromise","meshLoadResultHeaderSize","bufferByteSize","deserializeMeshLoadResult","failed","assetLoad","basePtr","bufferDescs","meshLoadResultBuildUmbraBuffers","attributeArrayType","position","uv","normal","tangent","index","elementByteSize","meshAttributes","vbuf","elemBuf","attributeArraySize","elementCapacity","elementStride","meshData","buffers","bounds","mn","mx","meshLoadFinishExternalWithLoadResultHeader","timeLimit","startTime","getAssetUnloads","asset","loadPtr","runtimeNextAssetLoad","promise","getNextUserPointer","dispatchTextureLoad","dispatchMaterialLoad","dispatchMeshLoad","pipelineMemoryUsed","shortestQueueLength","userPtr","assetID","runtimeGetStreamingState","deserializeStreamingState","state","getStreamingState","numResidentTiles","numResidentTilesLoaded","umbraLibraryConfig","getStreamingInfo","getLibraryInfo","version","Version","copyright","Copyright","buildTime","BuildTime","buildID","BuildId","abortDownloads","values","req","initUmbra","assign","wasmURL","path","prefix","endsWith","what","environmentInfoDefaults","sceneCreate","viewUpdateFilter","viewGetCompleted","viewResetRenderables","viewRayQuery","sceneCopyCreate","sceneCopyGetStatus","sceneCopyGetError","sceneCopyDestroy","vertexAttributeGetElementByteSize","assetLoadAbortRequested","meshLoadFinishExternal","meshLoadGetData","meshStreamSetBuffers","meshStreamNext","meshStreamDone","textureGetMipmapLevelByteSize","textureGetMipmapLevelOffset","textureMetaDataLoadGetData","textureMetaDataGetClassificationCount","textureMetaDataGetClassification","textureMetaDataGetClassificationAmount","sendInternalMessage","wrapNativeFunctions","makeFormat","compressed","ThreeFormats","RGB24","THREE","ETC1_RGB","ASTC_4X4","PVRTC1_RGB4","ShaderPatcher","flipTangent","defines","process","shader","renderer","frag","fragmentShader","ObjectPool","usedList","freeList","allocate","makeFunc","predicate","elem","splice","freeAll","clearFunc","clear","UmbraScene","runtime","scene","sharedState","onDispose","wireframe","onConnected","onConnectionError","onDisconnected","onConnectionChanged","onMeshChanged","isLOD","autoUpdate","materialPool","shaderPatcher","numVisible","numShadowCasters","numCachedMaterials","numAssets","diagnostics","missingNormals","checked","deprecatedMaterial","report","field","umbra","oldState","visibleIDs","update","camera","nativeScene","view","cameraToView","createView","viewLastUseFrame","render","frame","setTransform","matrixWorld","isPBREnabled","flip","determinant","newChildren","children","isUmbraMesh","shadowCasters","proxy","cam","mat","normalMap","metalnessMap","roughnessMap","visible","viewRenderables","materialDesc","geometry","isTransparent","clone","opacity","onBeforeCompile","diffuseMap","Diffuse","Normal","metalglossMap","Specular","isTexture","vertexTangents","normalMapType","metalness","roughness","copy","castShadow","receiveShadow","frustumCulled","attributes","updateStreamingEvents","scale","getInfo","connected","isConnected","getBounds","getCenter","applyMatrix4","center","updateNetworkEvents","ConnectionError","Connecting","dispose","Loader","Umbra","manager","onLoad","onProgress","onError","model","createScene","err","UmbrajsThreeInternal","textureMemoryUsed","meshMemoryUsed","umbrajs","context","memoryLimit","downloadLimit","qualityFactor","onStreamingUpdate","onStreamingComplete","updateTask","assetSizes","lastQualityLowerFrame","umbraScenes","progress","downloadLimitReached","tempVector","dirVector","matrixWorldInverse","projScreenMatrix","cameraWorldPosition","LoadMaterial","addAsset","UnloadMaterial","removeAsset","LoadTexture","glformat","canFitInMemory","adjustQuality","OutOfMemory","tex","makeTexture","gammaOutput","encoding","colorSpace","Linear","needsUpdate","UnloadTexture","LoadMesh","attribs","components","totalSize","aabb","pos","indexArray","getArray","indices","setIndex","boundingSphere","attrib","UnloadMesh","setHandlers","startEventUpdate","interval","stopEventUpdate","setInterval","updateEvents","clearInterval","findLights","umbraScene","parentScene","traverseAncestors","isScene","traverseVisible","pruneOldViews","updateViews","shared","shadowMap","enabled","light","dir","vector3","lightDirections","setFromMatrixPosition","sub","threeCamera","getInverse","multiplyMatrices","projectionMatrix","umbraStreamingPosition","getWorldPosition","umbraQuality","setCamera","list","getVisible","timeBudget","getStats","start","updateTook","loadAssets","memoryUsed","link","project","createScenePublic","_this3","createSceneWithURL","createSceneLocal","_this4","factor","mip","magFilter","minFilter","anisotropy","getStreamingProgress","privateUmbra","deinitUmbra","initWithThreeJS","userConfig"],"mappings":"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"}